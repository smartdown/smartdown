/*! For license information please see openjscad.reentrant.umd.js.LICENSE.txt */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).openjscad=e()}((function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){return i(t[o][1][e]||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={inchMM:1/.03937}},{}],2:[function(e,t,n){const{CSG:r}=e("@jscad/csg"),i=e("./objectBuilder"),s=e("./parse");t.exports=function(t,n,o){n=n||"amf";const a={pxPmm:e("./constants").pxPmm,version:"0.0.0",addMetaData:!0};o=Object.assign({},a,o);const{pxPmm:u}=o,{amfObj:l,amfMaterials:c,amfTextures:h,amfConstels:p}=s(t,u);if(!l)throw new Error("AMF parsing failed, no valid amf data retrieved");return((e,t)=>{const n=e.objects.map(((n,r)=>"object"===n.type?i(n,r,t,{amf:e,csg:!0}):void 0));return(new r).union(n)})(l,{amfMaterials:c,amfTextures:h,amfConstels:p})}},{"./constants":1,"./objectBuilder":5,"./parse":6,"@jscad/csg":22}],3:[function(e,t,n){t.exports={amfMesh:function(e){return{type:"mesh",objects:[]}},amfVertices:function(e){return{type:"vertices",objects:[]}},amfCoordinates:function(e){return{type:"coordinates",objects:[]}},amfX:function(e){return{type:"x",value:"0"}},amfY:function(e){return{type:"y",value:"0"}},amfZ:function(e){return{type:"z",value:"0"}},amfNormal:function(e){return{type:"normal",objects:[]}},amfVolume:function(e){let t={type:"volume"};return"MATERIALID"in e&&(t.materialid=e.MATERIALID),t.objects=[],t},amfTriangle:function(e){return{type:"triangle",objects:[]}},amfV1:function(e){return{type:"v1",value:"0"}},amfV2:function(e){return{type:"v2",value:"0"}},amfV3:function(e){return{type:"v3",value:"0"}},amfVertex:function(e){return{type:"vertex",objects:[]}},amfEdge:function(e){return{type:"edge",objects:[]}},amfMetadata:function(e){let t={type:"metadata"};return"TYPE"in e&&(t.mtype=e.TYPE),"ID"in e&&(t.id=e.ID),t},amfMaterial:function(e){let t={type:"material"};return"ID"in e&&(t.id=e.ID),t.objects=[],t},amfColor:function(e){return{type:"color",objects:[]}},amfR:function(e){return{type:"r",value:"1"}},amfG:function(e){return{type:"g",value:"1"}},amfB:function(e){return{type:"b",value:"1"}},amfA:function(e){return{type:"a",value:"1"}},amfMap:function(e){let t={type:"map"};return"GTEXID"in e&&(t.gtexid=e.GTEXID),"BTEXID"in e&&(t.btexid=e.BTEXID),"RTEXID"in e&&(t.rtexid=e.RTEXID),t.objects=[],t},amfU1:function(e){return{type:"u1",value:"0"}},amfU2:function(e){return{type:"u2",value:"0"}},amfU3:function(e){return{type:"u3",value:"0"}}}},{}],4:[function(e,t,n){const r=e("./translate"),i=e("./deserialize");t.exports={deserialize:function(e,t,n){return"jscad"===(n=Object.assign({},{output:"jscad"},n)).output?r(e,t,n):i(e,t,n)}}},{"./deserialize":2,"./translate":7}],5:[function(e,t,n){function r(e,t){for(let n=0;n<e.length;n++)if(e[n].type===t)return e[n].value;return null}function i(e){for(let t=0;t<e.length;t++){let n=e[t];if("color"===n.type){let e=parseFloat(r(n.objects,"r")),t=parseFloat(r(n.objects,"g")),i=parseFloat(r(n.objects,"b")),s=parseFloat(r(n.objects,"a"));return Number.isNaN(e)&&(e=1),Number.isNaN(t)&&(t=1),Number.isNaN(i)&&(i=1),Number.isNaN(s)&&(s=1),[e,t,i,s]}}return null}t.exports=function(t,n,s,o){let a=[],u=[],l=[];function c(e,t){if("coordinates"===e.type){let t=parseFloat(r(e.objects,"x")),n=parseFloat(r(e.objects,"y")),i=parseFloat(r(e.objects,"z"));a.push([t,n,i])}}function h(e,t){"vertex"===e.type&&e.objects.map(c)}function p(e,t){if("triangle"===e.type){let t=parseInt(r(e.objects,"v1")),n=parseInt(r(e.objects,"v2")),s=parseInt(r(e.objects,"v3"));u.push([t,n,s]);let o=i(e.objects);o?l.push(o):l.push(f)}}let f=null;function d(e,t){switch(e.type){case"vertices":e.objects.map(h,s);break;case"volume":f=i(e.objects),e.materialid&&(f=function(e,t){let n=function(e,t){let n=null;if(n&&n.id===t)return n;for(let r=0;r<e.length;r++)if(e[r].id&&e[r].id===t)return n=e[r],n;return null}(e,void 0);return n?i(n.objects):null}(e.materialid)),e.objects.map(p,s)}}function m(e,t){"mesh"===e.type&&e.objects.map(d,s)}if(!0===o.csg){const{CSG:n}=e("@jscad/csg"),r=o.amf.scale,i=1!==r?([e,t,i])=>new n.Vertex(new n.Vector3D(e*r,t*r,i*r)):([e,t,r])=>new n.Vertex(new n.Vector3D(e,t,r)),c=e=>new n.Polygon(e);t.objects.map(m,s);let h=[],p=u.length,f=a.length;for(let e=0;e<p;e++){let t=[];for(let n=0;n<u[e].length;n++)u[e][n]<0||u[e][n]>=f||t.push(i(a[u[e][n]]));const n=l[e]?l[e]:void 0,r=n?c(t).setColor([n[0],n[1],n[2],n[3]]):c(t);h.push(r)}return n.fromPolygons(h)}let g="";if(t.objects.length>0){t.objects.map(m,s);let e=u.length,n=a.length;g+=`// Object ${t.id}\n//  faces   : ${e}\n//  vertices: ${n}\nfunction createObject${t.id}() {\n  let polys = [];\n`;for(let t=0;t<e;t++){g+="  polys.push(\n",g+="    PP([\n";for(let e=0;e<u[t].length;e++)u[t][e]<0||u[t][e]>=n||(e&&(g+=",\n"),g+="      VV("+a[u[t][e]]+")");if(g+="])",l[t]){let e=l[t];g+=".setColor(["+e[0]+","+e[1]+","+e[2]+","+e[3]+"])"}g+=");\n"}g+="  return CSG.fromPolygons(polys);\n",g+="}\n"}return g}},{"@jscad/csg":22}],6:[function(e,t,n){const r=e("sax"),{amfMesh:i,amfVertices:s,amfCoordinates:o,amfX:a,amfY:u,amfZ:l,amfNormal:c,amfVolume:h,amfTriangle:p,amfV1:f,amfV2:d,amfV3:m,amfVertex:g,amfEdge:y,amfMetadata:v,amfMaterial:x,amfColor:b,amfR:w,amfG:D,amfB:E,amfA:C,amfMap:S,amfU1:A,amfU2:T,amfU3:k}=e("./helpers"),{inchMM:_}=e("./constants");let F=null,P=0,M=[],I=[],N=[],B=[],O=null;function L(e){let t={type:"amf",unit:"mm",scale:1};switch("UNIT"in e&&(t.unit=e.UNIT.toLowerCase()),t.unit.toLowerCase()){case"inch":t.scale=_;break;case"foot":t.scale=12*_;break;case"meter":t.scale=1e3;break;case"micron":t.scale=.001}return t.objects=[],t}t.exports=(e,t)=>(function(e,t){const n=r.parser(!1,{trim:!0,lowercase:!1,position:!0});n.onerror=function(e){console.log("error: line "+e.line+", column "+e.column+", bad character ["+e.c+"]")},n.onopentag=function(e){const t={AMF:L,OBJECT:e=>{const t=function(e){let t={type:"object",id:"JSCAD"+M.length};return"ID"in e&&(t.id=e.ID),t.objects=[],t}(e);return 0===P&&(P=1),t},MESH:i,VERTICES:s,VERTEX:g,EDGE:y,VOLUME:h,MATERIAL:e=>{const t=x(e);return 0===P&&(P=2),t},TEXTURE:e=>{0===P&&(P=3)},CONSTELLATION:e=>{0===P&&(P=4)},METADATA:e=>{const t=v(e);return 0===P&&(P=5),t},COORDINATES:o,NORMAL:c,NX:a,X:a,NY:u,Y:u,NZ:l,Z:l,TRIANGLE:p,V1:f,VTEX1:f,V2:d,VTEX2:d,V3:m,VTEX3:m,COLOR:b,R:w,G:D,B:E,A:C,MAP:S,TEXMAP:S,U1:A,UTEX1:A,WTEX1:A,U2:T,UTEX2:T,WTEX2:T,U3:k,UTEX3:k,WTEX3:k,COMPOSITE:()=>{},undefined:()=>console.log("Warning: Unsupported AMF element: "+e.name)};let n=t[e.name]?t[e.name](e.attributes,{amfObjects:M}):null;if(null!==n){switch(P){case 0:"objects"in n&&M.push(n);break;case 1:if(M.length>0){let e=M.pop();"objects"in e&&e.objects.push(n),M.push(e),"objects"in n&&M.push(n)}break;case 2:if("material"===n.type)I.push(n);else if(I.length>0){let e=I.pop();"objects"in e&&e.objects.push(n),I.push(e),"objects"in n&&I.push(n)}break;case 3:case 4:case 5:break;default:console.log("ERROR: invalid AMF definition")}F=n}},n.onclosetag=function(e){switch(e){case"AMF":case"OBJECT":case"MESH":case"VERTICES":case"VERTEX":case"EDGE":case"COORDINATES":case"NORMAL":case"VOLUME":case"TRIANGLE":case"MATERIAL":case"COLOR":case"MAP":case"TEXMAP":break;case"TEXTURE":return void(3===P&&(P=0));case"CONSTELLATION":return void(4===P&&(P=0));case"METADATA":return void(5===P&&(P=0));default:return}let t=null;switch(P){case 0:case 1:M.length>0&&(t=M.pop(),"object"===t.type&&(P=0)),0===M.length&&(O=t);break;case 2:I.length>0&&(t=I.pop(),"material"===t.type&&(I.push(t),P=0));break;case 3:case 4:case 5:P=0}},n.ontext=function(e){null!==e&&F&&0!==P&&(F.value=e)},n.onend=function(){},n.write(e).close()}(e),{amfObj:O,amfMaterials:I,amfTextures:N,amfConstels:B})},{"./constants":1,"./helpers":3,sax:217}],7:[function(e,t,n){const r=e("./objectBuilder"),i=e("./parse");t.exports=function(t,n,s){s&&s.statusCallback&&s.statusCallback({progress:0}),n=n||"amf";const o={pxPmm:e("./constants").pxPmm,version:"0.0.0",addMetaData:!0};s=Object.assign({},o,s);const{version:a,pxPmm:u,addMetaData:l}=s,{amfObj:c,amfMaterials:h,amfTextures:p,amfConstels:f}=i(t,u);let d=l?`//\n  // producer: OpenJSCAD.org ${a} AMF deserializer\n  // date: ${new Date}\n  // source: ${n}\n  //\n  `:"";if(!c)throw new Error("AMF parsing failed, no valid AMF data retrieved");s&&s.statusCallback&&s.statusCallback({progress:50});const m=function(e,t){if("amf"!==e.type||!e.objects)throw new Error("AMF malformed");let n="",i=e.objects,s=t.amfMaterials;n=`// Objects  : ${i.length}\n// Materials: ${s.length}\n\n// helper functions\n`,1!==e.scale?(n+="let SCALE = "+e.scale+"; // scaling units ("+e.unit+")\n",n+="let VV = function(x,y,z) { return new CSG.Vertex(new CSG.Vector3D(x*SCALE,y*SCALE,z*SCALE)); };\n"):n+="let VV = function(x,y,z) { return new CSG.Vertex(new CSG.Vector3D(x,y,z)); };\n",n+="let PP = function(a) { return new CSG.Polygon(a); };\n\nfunction main() {\n  let csgs = [];\n";for(let e=0;e<i.length;e++){let t=i[e];"object"===t.type&&(n+="  csgs.push(createObject"+t.id+"());\n")}return n+="  return union(csgs);\n}\n\n",i.map((function(e,i){switch(e.type){case"object":n+=r(e,i,t,{csg:!1});break;case"metadata":case"material":break;default:console.log("Warning: unknown definition: "+e.type)}}),t),n}(c,{amfMaterials:h,amfTextures:p,amfConstels:f});return d+=m,s&&s.statusCallback&&s.statusCallback({progress:100}),d}},{"./constants":1,"./objectBuilder":5,"./parse":6}],8:[function(e,t,n){const{ensureManifoldness:r}=e("@jscad/io-utils");t.exports={serialize:function(e,t,n){n&&n.statusCallback&&n.statusCallback({progress:0}),e=r(e);var i='<?xml version="1.0" encoding="UTF-8"?>\n<amf'+(t&&t.unit?' unit="+m.unit"':"")+">\n";for(var s in t)i+='<metadata type="'+s+'">'+t[s]+"</metadata>\n";i+='<object id="0">\n<mesh>\n<vertices>\n',e.polygons.map((function(e){for(var t=0;t<e.vertices.length;t++)i+="<vertex><coordinates><x>"+(n=e.vertices[t].pos)._x+"</x><y>"+n._y+"</y><z>"+n._z+"</z></coordinates></vertex>\n";var n})),i+="</vertices>\n";var o=0;return e.polygons.map((function(t,r){if(i+="<volume>\n",!(t.vertices.length<3)){var s=null;for(t.shared&&t.shared.color?s=t.shared.color:t.color&&(s=t.color),null!=s&&(s.length<4&&s.push(1),i+="<color><r>"+s[0]+"</r><g>"+s[1]+"</g><b>"+s[2]+"</b><a>"+s[3]+"</a></color>"),r=0;r<t.vertices.length-2;r++)i+="<triangle>",i+="<v1>"+o+"</v1>",i+="<v2>"+(o+r+1)+"</v2>",i+="<v3>"+(o+r+2)+"</v3>",i+="</triangle>\n";o+=t.vertices.length,i+="</volume>\n",n&&n.statusCallback&&n.statusCallback({progress:100*r/e.polygons.length})}})),i+="</mesh>\n</object>\n",i+="</amf>\n",n&&n.statusCallback&&n.statusCallback({progress:100}),[i]},mimeType:"application/amf+xml"}},{"@jscad/io-utils":92}],9:[function(e,t,n){const r=e("webworkify"),{CAG:i,CSG:s}=e("@jscad/csg"),o=e("@jscad/csg/api"),a=e("../code-loading/jscad-function"),{replaceIncludes:u}=e("../code-loading/replaceIncludes"),{resolveIncludesHttp:l}=e("../code-loading/resolveIncludesHttp"),{toArray:c}=e("../utils/arrays");t.exports={rebuildSolids:function(e,t,n,r,i){let s=t;s.lastIndexOf("/")>=0&&(s=s.substring(0,s.lastIndexOf("/")+1));const h={implicitGlobals:!0,memFs:void 0,includeResolver:l};return i=Object.assign({},h,i),u(e,s,"",{includeResolver:i.includeResolver,memFs:i.memFs}).then((function({source:e}){const t=i.implicitGlobals?i.globals?i.globals:{oscad:o}:{},s=a(e,t),u=e=>e;try{let e=s(n,u,t);if(e=c(e),0===e.length)throw new Error("The JSCAD script must return one or more CSG or CAG solids.");r(void 0,e)}catch(e){r(e,void 0)}})).catch((e=>r(e,void 0))),{cancel:()=>{console.log("cannot stop work in main thread, sorry")}}},rebuildSolidsInWorker:function(t,n,o,a,c){if(!o)throw new Error("JSCAD: missing 'parameters'");if(!window.Worker)throw new Error("Worker threads are unsupported.");const h={implicitGlobals:!0,memFs:void 0,includeResolver:l};c=Object.assign({},h,c);let p,f=n;return f.lastIndexOf("/")>=0&&(f=f.substring(0,f.lastIndexOf("/")+1)),u(t,f,"",{includeResolver:c.includeResolver,memFs:c.memFs}).then((function({source:t}){p=r(e("../code-loading/jscad-worker.js"));const u={implicitGlobals:c.implicitGlobals};p.onmessage=function(e){if(e.data instanceof Object){const t=e.data.objects.map((function(e){return"CSG"===e.class?s.fromCompactBinary(e):"CAG"===e.class?i.fromCompactBinary(e):void 0}));a(void 0,t)}},p.onerror=function(e){a(`Error in line ${e.lineno} : ${e.message}`,void 0)},p.postMessage({cmd:"render",fullurl:n,source:t,parameters:o,options:u})})).catch((e=>a(e,void 0))),{cancel:()=>{p&&p.terminate()}}}}},{"../code-loading/jscad-function":10,"../code-loading/jscad-worker.js":11,"../code-loading/replaceIncludes":12,"../code-loading/resolveIncludesHttp":13,"../utils/arrays":19,"@jscad/csg":22,"@jscad/csg/api":21,webworkify:225}],10:[function(e,t,n){t.exports=function(e,t){let n="";return Object.keys(t).forEach((function(e){const r=t[e];Object.keys(r).forEach((function(t){const i=r[t];Object.keys(i).forEach((function(r){n+=`const ${r} = globals['${e}']['${t}']['${r}']\n`}))}))})),new Function("params","include","globals",`// SYNC WORKER\n    ${n}\n\n    //user defined script(s)\n    ${e}\n\n    if (typeof (main) !== 'function') {\n      throw new Error('The JSCAD script must contain a function main() which returns one or more CSG or CAG solids.')\n    }\n\n    return main(params)\n  `)}},{}],11:[function(e,t,n){const{isCSG:r,isCAG:i}=e("@jscad/csg"),s=e("@jscad/csg/api"),o=e("./jscad-function"),{toArray:a}=e("../utils/arrays");t.exports=function(e){e.onmessage=function(t){if(t.data instanceof Object&&"render"===t.data.cmd){const{source:n,parameters:u,options:l}=t.data,c=e=>e,h=l.implicitGlobals?{oscad:s}:{};let p=o(n,h)(u,c,h);if(p=a(p).map((function(e){if(r(e)||i(e))return e.toCompactBinary()})),0===p.length)throw new Error("The JSCAD script must return one or more CSG or CAG solids.");e.postMessage({cmd:"rendered",objects:p})}}}},{"../utils/arrays":19,"./jscad-function":10,"@jscad/csg":22,"@jscad/csg/api":21}],12:[function(e,t,n){const r=e("esprima"),i=e("estraverse");function s(e){return"CallExpression"===e.type&&e.callee&&e.callee.name&&"include"===e.callee.name}e("astring"),t.exports={replaceIncludes:function e(t,n,o,{memFs:a,includeResolver:u}){return new Promise((function(l,c){const h=function(e,t){let n;t=Object.assign({},{loc:!0,range:!0,tolerant:!0},t);try{n=r.parse(e,t)}catch(e){console.error("failed to generate ast:",e),n={}}return n}(t),p=function(e){let t=[];return i.traverse(e,{enter:function(e,n){if(s(e)){if(e.arguments&&arguments.length>0){const n=e.arguments[0],{raw:r,value:i}=n;t.push({raw:r,value:i})}return i.VisitorOption.Skip}}}),t}(h).map((e=>e.value)),f=p.map((function(t,r){return u(n,t,a).then((r=>e(r,n,`${o}/${t}`,{memFs:a,includeResolver:u}))).then((e=>(e.moduleCache[t]=e.source,e)))}));Promise.all(f).then((function(e){let n=t;const r=e.reduce(((e,t)=>(Object.keys(t.moduleCache).forEach((n=>{e[n]=t.moduleCache[n]})),e)),{});""===o&&(n=`globals['includedFiles'] || (globals['includedFiles'] = {})\nglobals['includesSource'] || (globals['includesSource'] = {})\nif (!globals['originalIncludeFunction']) {\n  globals['originalIncludeFunction'] = include\n  include = function(file) {\n    if (!globals['includedFiles'][file]) {\n      globals['includesSource'][file]()\n      globals['includedFiles'][file] = true\n    }\n  }\n}\n${Object.keys(r).map((function(e){return`globals['includesSource']['${e}'] = function() {${r[e]}}`})).join("\n")}\n${n}\n`),l({source:n,moduleCache:r})})).catch(c)}))}}},{astring:114,esprima:120,estraverse:121}],13:[function(e,t,n){t.exports={resolveIncludesHttp:function(e,t,n){return new Promise((function(r,i){if("object"==typeof n)for(var s in n)if(n[s].fullpath===t||"./"+n[s].fullpath===t||n[s].name===t)return void r(n[s].source);const o=new XMLHttpRequest;let a=e+t;t.match(/^(https:|http:)/i)&&(a=t),o.open("GET",a,!0),o.onload=function(e){const t=""+e.currentTarget.status;t.length>0&&"2"===t[0]?r(this.responseText):i(this.responseText)},o.onerror=e=>{i(e)},o.send()}))}}},{}],14:[function(e,t,n){const{makeBlob:r}=e("@jscad/io"),i=r();t.exports={convertToBlob:function(e){const{data:t,mimeType:n}=e;return new i(t,{type:n})}}},{"@jscad/io":94}],15:[function(e,t,n){const{isCSG:r,isCAG:i}=e("@jscad/csg"),s={stl:{displayName:"STL (Binary)",description:"STereoLithography, Binary",extension:"stl",mimetype:"application/sla",convertCSG:!0,convertCAG:!1},stla:{displayName:"STL (ASCII)",description:"STereoLithography, ASCII",extension:"stl",mimetype:"application/sla",convertCSG:!0,convertCAG:!1},stlb:{displayName:"STL (Binary)",description:"STereoLithography, Binary",extension:"stl",mimetype:"application/sla",convertCSG:!0,convertCAG:!1},amf:{displayName:"AMF (experimental)",description:"Additive Manufacturing File Format",extension:"amf",mimetype:"application/amf+xml",convertCSG:!0,convertCAG:!1},x3d:{displayName:"X3D",description:"X3D File Format",extension:"x3d",mimetype:"model/x3d+xml",convertCSG:!0,convertCAG:!1},dxf:{displayName:"DXF",description:"AutoCAD Drawing Exchange Format",extension:"dxf",mimetype:"application/dxf",convertCSG:!0,convertCAG:!0},jscad:{displayName:"JSCAD",description:"OpenJSCAD.org Source",extension:"jscad",mimetype:"application/javascript",convertCSG:!0,convertCAG:!0},js:{displayName:"js",description:"JavaScript Source",extension:"js",mimetype:"application/javascript",convertCSG:!0,convertCAG:!0},svg:{displayName:"SVG",description:"Scalable Vector Graphics Format",extension:"svg",mimetype:"image/svg+xml",convertCSG:!1,convertCAG:!0},gcode:{displayName:"gcode",description:"G Programming Language File Format"},json:{displayName:"json",description:"JavaScript Object Notation Format"}};t.exports={formats:s,conversionFormats:["amf","gcode","js","jscad","obj","scad","stl","dxf","svg"],supportedFormatsForObjects:function(e){let t=[],n=!1,o=!1;for(let t=0;t<e.length;t++)r(e[t])&&(n=!0),i(e[t])&&(o=!0);for(let e in s)(n&&!0===s[e].convertCSG||o&&!0===s[e].convertCAG)&&(t[t.length]=e);return t}}},{"@jscad/csg":22}],16:[function(e,t,n){const{formats:r}=e("./formats"),{mergeSolids2:i}=e("../utils/mergeSolids"),{stlSerializer:s}=e("@jscad/io"),{amfSerializer:o}=e("@jscad/io"),{x3dSerializer:a}=e("@jscad/io"),{svgSerializer:u}=e("@jscad/io"),{jsonSerializer:l}=e("@jscad/io"),{dxfSerializer:c}=e("@jscad/io");t.exports={prepareOutput:function(e,t){const{format:n,version:h="0.0.0"}=t;let p;if("jscad"===n||"js"===n)p=e;else{const t=r[n];p=i(e,t)}const f={producer:"OpenJSCAD.org "+h,date:new Date,version:h},d={amf:o,stl:s,stla:{mimeType:s.mimeType,serialize:e=>s.serialize(e,{binary:!1})},stlb:s,dxf:c,svg:u,x3d:a,json:l,js:{mimeType:r.js.mimetype,serialize:e=>[e]},jscad:{mimeType:r.jscad.mimetype,serialize:e=>[e]},undefined:()=>{throw new Error("Not supported : only jscad, stl, amf, dxf, svg or json as output format")}};return{data:d[n].serialize(p,f),mimeType:d[n].mimeType}}}},{"../utils/mergeSolids":20,"./formats":15,"@jscad/io":94}],17:[function(e,t,n){t.exports=function(e){var t=!0;e+="\nfunction include() {}";try{new Function(e)()}catch(e){throw t=!1,e}var n=[];if(t){var r="if(typeof(getParameterDefinitions) == 'function') {return getParameterDefinitions();} else {return [];} ";if("object"!=typeof(n=new Function(r+=e)())||"number"!=typeof n.length)throw new Error("The getParameterDefinitions() function should return an array with the parameter definitions")}return n}},{}],18:[function(e,t,n){t.exports=function(e,t,n){let r,i={};for(var s=0;s<e.length;s++){const t=e[s];switch(t.paramType){case"choice":r=t.options[t.selectedIndex].value;break;case"float":case"number":if(r=t.value,isNaN(parseFloat(r))||!isFinite(r))throw new Error("Parameter ("+t.paramName+") is not a valid number ("+r+")");r=parseFloat(r);break;case"int":if(r=t.value,isNaN(parseFloat(r))||!isFinite(r))throw new Error("Parameter ("+t.paramName+") is not a valid number ("+r+")");r=parseInt(r);break;case"checkbox":r=t.checked;break;case"radio":if(!t.checked)continue;r=t.value;break;default:r=t.value}if(n){if("initial"in t&&t.initial===r)continue;if("default"in t&&t.default===r)continue}i[t.paramName]=r}return i}},{}],19:[function(e,t,n){t.exports={toArray:function(e){return e?e.constructor!==Array?[e]:e:[]}}},{}],20:[function(e,t,n){const{CSG:r,CAG:i,isCSG:s,isCAG:o}=e("@jscad/csg"),{toArray:a}=e("./arrays");t.exports={mergeSolids:function(e,t){if(void 0===e.length){if(!o(e)&&!s(e))throw new Error("Cannot convert object ("+typeof e+") to solid");e=[e]}for(var n=null,r=0;r<e.length;r++){let t=e[r];o(t)&&(t=t.extrude({offset:[0,0,.1]})),n=null!==n?n.unionForNonIntersecting(t):t}return n},mergeSolids2:function(e,t){const{convertCSG:n,convertCAG:u}=t;let l;e=a(e);let c=!1,h=!1;for(let t=0;t<e.length;t++)s(e[t])&&(c=!0),o(e[t])&&(h=!0);c=c&&n,h=h&&u,c&&h&&(h=!1),l=c?new r:new i;for(let t=0;t<e.length;t++)!0===c&&o(e[t])?l=l.union(e[t].extrude({offset:[0,0,.1]})):!0===h&&s(e[t])||(l=l.union(e[t]));return l}}},{"./arrays":19,"@jscad/csg":22}],21:[function(e,t,n){const r=e("./src/api/index");t.exports=r},{"./src/api/index":29}],22:[function(e,t,n){const{addTransformationMethodsToPrototype:r,addCenteringToPrototype:i}=e("./src/core/mutators");let s=e("./src/core/CSG"),o=e("./src/core/CAG");const{_CSGDEBUG:a,defaultResolution2D:u,defaultResolution3D:l,EPS:c,angleEPS:h,areaEPS:p,all:f,top:d,bottom:m,left:g,right:y,front:v,back:x,staticTag:b,getTag:w}=e("./src/core/constants");s._CSGDEBUG=a,s.defaultResolution2D=u,s.defaultResolution3D=l,s.EPS=c,s.angleEPS=h,s.areaEPS=p,s.all=f,s.top=d,s.bottom=m,s.left=g,s.right=y,s.front=v,s.back=x,s.staticTag=b,s.getTag=w,s.Vector2D=e("./src/core/math/Vector2"),s.Vector3D=e("./src/core/math/Vector3"),s.Vertex=e("./src/core/math/Vertex3"),o.Vertex=e("./src/core/math/Vertex2"),s.Plane=e("./src/core/math/Plane"),s.Polygon=e("./src/core/math/Polygon3"),s.Polygon2D=e("./src/core/math/Polygon2"),s.Line2D=e("./src/core/math/Line2"),s.Line3D=e("./src/core/math/Line3"),s.Path2D=e("./src/core/math/Path2"),s.OrthoNormalBasis=e("./src/core/math/OrthoNormalBasis"),s.Matrix4x4=e("./src/core/math/Matrix4"),o.Side=e("./src/core/math/Side"),s.Connector=e("./src/core/connectors").Connector,s.ConnectorList=e("./src/core/connectors").ConnectorList,s.Properties=e("./src/core/Properties");const{circle:D,ellipse:E,rectangle:C,roundedRectangle:S}=e("./src/api/primitives2d"),{sphere:A,cube:T,roundedCube:k,cylinder:_,roundedCylinder:F,cylinderElliptic:P,polyhedron:M}=e("./src/api/primitives3d");s.sphere=A,s.cube=T,s.roundedCube=k,s.cylinder=_,s.roundedCylinder=F,s.cylinderElliptic=P,s.polyhedron=M,o.circle=D,o.ellipse=E,o.rectangle=C,o.roundedRectangle=S;const{fromPolygons:I,fromCompactBinary:N,fromObject:B,fromSlices:O}=e("./src/core/CSGFactories");s.fromCompactBinary=N,s.fromObject=B,s.fromSlices=O,s.fromPolygons=I,s.toPointCloud=e("./src/api/debugHelpers").toPointCloud;const L=e("./src/core/CAGFactories");o.fromSides=L.fromSides,o.fromObject=L.fromObject,o.fromPoints=L.fromPoints,o.fromPointsNoCheck=L.fromPointsNoCheck,o.fromPath2=L.fromPath2,o.fromFakeCSG=L.fromFakeCSG,o.fromCompactBinary=L.fromCompactBinary;const R=e("./src/api/optionParsers");r(s.prototype),r(s.Vector2D.prototype),r(s.Vector3D.prototype),r(s.Vertex.prototype),r(s.Plane.prototype),r(s.Polygon.prototype),r(s.Line2D.prototype),r(s.Line3D.prototype),r(s.Path2D.prototype),r(s.OrthoNormalBasis.prototype),r(s.Connector.prototype),r(o.prototype),r(o.Side.prototype),r(o.Vertex.prototype),s.parseOptionAs2DVector=R.parseOptionAs3DVector,s.parseOptionAs3DVector=R.parseOptionAs3DVector,s.parseOptionAs3DVectorList=R.parseOptionAs3DVectorList,s.parseOptionAsBool=R.parseOptionAsBool,s.parseOptionAsFloat=R.parseOptionAsFloat,s.parseOptionAsInt=R.parseOptionAsInt,s.Polygon2D.prototype=o.prototype;const{isCAG:j,isCSG:z}=e("./src/core/utils"),U=Object.assign({},{CSG:s,CAG:o},R,{isCAG:j,isCSG:z});t.exports=U},{"./src/api/debugHelpers":27,"./src/api/optionParsers":38,"./src/api/primitives2d":40,"./src/api/primitives3d":42,"./src/core/CAG":45,"./src/core/CAGFactories":46,"./src/core/CSG":47,"./src/core/CSGFactories":48,"./src/core/Properties":52,"./src/core/connectors":53,"./src/core/constants":54,"./src/core/math/Line2":55,"./src/core/math/Line3":56,"./src/core/math/Matrix4":57,"./src/core/math/OrthoNormalBasis":58,"./src/core/math/Path2":59,"./src/core/math/Plane":60,"./src/core/math/Polygon2":61,"./src/core/math/Polygon3":62,"./src/core/math/Side":63,"./src/core/math/Vector2":64,"./src/core/math/Vector3":65,"./src/core/math/Vertex2":66,"./src/core/math/Vertex3":67,"./src/core/mutators":70,"./src/core/utils":72}],23:[function(e,t,n){const r=e("../core/math/Path2");t.exports=function(e){let t=e.canonicalized(),n={},i={};t.sides.map((function(e){let t=e.getTag();n[t]=e;let r=e.vertex0.getTag();r in i||(i[r]=[]),i[r].push(t)}));let s=[];for(;;){let e=null;for(let t in i){let n=i[t];e=n[0],n.splice(0,1),0===n.length&&delete i[t];break}if(null===e)break;let t=[],o=n[e],a=o.vertex0.getTag();for(;;){t.push(o.vertex0.pos);let e=o.vertex1.getTag();if(e===a)break;if(!(e in i))throw new Error("Area is not closed!");let r=i[e],s=-1;if(1===r.length)s=0;else{let e=null,t=o.direction().angleDegrees();for(let i=0;i<r.length;i++){let o=r[i],a=n[o].direction().angleDegrees()-t;a<-180&&(a+=360),a>=180&&(a-=360),(s<0||a>e)&&(s=i,e=a)}}let u=r[s];r.splice(s,1),0===r.length&&delete i[e],o=n[u]}t.length>0&&t.push(t.shift());let u=new r(t,!0);s.push(u)}return s}},{"../core/math/Path2":59}],24:[function(e,t,n){const r=e("../core/utils/toArray");t.exports=function(e,t){e=Object.assign({},{axes:[!0,!0,!0],center:[0,0,0]},e);const{axes:n,center:i}=e,s=(t=r(t)).map((function(e){let t=e.getBounds(),r=[0,0,0];return n[0]&&(r[0]=i[0]-(t[0].x+(t[1].x-t[0].x)/2)),n[1]&&(r[1]=i[1]-(t[0].y+(t[1].y-t[0].y)/2)),n[2]&&(r[2]=i[2]-(t[0].z+(t[1].y-t[0].y)/2)),e.translate(r)}));return 1===s.length?s[0]:s}},{"../core/utils/toArray":80}],25:[function(e,t,n){const r={black:[0,0,0],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[1,1,1],maroon:[128/255,0,0],red:[1,0,0],purple:[128/255,0,128/255],fuchsia:[1,0,1],green:[0,128/255,0],lime:[0,1,0],olive:[128/255,128/255,0],yellow:[1,1,0],navy:[0,0,128/255],blue:[0,0,1],teal:[0,128/255,128/255],aqua:[0,1,1],aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],blanchedalmond:[1,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]};function i(e){return r[e.toLowerCase()]}function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}t.exports={css2rgb:i,color:function(e){let t,n=1,r=arguments;for("string"==typeof e&&(e=i(e)),Number.isFinite(r[n])&&(e=e.concat(r[n]),n++),Array.isArray(r[n])&&(r=r[n],n=0),t=r[n++];n<r.length;n++)t=t.union(r[n]);return t.setColor(e)},rgb2hsl:function(e,t,n){e.length&&(n=e[2],t=e[1],e=e[0]);let r,i,s=Math.max(e,t,n),o=Math.min(e,t,n),a=(s+o)/2;if(s===o)r=i=0;else{let u=s-o;switch(i=a>.5?u/(2-s-o):u/(s+o),s){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return[r,i,a]},hsl2rgb:function(e,t,n){let r,i,o;if(e.length&&(t=(e=e[0])[1],n=e[2]),0===t)r=i=o=n;else{let a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=s(u,a,e+1/3),i=s(u,a,e),o=s(u,a,e-1/3)}return[r,i,o]},rgb2hsv:function(e,t,n){e.length&&(t=(e=e[0])[1],n=e[2]);let r,i,s=Math.max(e,t,n),o=Math.min(e,t,n),a=s,u=s-o;if(i=0===s?0:u/s,s===o)r=0;else{switch(s){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return[r,i,a]},hsv2rgb:function(e,t,n){let r,i,s;e.length&&(t=(e=e[0])[1],n=e[2]);let o=Math.floor(6*e),a=6*e-o,u=n*(1-t),l=n*(1-a*t),c=n*(1-(1-a)*t);switch(o%6){case 0:r=n,i=c,s=u;break;case 1:r=l,i=n,s=u;break;case 2:r=u,i=n,s=c;break;case 3:r=u,i=l,s=n;break;case 4:r=c,i=u,s=n;break;case 5:r=n,i=u,s=l}return[r,i,s]},html2rgb:function(e){let t=0,n=0,r=0;return 7===e.length&&(t=parseInt("0x"+e.slice(1,3))/255,n=parseInt("0x"+e.slice(3,5))/255,r=parseInt("0x"+e.slice(5,7))/255),[t,n,r]},rgb2html:function(e,t,n){return e.length&&(t=(e=e[0])[1],n=e[2]),"#"+Number(16777216+255*e*65536+255*t*256+255*n).toString(16).substring(1,7)}}},{}],26:[function(e,t,n){t.exports={echo:function(){console.warn("echo() will be deprecated in the near future: please use console.log/warn/error instead");for(var e="",t=arguments,n=0;n<t.length;n++)n&&(e+=", "),e+=t[n];console.log(e)}}},{}],27:[function(e,t,n){const r=e("../core/CSG"),{cube:i}=e("./primitives3d");t.exports={toPointCloud:function(e,t){e=e.reTesselated();let n=new r,s={};e.polygons.map((function(e){e.vertices.map((function(e){s[e.getTag()]=e.pos}))}));for(let e in s){let r=s[e],o=i({center:r,radius:t});n=n.unionSub(o,!1,!1)}return n=n.reTesselated(),n}}},{"../core/CSG":47,"./primitives3d":42}],28:[function(e,t,n){const r=e("../core/math/Vertex3"),i=e("../core/math/Vector3"),s=e("../core/math/Polygon3");t.exports={cagToPointsArray:e=>{let t;return"sides"in e?(t=[],e.sides.forEach((e=>{t.push([e.vertex0.pos.x,e.vertex0.pos.y]),t.push([e.vertex1.pos.x,e.vertex1.pos.y])}))):"points"in e&&(t=e.points.map((e=>[e.x,e.y]))),t},clamp:function(e,t,n){return Math.min(Math.max(e,t),n)},rightMultiply1x3VectorToArray:(e,t)=>{const[n,r,i]=t;let s=n*e.elements[0]+r*e.elements[1]+i*e.elements[2]+1*e.elements[3],o=n*e.elements[4]+r*e.elements[5]+i*e.elements[6]+1*e.elements[7],a=n*e.elements[8]+r*e.elements[9]+i*e.elements[10]+1*e.elements[11],u=n*e.elements[12]+r*e.elements[13]+i*e.elements[14]+1*e.elements[15];if(1!==u){const e=1/u;s*=e,o*=e,a*=e}return[s,o,a]},polygonFromPoints:e=>{const t=e.map((e=>new r(new i(e))));return new s(t)}}},{"../core/math/Polygon3":62,"../core/math/Vector3":65,"../core/math/Vertex3":67}],29:[function(e,t,n){const r=e("./primitives3d-api"),i=e("./primitives2d-api"),s=e("./ops-booleans"),o=e("./ops-transformations"),a=e("./ops-extrusions"),u=e("./color"),l=e("./maths"),c=e("./text"),{echo:h}=e("./debug"),{CAG:p,CSG:f}=e("../../csg"),{log:d}=e("./log"),m={csg:{CAG:p,CSG:f},primitives2d:i,primitives3d:r,booleanOps:s,transformations:o,extrusions:a,color:u,maths:l,text:c,OpenJsCad:{OpenJsCad:{log:d}},debug:{echo:h}};t.exports=m},{"../../csg":22,"./color":25,"./debug":26,"./log":30,"./maths":31,"./ops-booleans":32,"./ops-extrusions":36,"./ops-transformations":37,"./primitives2d-api":39,"./primitives3d-api":41,"./text":44}],30:[function(e,t,n){function r(e){console.warn("log() will be deprecated in the near future: please use console.log/warn/error instead");var t,n=Date.now();t||(t=n);var i=n-t;if(r.prevLogTime=n,e="["+(.001*i).toFixed(3)+"] "+e,"object"==typeof console&&"function"==typeof console.log)console.log(e);else{if("object"!=typeof self||"function"!=typeof self.postMessage)throw new Error("Cannot log");self.postMessage({cmd:"log",txt:e})}}t.exports={log:r,status:function(e){r(e)}}},{}],31:[function(e,t,n){function r(e){return Math.floor(e)}function i(e){return Math.abs(e)}t.exports={sin:function(e){return Math.sin(e/360*Math.PI*2)},cos:function(e){return Math.cos(e/360*Math.PI*2)},asin:function(e){return Math.asin(e)/(2*Math.PI)*360},acos:function(e){return Math.acos(e)/(2*Math.PI)*360},tan:function(e){return Math.tan(e/360*Math.PI*2)},atan:function(e){return Math.atan(e)/(2*Math.PI)*360},atan2:function(e,t){return Math.atan2(e,t)/(2*Math.PI)*360},ceil:function(e){return Math.ceil(e)},floor:r,abs:i,min:function(e,t){return e<t?e:t},max:function(e,t){return e>t?e:t},rands:function(e,t,n,r){for(var i=new Array(n),s=0;s<n;s++)i[s]=Math.random()*(t-e)+e},log:function(e){return Math.log(e)},lookup:function(e,t){for(var n=0,r=0;r<t.length;r++){var s=t[r];if(s[0]>=e){s=t[--r];var o=t[r+1],a=0;return s[0]!==o[0]&&(a=i((e-s[0])/(o[0]-s[0]))),a>0?s[1]*(1-a)+o[1]*a:s[1]}}return n},pow:function(e,t){return Math.pow(e,t)},sign:function(e){return e<0?-1:e>1?1:0},sqrt:function(e){return Math.sqrt(e)},round:function(e){return r(e+.5)}}},{}],32:[function(e,t,n){const{isCAG:r}=e("../core/utils");t.exports={union:function(){let e={};const t={extrude2d:!1};let n,i=0,s=arguments;s[0].length&&(s=s[0]),"extrude2d"in s[0]&&(e=Object.assign({},t,s[0]),n=s[i++]),n=s[i++],"object"==typeof s[i]&&r(s[i])&&e.extrude2d&&(n=s[i].extrude({offset:[0,0,.1]}));for(;i<s.length;i++){let t=s[i];"object"==typeof s[i]&&r(s[i])&&e.extrude2d&&(t=s[i].extrude({offset:[0,0,.1]})),n=n.union(t)}return n},difference:function(){let e,t=0,n=arguments;for(n[0].length&&(n=n[0]),e=n[t++];t<n.length;t++)e=r(n[t])?e.subtract(n[t]):e.subtract(n[t].setColor(1,1,0));return e},intersection:function(){let e,t=0,n=arguments;for(n[0].length&&(n=n[0]),e=n[t++];t<n.length;t++)e=r(n[t])?e.intersect(n[t]):e.intersect(n[t].setColor(1,1,0));return e}}},{"../core/utils":72}],33:[function(e,t,n){const r=e("../core/math/Matrix4.js"),i=e("../core/math/Vector3.js"),{Connector:s}=e("../core/connectors.js"),{fromPoints:o}=e("../core/CAGFactories"),a=e("../core/math/Vector2");t.exports={lieFlat:function(e){let t=e.getTransformationToFlatLying();return e.transform(t)},getTransformationToFlatLying:function(e){return e.getTransformationAndInverseTransformationToFlatLying()[0]},getTransformationAndInverseTransformationToFlatLying:function(e){if(0===e.polygons.length){let e=new r;return[e,e]}{let t=e.canonicalized(),n={};t.polygons.map((function(e){n[e.plane.getTag()]=e.plane}));let o,a,u=new i(1,0,0),l=new i(0,1,0),c=new i(0,0,1),h=new s([0,0,0],[0,0,-1],u),p=new s([0,0,0],[0,0,-1],l),f=!0,d=0,m=0;for(let e in n){let g,y,v=n[e],x=v.normal.times(v.w);if(v.normal.cross(u).length()>v.normal.cross(l).length()){let e=new s(x,v.normal,u);g=e.getTransformationTo(h,!1,0),y=h.getTransformationTo(e,!1,0)}else{let e=new s(x,v.normal,l);g=e.getTransformationTo(p,!1,0),y=p.getTransformationTo(e,!1,0)}let b=t.transform(g),w=-v.normal.dot(c),D=b.getBounds(),E=D[1].z-D[0].z,C=f;if(C||(E<d||E===d&&w>m)&&(C=!0),C){let e=new i([-.5*(D[1].x+D[0].x),-.5*(D[1].y+D[0].y),-D[0].z]);g=g.multiply(r.translation(e)),y=r.translation(e.negated()).multiply(y),d=E,m=w,o=g,a=y}f=!1}return[o,a]}},overCutInsideCorners:function(e,t){let n=e.canonicalized(),r={};n.sides.map((function(e){e.vertex0.getTag()in r||(r[e.vertex0.getTag()]={pos:e.vertex0.pos,from:[],to:[]}),r[e.vertex0.getTag()].to.push(e.vertex1.pos),e.vertex1.getTag()in r||(r[e.vertex1.getTag()]={pos:e.vertex1.pos,from:[],to:[]}),r[e.vertex1.getTag()].from.push(e.vertex0.pos)}));let i=[];for(let e in r){let n=r[e];if(1===n.from.length&&1===n.to.length){let e=n.from[0],r=n.pos,s=n.to[0],u=r.minus(e).unit(),l=s.minus(r).unit();if(u.cross(l)<.001){let e=l.angleRadians()-u.angleRadians()+Math.PI;e<0?e+=2*Math.PI:e>=2*Math.PI&&(e-=2*Math.PI);let n=l.minus(u).unit(),s=30/180*Math.PI,c=t/Math.cos(s/2),h=r.plus(n.times(c)),p=e+n.angleRadians(),f=2*(Math.PI-e),d=2*Math.ceil(f/s/2),m=[h];for(let e=0;e<=d;e++){let t=p+e/d*f,n=a.fromAngleRadians(t).times(c).plus(h);m.push(n)}i.push(o(m))}}}return n.subtract(i)}}},{"../core/CAGFactories":46,"../core/connectors.js":53,"../core/math/Matrix4.js":57,"../core/math/Vector2":64,"../core/math/Vector3.js":65}],34:[function(e,t,n){const{EPS:r}=e("../core/constants"),i=e("../core/math/Plane"),s=e("../core/math/Vector2"),o=e("../core/math/Vertex3"),a=e("../core/math/Polygon3"),u=e("../core/math/OrthoNormalBasis");t.exports={sectionCut:function(e,t){let n=t.plane,s=t.plane.flipped();n=new i(n.normal,n.w),s=new i(s.normal,s.w+5*r);let o=e.cutByPlane(n);return o=o.cutByPlane(s),o.projectToOrthoNormalBasis(t)},cutByPlane:function(t,n){if(0===t.polygons.length)return new(e("../core/CSG"));let r=n.normal.times(n.w),i=0;t.polygons.map((function(e){e.vertices.map((function(e){let t=e.pos.distanceToSquared(r);t>i&&(i=t)}))})),i=Math.sqrt(i),i*=1.01;let l=[],c=new u(n);l.push(new o(c.to3D(new s(i,-i)))),l.push(new o(c.to3D(new s(-i,-i)))),l.push(new o(c.to3D(new s(-i,i)))),l.push(new o(c.to3D(new s(i,i))));const h=new a(l,null,n.flipped()).extrude(n.normal.times(-i));let p=t.intersect(h);return p.properties=t.properties,p}}},{"../core/CSG":47,"../core/constants":54,"../core/math/OrthoNormalBasis":58,"../core/math/Plane":60,"../core/math/Polygon3":62,"../core/math/Vector2":64,"../core/math/Vertex3":67}],35:[function(e,t,n){const{EPS:r,angleEPS:i}=e("../core/constants"),s=e("../core/math/Vertex3"),o=e("../core/math/Vector2"),a=e("../core/math/Polygon3"),{fnNumberSort:u,isCSG:l}=e("../core/utils"),{fromPoints:c,fromPointsNoCheck:h}=e("../core/CAGFactories"),p=function(t,n,s){const a=e("../core/CAG");(s=s||8)<4&&(s=4);let u=[],l={};t.canonicalized().sides.map((function(e){let t=e.vertex1.pos.minus(e.vertex0.pos),i=t.length();if(i>r){t=t.times(1/i);let r=t.normal().times(n),s=[e.vertex1.pos.plus(r),e.vertex1.pos.minus(r),e.vertex0.pos.minus(r),e.vertex0.pos.plus(r)],o=c(s);u.push(o);for(let t=0;t<2;t++){let n=0===t?e.vertex0.pos:e.vertex1.pos,r=0===t?e.vertex1.pos:e.vertex0.pos,i=n.x+" "+n.y;i in l||(l[i]=[]),l[i].push({p1:n,p2:r})}}}));for(let e in l){let t,r,a=l[e],c=a[0].p1;if(2===a.length){let e=a[0].p2,n=a[1].p2;if(t=e.minus(c).angleDegrees(),r=n.minus(c).angleDegrees(),r<t&&(r+=360),r>=t+360&&(r-=360),r<t+180){let e=r;r=t+360,t=e}t+=90,r-=90}else t=0,r=360;let p=r>t+359.999;if(p&&(t=0,r=360),r>t+i){let e=[];p||e.push(c);let i=Math.round(s*(r-t)/360);i<1&&(i=1);for(let s=0;s<=i;s++){let a=t+s/i*(r-t);s===i&&(a=r);let u=c.plus(o.fromAngleDegrees(a).times(n));(!p||s>0)&&e.push(u)}let a=h(e);u.push(a)}}let p=new a;return p=p.union(u),p},f=function(t,n,i,o){const l=e("../core/CSG"),{fromPolygons:c}=e("../core/CSGFactories");let h,p=t.reTesselated();h=o?p:new l,p.polygons.map((function(e){let t=e.plane.normal.unit().times(2*n),r=e.translate(t.times(-.5)).extrude(t);h=h.unionSub(r,!1,!1)}));let f={};p.polygons.map((function(e){let t=e.vertices.length,n=e.vertices[t-1],r=n.getTag();for(let i=0;i<t;i++){let t,s,o=e.vertices[i],a=o.getTag();t=a<r?a+"-"+r:r+"-"+a,t in f?s=f[t]:(s={v1:n,v2:o,planenormals:[]},f[t]=s),s.planenormals.push(e.plane.normal),r=a,n=o}}));for(let e in f){let t=f[e],o=t.v1.pos,l=t.v2.pos,p=l.minus(o).unit(),d=t.planenormals[0].unit(),m=d.cross(p),g=[];for(let e=0;e<i;e++)g.push(e*Math.PI*2/i);for(let e=0,n=t.planenormals.length;e<n;e++){let n=t.planenormals[e],r=m.dot(n),i=d.dot(n),s=Math.atan2(r,i);s<0&&(s+=2*Math.PI),g.push(s),s=Math.atan2(-r,-i),s<0&&(s+=2*Math.PI),g.push(s)}g=g.sort(u);let y,v,x=g.length,b=[],w=[],D=[];for(let e=-1;e<x;e++){let t=g[e<0?e+x:e],i=Math.sin(t),u=Math.cos(t),c=d.times(u*n).plus(m.times(i*n)),h=o.plus(c),p=l.plus(c),f=!1;if(e>=0&&h.distanceTo(y)<r&&(f=!0),!f){if(e>=0){b.push(new s(h)),w.push(new s(p));let e=[new s(v),new s(p),new s(h),new s(y)],t=new a(e);D.push(t)}y=h,v=p}}w.reverse(),D.push(new a(b)),D.push(new a(w));let E=c(D);h=h.unionSub(E,!1,!1)}let d={};p.polygons.map((function(e){e.vertices.map((function(t){let n,r=t.getTag();r in d?n=d[r]:(n={pos:t.pos,normals:[]},d[r]=n),n.normals.push(e.plane.normal)}))}));for(let e in d){let t=d[e],r=t.normals[0].unit(),s=null,o=0;for(let e=1;e<t.normals.length;e++){let n=t.normals[e].unit(),i=r.cross(n).length();i>.05&&i>o&&(o=i,s=n)}s||(s=r.randomNonParallelVector());let a=r.cross(s).unit(),u=a.cross(r),c=l.sphere({center:t.pos,radius:n,resolution:i,axes:[r,a,u]});h=h.unionSub(c,!1,!1)}return h};t.exports={expand:function(e,t,n){let r;return l(e)?(r=e.union(f(e,t,n)),r=r.reTesselated(),r.properties=e.properties):r=e.union(p(e,t,n)),r},contract:function(e,t,n){let r;return l(e)?(r=e.subtract(f(e,t,n)),r=r.reTesselated(),r.properties=e.properties):r=e.subtract(p(e,t,n)),r},expandedShellOfCAG:p,expandedShellOfCCSG:f}},{"../core/CAG":45,"../core/CAGFactories":46,"../core/CSG":47,"../core/CSGFactories":48,"../core/constants":54,"../core/math/Polygon3":62,"../core/math/Vector2":64,"../core/math/Vertex3":67,"../core/utils":72}],36:[function(e,t,n){const{EPS:r,defaultResolution3D:i}=e("../core/constants"),s=e("../core/math/OrthoNormalBasis"),{parseOptionAs3DVector:o,parseOptionAsBool:a,parseOptionAsFloat:u,parseOptionAsInt:l}=e("./optionParsers"),c=e("../core/math/Vector3"),h=e("../core/math/Matrix4"),p=e("../core/math/Path2"),{Connector:f}=e("../core/connectors"),{fromPolygons:d}=e("../core/CSGFactories"),{cagToPointsArray:m,clamp:g,rightMultiply1x3VectorToArray:y,polygonFromPoints:v}=e("./helpers"),{fromPoints:x}=e("../core/CAGFactories"),b=function(e,t,n,r){if(!(t instanceof s))throw new Error("extrudeInPlane: the first parameter should be a OrthoNormalBasis");let i=e.extrude({offset:[0,0,n]});a(r,"symmetrical",!1)&&(i=i.translate([0,0,-n/2]));let o=t.getInverseProjectionMatrix();return i=i.transform(o),i};t.exports={extrudeInOrthonormalBasis:b,extrudeInPlane:function(e,t,n,r,i){return b(e,s.GetCartesian(t,n),r,i)},extrude:function(t,n){const r=e("../core/CSG");if(0===t.sides.length)return new r;let s=o(n,"offset",[0,0,1]),a=u(n,"twistangle",0),h=l(n,"twiststeps",i);if(0===s.z)throw new Error("offset cannot be orthogonal to Z axis");(0===a||h<1)&&(h=1);let p=c.Create(0,1,0),m=[];m=m.concat(t._toPlanePolygons({translation:[0,0,0],normalVector:p,flipped:!(s.z<0)})),m=m.concat(t._toPlanePolygons({translation:s,normalVector:p.rotateZ(a),flipped:s.z<0}));for(let e=0;e<h;e++){let n=new f(s.times(e/h),[0,0,s.z],p.rotateZ(e*a/h)),r=new f(s.times((e+1)/h),[0,0,s.z],p.rotateZ((e+1)*a/h));m=m.concat(t._toWallPolygons({toConnector1:n,toConnector2:r}))}return d(m)},linear_extrude:function(e,t){const{height:n,twist:r,slices:i,center:s}=Object.assign({},{height:1,slices:10,twist:0,center:!1},e);let o=t.extrude({offset:[0,0,n],twistangle:r,twiststeps:i});if(!0===s){const e=o.getBounds(),t=e[1].plus(e[0]).times(-.5);o=o.translate(t)}return o},rotate_extrude:function(e,t){const n={fn:32,startAngle:0,angle:360,overflow:"cap"};e=Object.assign({},n,e);let{fn:r,startAngle:i,angle:s,overflow:o}=e;if("cap"!==o)throw new Error("only capping of overflowing points is supported !");arguments.length<2&&(t=e);const a=s>0,u=a?g(i+s,0,360):g(i+s,-360,0),l=Math.max(Math.floor(Math.abs(u)/45),1,r),c=1e-5;let p=m(t);const f=p.filter((e=>e[0]<0)),b=p.filter((e=>e[0]>=0)),w=f.length>0&&b.length>0;w&&"cap"===o&&(f.length>b.length?p=p.map((function(e){return[Math.min(e[0],0),e[1]]})):b.length>=f.length&&(p=p.map((function(e){return[Math.max(e[0],0),e[1]]}))));let D=[];for(let e=1;e<l+1;e++){for(let t=0;t<p.length-1;t++){const n=p[t],r=p[t+1];let o=h.rotationZ((e-1)/l*s+i),u=h.rotationZ(e/l*s+i);const f=y(o,[n[0],0,n[1]]),d=y(u,[n[0],0,n[1]]),m=y(o,[r[0],0,r[1]]),g=y(u,[r[0],0,r[1]]);let x=!1;Math.abs(f[0]-d[0])<c&&Math.abs(m[1]-g[1])<c&&(x=!0),a?(D.push(v([f,m,g])),x||D.push(v([g,d,f]))):(x||D.push(v([f,d,g])),D.push(v([g,m,f])))}if(Math.abs(s)<360){const e=x(p),t=h.rotationX(90).multiply(h.rotationZ(-i)),n=e._toPlanePolygons({flipped:a}).map((e=>e.transform(t))),r=h.rotationX(90).multiply(h.rotationZ(-s-i)),o=e._toPlanePolygons({flipped:!a}).map((e=>e.transform(r)));D=D.concat(n).concat(o)}}return d(D).reTesselated().canonicalized()},rotateExtrude:function(e,t){let n=u(t,"angle",360),s=l(t,"resolution",i);n=n>360?n%360:n;let o=[0,0,0],a=c.Create(0,1,0),h=[0,0,1],p=[],m=new f(o,a,h);if(n>0&&n<360){let t=new f(o,a.rotateZ(-n),h);p=p.concat(e._toPlanePolygons({toConnector:m,flipped:!0})),p=p.concat(e._toPlanePolygons({toConnector:t}))}let g,y=m,v=n/s;for(let t=v;t<=n+r;t+=v)g=new f(o,a.rotateZ(-t),h),p=p.concat(e._toWallPolygons({toConnector1:y,toConnector2:g})),y=g;return d(p).reTesselated()},rectangular_extrude:function(e,t){const{w:n,h:r,fn:i,closed:s,round:o}=Object.assign({},{w:1,h:1,fn:8,closed:!1,round:!0},t);return new p(e,s).rectangularExtrude(n,r,i,o)}}},{"../core/CAGFactories":46,"../core/CSG":47,"../core/CSGFactories":48,"../core/connectors":53,"../core/constants":54,"../core/math/Matrix4":57,"../core/math/OrthoNormalBasis":58,"../core/math/Path2":59,"../core/math/Vector3":65,"./helpers":28,"./optionParsers":38}],37:[function(e,t,n){const r=e("../core/math/Matrix4"),i=e("../core/math/Plane"),s=e("../core/math/Vector3"),{union:o}=e("./ops-booleans"),{fromPoints:a}=e("../core/CAGFactories"),{isCAG:u}=e("../core/utils");function l(){let e=[],t=arguments;t[0].length&&(t=t[0]);let n=[];for(let r=0;r<t.length;r++){let i=t[r];if(!u(i))throw new Error("ERROR: hull() accepts only 2D forms / CAG");for(let t=0;t<i.sides.length;t++){let r=i.sides[t].vertex0.pos.x,s=i.sides[t].vertex0.pos.y;n[r+","+s]||(e.push({x:r,y:s}),n[r+","+s]++)}}let r=function(e,t,n){this.index=e,this.angle=t,this.distance=n,this.compare=function(e){return this.angle<e.angle?-1:this.angle>e.angle?1:this.distance<e.distance?-1:this.distance>e.distance?1:0}},i=function(){this.points=null,this.indices=null,this.getIndices=function(){return this.indices},this.clear=function(){this.indices=null,this.points=null},this.ccw=function(e,t,n){let r=(this.points[t].x-this.points[e].x)*(this.points[n].y-this.points[e].y)-(this.points[t].y-this.points[e].y)*(this.points[n].x-this.points[e].x);return r<1e-5?0:r},this.angle=function(e,t){return Math.atan2(this.points[t].y-this.points[e].y,this.points[t].x-this.points[e].x)},this.distance=function(e,t){return(this.points[t].x-this.points[e].x)*(this.points[t].x-this.points[e].x)+(this.points[t].y-this.points[e].y)*(this.points[t].y-this.points[e].y)},this.compute=function(e){if(this.indices=null,e.length<3)return;this.points=e;let t=0;for(let e=1;e<this.points.length;e++)this.points[e].y===this.points[t].y?this.points[e].x<this.points[t].x&&(t=e):this.points[e].y<this.points[t].y&&(t=e);let n=[],i=0,s=0;for(let e=0;e<this.points.length;e++)e!==t&&(i=this.angle(t,e),i<0&&(i+=Math.PI),s=this.distance(t,e),n.push(new r(e,i,s)));n.sort((function(e,t){return e.compare(t)}));let o,a=new Array(this.points.length+1),u=2;for(let e=0;e<this.points.length;e++)e!==t&&(a[u]=n[u-2].index,u++);a[0]=a[this.points.length],a[1]=t;let l=2;for(let e=3;e<=this.points.length;e++){for(;this.ccw(a[l-1],a[l],a[e])<=0;)l--;l++,o=a[e],a[e]=a[l],a[l]=o}this.indices=new Array(l);for(let e=0;e<l;e++)this.indices[e]=a[e+1]}},s=new i;s.compute(e);let o=s.getIndices();if(o&&o.length>0){let t=[];for(let n=0;n<o.length;n++)t.push(e[o[n]]);return a(t)}}t.exports={translate:function(e,...t){const n=t.length>=1&&t[0].length?t[0]:t;let r=n[0];if(n.length>1)for(let e=1;e<n.length;e++)r=r.union(n[e]);return r.translate(e)},center:function(e,...t){const n=t.length>=1&&t[0].length?t[0]:t;let r=n[0];if(n.length>1)for(let e=1;e<n.length;e++)r=r.union(n[e]);return Array.isArray(e)||(e=[e,e,e]),r.center(e)},scale:function(e,...t){const n=t.length>=1&&t[0].length?t[0]:t;let r=n[0];if(n.length>1)for(let e=1;e<n.length;e++)r=r.union(n[e]);return r.scale(e)},rotate:function(){let e,t,n,r=1,i=arguments;for(i[0].length?(n=i[0],t=1,i[1].length&&(i=i[1],t=0)):(r=i[0],n=i[1],t=2,i[2].length&&(i=i[2],t=0)),e=i[t++];t<i.length;t++)e=e.union(i[t]);return 1!==r?e.rotate([0,0,0],n,r):e.rotateX(n[0]).rotateY(n[1]).rotateZ(n[2])},transform:function(e,...t){const n=t.length>=1&&t[0].length?t[0]:t;let i,s=n[0];if(n.length>1)for(let e=1;e<n.length;e++)s=s.union(n[e]);if(!Array.isArray(e))throw new Error("Matrix needs to be an array");return e.forEach((e=>{if(!Number.isFinite(e))throw new Error("you can only use a flat array of valid, finite numbers (float and integers)")})),i=new r(e),s.transform(i)},mirror:function(e,...t){const n=t.length>=1&&t[0].length?t[0]:t;let r=n[0];if(n.length>1)for(let e=1;e<n.length;e++)r=r.union(n[e]);const o=new i(new s(e[0],e[1],e[2]).unit(),0);return r.mirrored(o)},expand:function(e,t,n){return n.expand(e,t)},contract:function(e,t,n){return n.contract(e,t)},minkowski:function(){console.log("minkowski() not yet implemented")},hull:l,chain_hull:function(e,t){let n=arguments,r=!1,i=0;void 0!==n[i].closed&&(r=n[i++].closed),n[i].length&&(n=n[i]);let s=[],a=n.length-(r?0:1);for(let e=0;e<a;e++)s.push(l(n[e],n[(e+1)%n.length]));return o(s)}}},{"../core/CAGFactories":46,"../core/math/Matrix4":57,"../core/math/Plane":60,"../core/math/Vector3":65,"../core/utils":72,"./ops-booleans":32}],38:[function(e,t,n){const r=e("../core/math/Vector3"),i=e("../core/math/Vector2"),s=function(e,t,n){var r=n;return e&&t in e&&(r=e[t]),r};t.exports={parseOption:s,parseOptionAsInt:function(e,t,n){var r=s(e,t,n);if(r=Number(Math.floor(r)),isNaN(r))throw new Error("Parameter "+t+" should be a number");return r},parseOptionAsFloat:function(e,t,n){var r=s(e,t,n);if("string"==typeof r&&(r=Number(r)),isNaN(r)||"number"!=typeof r)throw new Error("Parameter "+t+" should be a number");return r},parseOptionAsBool:function(e,t,n){var r=s(e,t,n);return"string"==typeof r&&("true"===r?r=!0:("false"===r||0===r)&&(r=!1)),!!r},parseOptionAs3DVector:function(e,t,n){var i=s(e,t,n);return new r(i)},parseOptionAs2DVector:function(e,t,n){var r=s(e,t,n);return new i(r)},parseOptionAs3DVectorList:function(e,t,n){return s(e,t,n).map((function(e){return new r(e)}))}}},{"../core/math/Vector2":64,"../core/math/Vector3":65}],39:[function(e,t,n){const{CAG:r}=e("../../csg"),{fromPoints:i}=e("../core/CAGFactories");t.exports={circle:function(e){let{r:t,fn:n,center:i}=Object.assign({},{r:1,fn:32,center:!1},e);!e||e.r||e.fn||e.center||(t=e);let s=!0===i?[0,0]:[t,t];return r.circle({center:s,radius:t,resolution:n})},square:function(){let e,t=[1,1],n=arguments,i=n[0];return i&&Number.isFinite(i)&&(t=[i,i]),i&&i.length&&(t=n[0],i=n[1]),i&&i.size&&i.size.length&&(t=i.size),e=[t[0]/2,t[1]/2],i&&!0===i.center&&(e=[0,0]),r.rectangle({center:e,radius:[t[0]/2,t[1]/2]})},polygon:function(e){let t=[];return e.paths&&e.paths.length&&e.paths[0].length?("number"!=typeof e.points[0][0]&&(e.points=e.points.reduce(((e,t)=>e.concat(t)))),e.paths.forEach(((n,r)=>{t.push([]),n.forEach((n=>t[r].push(e.points[n])))}))):e.paths&&e.paths.length?e.paths.forEach((n=>t.push(e.points[n]))):t=e.length?e:e.points,i(t)},triangle:function(){let e=arguments;return e[0]&&e[0].length&&(e=e[0]),i(e)}}},{"../../csg":22,"../core/CAGFactories":46}],40:[function(e,t,n){e("../core/CAG");const{parseOptionAs2DVector:r,parseOptionAsFloat:i,parseOptionAsInt:s}=e("./optionParsers"),{defaultResolution2D:o}=e("../core/constants"),a=e("../core/math/Vector2"),u=(e("../core/math/Vertex2"),e("../core/math/Path2")),{fromCompactBinary:l,fromPoints:c,fromPath2:h,fromSides:p}=e("../core/CAGFactories"),f=function(e){let t,n;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("rectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");let i=r(e,"corner1",[0,0]),s=r(e,"corner2",[1,1]);t=i.plus(s).times(.5),n=s.minus(i).times(.5)}else t=r(e,"center",[0,0]),n=r(e,"radius",[1,1]);n=n.abs();let i=new a(n.x,-n.y),s=[t.plus(n),t.plus(i),t.minus(n),t.minus(i)];return c(s)};t.exports={circle:function(e){let t=r(e=e||{},"center",[0,0]),n=i(e,"radius",1),u=s(e,"resolution",o),l=[];for(let e=0;e<u;e++){let r=2*Math.PI*e/u,i=a.fromAngleRadians(r).times(n).plus(t);l.push(i)}return c(l)},ellipse:function(e){let t=r(e=e||{},"center",[0,0]),n=r(e,"radius",[1,1]);n=n.abs();let i=s(e,"resolution",o),a=new u([[t.x,t.y+n.y]]);return a=a.appendArc([t.x,t.y-n.y],{xradius:n.x,yradius:n.y,xaxisrotation:0,resolution:i,clockwise:!0,large:!1}),a=a.appendArc([t.x,t.y+n.y],{xradius:n.x,yradius:n.y,xaxisrotation:0,resolution:i,clockwise:!0,large:!1}),a=a.close(),h(a)},rectangle:f,roundedRectangle:function(e){let t,n;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("roundedRectangle: should either give a radius and center parameter, or a corner1 and corner2 parameter");let i=r(e,"corner1",[0,0]),s=r(e,"corner2",[1,1]);t=i.plus(s).times(.5),n=s.minus(i).times(.5)}else t=r(e,"center",[0,0]),n=r(e,"radius",[1,1]);n=n.abs();let u=i(e,"roundradius",.2),l=s(e,"resolution",o),c=Math.min(n.x,n.y);c-=.1,u=Math.min(u,c),u=Math.max(0,u),n=new a(n.x-u,n.y-u);let h=f({center:t,radius:n});return u>0&&(h=h.expand(u,l)),h},fromCompactBinary:l}},{"../core/CAG":45,"../core/CAGFactories":46,"../core/constants":54,"../core/math/Path2":59,"../core/math/Vector2":64,"../core/math/Vertex2":66,"./optionParsers":38}],41:[function(e,t,n){const{CSG:r}=e("../../csg"),{circle:i}=e("./primitives2d-api"),{rotate_extrude:s}=e("./ops-extrusions"),{translate:o,scale:a}=e("./ops-transformations"),u=e("../core/math/Polygon3"),l=e("../core/math/Vector3"),c=e("../core/math/Vertex3");function h(e){let{r:t,fn:n}=Object.assign({},{r:1,fn:5},e),r=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],i=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],s=function(e,t,n){let r=e[0],i=e[1],s=e[2],a=n,u=[],l=[];for(let e=0;e<t;e++)for(let n=0;n<t-e;n++){let c=e/t,h=(e+1)/t,p=n/(t-e),f=(n+1)/(t-e),d=t-e-1?n/(t-e-1):1,m=[];m[0]=o(o(r,i,p),s,c),m[1]=o(o(r,i,f),s,c),m[2]=o(o(r,i,d),s,h);for(let e=0;e<3;e++){let t=Math.sqrt(m[e][0]*m[e][0]+m[e][1]*m[e][1]+m[e][2]*m[e][2]);for(let n=0;n<3;n++)m[e][n]/=t}if(u.push(m[0],m[1],m[2]),l.push([a,a+1,a+2]),a+=3,n<t-e-1){let p=t-e-1?(n+1)/(t-e-1):1;m[0]=o(o(r,i,f),s,c),m[1]=o(o(r,i,p),s,h),m[2]=o(o(r,i,d),s,h);for(let e=0;e<3;e++){let t=Math.sqrt(m[e][0]*m[e][0]+m[e][1]*m[e][1]+m[e][2]*m[e][2]);for(let n=0;n<3;n++)m[e][n]/=t}u.push(m[0],m[1],m[2]),l.push([a,a+1,a+2]),a+=3}}return{points:u,triangles:l,offset:a}};const o=function(e,t,n){let r=1-n,i=[];for(let s=0;s<3;s++)i[s]=e[s]*r+t[s]*n;return i};e&&e.fn&&(n=Math.floor(e.fn/6)),n<=0&&(n=1);let u=[],l=[],c=0;for(let e=0;e<i.length;e++){let t=s([r[i[e][0]],r[i[e][1]],r[i[e][2]]],n,c);u=u.concat(t.points),l=l.concat(t.triangles),c=t.offset}return a(t,p({points:u,triangles:l}))}function p(t){let n=[],r=t.triangles||t.polygons,i=t.colors||null;for(let e=0;e<r.length;e++){let s=[];for(let n=0;n<r[e].length;n++)s[n]=t.points[r[e][n]];let o=[];for(let t=r[e].length-1;t>=0;t--)o.push(new c(new l(s[t][0],s[t][1],s[t][2])));let a=u.defaultShared;i&&i[e]&&(a=u.Shared.fromColor(i[e])),n.push(new u(o,a))}const{fromPolygons:s}=e("../core/CSGFactories");return s(n)}t.exports={cube:function(e){let{round:t,radius:n,fn:i,size:s}=Object.assign({},{size:1,offset:[0,0,0],round:!1,radius:0,fn:8},e),a=[0,0,0],u=null;e&&e.length&&(u=e),e&&e.size&&e.size.length&&(u=e.size),e&&e.size&&!e.size.length&&(s=e.size),e&&"object"!=typeof e&&(s=e),e&&!0===e.round&&(t=!0,n=u&&u.length?(u[0]+u[1]+u[2])/30:s/10),e&&e.radius&&(t=!0,n=e.radius);let l=s,c=s,h=s;u&&u.length&&([l,c,h]=u),a=[l/2,c/2,h/2];let p=t?r.roundedCube({radius:[l/2,c/2,h/2],roundradius:n,resolution:i}):r.cube({radius:[l/2,c/2,h/2]});return e&&e.center&&e.center.length?a=[e.center[0]?0:l/2,e.center[1]?0:c/2,e.center[2]?0:h/2]:e&&!0===e.center?a=[0,0,0]:e&&!1===e.center&&(a=[l/2,c/2,h/2]),a[0]||a[1]||a[2]?o(a,p):p},sphere:function(e){let{r:t,fn:n,type:i}=Object.assign({},{r:1,fn:32,type:"normal"},e),s=[0,0,0];e&&"object"!=typeof e&&(t=e);let a="geodesic"===i?h(e):r.sphere({radius:t,resolution:n});return e&&e.center&&e.center.length?s=[e.center[0]?0:t,e.center[1]?0:t,e.center[2]?0:t]:e&&!0===e.center?s=[0,0,0]:e&&!1===e.center&&(s=[t,t,t]),s[0]||s[1]||s[2]?o(s,a):a},cylinder:function(e){const t={r:1,r1:1,r2:1,h:1,fn:32,round:!1};let n,{r1:i,r2:s,h:a,fn:u,round:l}=Object.assign({},t,e),c=[0,0,0],h=arguments;if(e&&e.d&&(i=s=e.d/2),e&&e.r&&(i=e.r,s=e.r),e&&e.h&&(a=e.h),e&&(e.r1||e.r2)&&(i=e.r1,s=e.r2,e.h&&(a=e.h)),e&&(e.d1||e.d2)&&(i=e.d1/2,s=e.d2/2),h&&h[0]&&h[0].length&&(h=h[0],i=h[0],s=h[1],a=h[2],4===h.length&&(u=h[3])),e&&e.start&&e.end)n=l?r.roundedCylinder({start:e.start,end:e.end,radiusStart:i,radiusEnd:s,resolution:u}):r.cylinder({start:e.start,end:e.end,radiusStart:i,radiusEnd:s,resolution:u});else{n=l?r.roundedCylinder({start:[0,0,0],end:[0,0,a],radiusStart:i,radiusEnd:s,resolution:u}):r.cylinder({start:[0,0,0],end:[0,0,a],radiusStart:i,radiusEnd:s,resolution:u});let t=i>s?i:s;e&&e.center&&e.center.length?c=[e.center[0]?0:t,e.center[1]?0:t,e.center[2]?-a/2:0]:e&&!0===e.center?c=[0,0,-a/2]:e&&!1===e.center&&(c=[0,0,0]),n=c[0]||c[1]||c[2]?o(c,n):n}return n},geodesicSphere:h,torus:function(e){e=Object.assign({},{ri:1,ro:4,fni:16,fno:32,roti:0},e);let{ri:t,ro:n,fni:r,fno:a,roti:u}=e;r<3&&(r=3),a<3&&(a=3);let l=i({r:t,fn:r,center:!0});return u&&(l=l.rotateZ(u)),s({fn:a},o([n,0,0],l))},polyhedron:p}},{"../../csg":22,"../core/CSGFactories":48,"../core/math/Polygon3":62,"../core/math/Vector3":65,"../core/math/Vertex3":67,"./ops-extrusions":36,"./ops-transformations":37,"./primitives2d-api":39}],42:[function(e,t,n){const{parseOption:r,parseOptionAs3DVector:i,parseOptionAs2DVector:s,parseOptionAs3DVectorList:o,parseOptionAsFloat:a,parseOptionAsInt:u}=e("./optionParsers"),{defaultResolution3D:l,defaultResolution2D:c,EPS:h}=e("../core/constants"),p=e("../core/math/Vector3"),f=e("../core/math/Vertex3"),d=e("../core/math/Polygon3"),{Connector:m}=e("../core/connectors"),g=e("../core/Properties"),{fromPolygons:y}=e("../core/CSGFactories"),v=function(e){let t,n,r,s=i(e=e||{},"center",[0,0,0]),o=a(e,"radius",1),c=u(e,"resolution",l);"axes"in e?(t=e.axes[0].unit().times(o),n=e.axes[1].unit().times(o),r=e.axes[2].unit().times(o)):(t=new p([1,0,0]).times(o),n=new p([0,-1,0]).times(o),r=new p([0,0,1]).times(o)),c<4&&(c=4);let h,m=Math.round(c/4),v=[];for(let e=0;e<=c;e++){let i=2*Math.PI*e/c,o=t.times(Math.cos(i)).plus(n.times(Math.sin(i)));if(e>0){let e,t,n=[];for(let i=0;i<=m;i++){let a=.5*Math.PI*i/m,u=Math.cos(a),l=Math.sin(a);i>0&&(n=[],n.push(new f(s.plus(h.times(e).minus(r.times(t))))),n.push(new f(s.plus(o.times(e).minus(r.times(t))))),i<m&&n.push(new f(s.plus(o.times(u).minus(r.times(l))))),n.push(new f(s.plus(h.times(u).minus(r.times(l))))),v.push(new d(n)),n=[],n.push(new f(s.plus(h.times(e).plus(r.times(t))))),n.push(new f(s.plus(o.times(e).plus(r.times(t))))),i<m&&n.push(new f(s.plus(o.times(u).plus(r.times(l))))),n.push(new f(s.plus(h.times(u).plus(r.times(l))))),n.reverse(),v.push(new d(n))),e=u,t=l}}h=o}let x=y(v);return x.properties.sphere=new g,x.properties.sphere.center=new p(s),x.properties.sphere.facepoint=s.plus(t),x};t.exports={cube:function(e){let t,n,r,s;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("cube: should either give a radius and center parameter, or a corner1 and corner2 parameter");r=i(e,"corner1",[0,0,0]),s=i(e,"corner2",[1,1,1]),t=r.plus(s).times(.5),n=s.minus(r).times(.5)}else t=i(e,"center",[0,0,0]),n=i(e,"radius",[1,1,1]);n=n.abs();let o=y([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map((function(e){let r=e[0].map((function(e){let r=new p(t.x+n.x*(2*!!(1&e)-1),t.y+n.y*(2*!!(2&e)-1),t.z+n.z*(2*!!(4&e)-1));return new f(r)}));return new d(r,null)})));return o.properties.cube=new g,o.properties.cube.center=new p(t),o.properties.cube.facecenters=[new m(new p([n.x,0,0]).plus(t),[1,0,0],[0,0,1]),new m(new p([-n.x,0,0]).plus(t),[-1,0,0],[0,0,1]),new m(new p([0,n.y,0]).plus(t),[0,1,0],[0,0,1]),new m(new p([0,-n.y,0]).plus(t),[0,-1,0],[0,0,1]),new m(new p([0,0,n.z]).plus(t),[0,0,1],[1,0,0]),new m(new p([0,0,-n.z]).plus(t),[0,0,-1],[1,0,0])],o},sphere:v,roundedCube:function(e){let t,n,r,s,o=.01;if("corner1"in(e=e||{})||"corner2"in e){if("center"in e||"radius"in e)throw new Error("roundedCube: should either give a radius and center parameter, or a corner1 and corner2 parameter");r=i(e,"corner1",[0,0,0]),s=i(e,"corner2",[1,1,1]),t=r.plus(s).times(.5),n=s.minus(r).times(.5)}else t=i(e,"center",[0,0,0]),n=i(e,"radius",[1,1,1]);n=n.abs();let a=u(e,"resolution",l);a<4&&(a=4),a%2==1&&a<8&&(a=8);let c=i(e,"roundradius",[.2,.2,.2]);c=p.Create(Math.max(c.x,o),Math.max(c.y,o),Math.max(c.z,o));let d=n.minus(c);if(d.x<0||d.y<0||d.z<0)throw new Error("roundradius <= radius!");let y=v({radius:1,resolution:a});return y=y.scale(c),d.x>h&&(y=y.stretchAtPlane([1,0,0],[0,0,0],2*d.x)),d.y>h&&(y=y.stretchAtPlane([0,1,0],[0,0,0],2*d.y)),d.z>h&&(y=y.stretchAtPlane([0,0,1],[0,0,0],2*d.z)),y=y.translate([-d.x+t.x,-d.y+t.y,-d.z+t.z]),y=y.reTesselated(),y.properties.roundedCube=new g,y.properties.roundedCube.center=new f(t),y.properties.roundedCube.facecenters=[new m(new p([n.x,0,0]).plus(t),[1,0,0],[0,0,1]),new m(new p([-n.x,0,0]).plus(t),[-1,0,0],[0,0,1]),new m(new p([0,n.y,0]).plus(t),[0,1,0],[0,0,1]),new m(new p([0,-n.y,0]).plus(t),[0,-1,0],[0,0,1]),new m(new p([0,0,n.z]).plus(t),[0,0,1],[1,0,0]),new m(new p([0,0,-n.z]).plus(t),[0,0,-1],[1,0,0])],y},cylinder:function(e){let t=i(e,"start",[0,-1,0]),n=i(e,"end",[0,1,0]),r=a(e,"radius",1),s=a(e,"radiusEnd",r),o=a(e,"radiusStart",r),l=a(e,"sectorAngle",360);if(l=l>360?l%360:l,s<0||o<0)throw new Error("Radius should be non-negative");if(0===s&&0===o)throw new Error("Either radiusStart or radiusEnd should be positive");let h=u(e,"resolution",c),p=n.minus(t),v=p.unit(),x=v.randomNonParallelVector().unit(),b=x.cross(v).unit(),w=new f(t),D=new f(n),E=[];function C(e,n,r){let i=n*Math.PI*l/180,s=x.times(Math.cos(i)).plus(b.times(Math.sin(i))),o=t.plus(p.times(e)).plus(s.times(r));return new f(o)}if(l>0){for(let e=0;e<h;e++){let t=e/h,n=(e+1)/h;s===o?(E.push(new d([w,C(0,t,s),C(0,n,s)])),E.push(new d([C(0,n,s),C(0,t,s),C(1,t,s),C(1,n,s)])),E.push(new d([D,C(1,n,s),C(1,t,s)]))):(o>0&&(E.push(new d([w,C(0,t,o),C(0,n,o)])),E.push(new d([C(0,t,o),C(1,t,s),C(0,n,o)]))),s>0&&(E.push(new d([D,C(1,n,s),C(1,t,s)])),E.push(new d([C(1,t,s),C(1,n,s),C(0,n,o)]))))}l<360&&(E.push(new d([w,D,C(0,0,o)])),E.push(new d([C(0,0,o),D,C(1,0,s)])),E.push(new d([w,C(0,1,o),D])),E.push(new d([C(0,1,o),C(1,1,s),D])))}let S=y(E);S.properties.cylinder=new g,S.properties.cylinder.start=new m(t,v.negated(),x),S.properties.cylinder.end=new m(n,v,x);let A=t.plus(p.times(.5)),T=x.rotate(t,v,-l/2).times((o+s)/2),k=T.cross(v);return S.properties.cylinder.facepointH=new m(A.plus(T),T,v),S.properties.cylinder.facepointH90=new m(A.plus(k),k,v),S},roundedCylinder:function(e){let t,n=i(e,"start",[0,-1,0]),r=i(e,"end",[0,1,0]),s=a(e,"radius",1),o=r.minus(n);t=Math.abs(o.x)>Math.abs(o.y)?new p(0,1,0):new p(1,0,0);let c=i(e,"normal",t),x=u(e,"resolution",l);x<4&&(x=4);let b=[],w=Math.floor(.25*x);if(o.length()<h)return v({center:n,radius:s,resolution:x});let D,E=o.unit().times(s),C=E.cross(c).unit().times(s),S=C.cross(E).unit().times(s);for(let e=0;e<=x;e++){let t=2*Math.PI*e/x,i=C.times(Math.cos(t)).plus(S.times(Math.sin(t)));if(e>0){let e,t,s=[];s.push(new f(n.plus(i))),s.push(new f(n.plus(D))),s.push(new f(r.plus(D))),s.push(new f(r.plus(i))),b.push(new d(s));for(let o=0;o<=w;o++){let a=.5*Math.PI*o/w,u=Math.cos(a),l=Math.sin(a);o>0&&(s=[],s.push(new f(n.plus(D.times(e).minus(E.times(t))))),s.push(new f(n.plus(i.times(e).minus(E.times(t))))),o<w&&s.push(new f(n.plus(i.times(u).minus(E.times(l))))),s.push(new f(n.plus(D.times(u).minus(E.times(l))))),b.push(new d(s)),s=[],s.push(new f(r.plus(D.times(e).plus(E.times(t))))),s.push(new f(r.plus(i.times(e).plus(E.times(t))))),o<w&&s.push(new f(r.plus(i.times(u).plus(E.times(l))))),s.push(new f(r.plus(D.times(u).plus(E.times(l))))),s.reverse(),b.push(new d(s))),e=u,t=l}}D=i}let A=y(b),T=E.unit(),k=C.unit();return A.properties.roundedCylinder=new g,A.properties.roundedCylinder.start=new m(n,T.negated(),k),A.properties.roundedCylinder.end=new m(r,T,k),A.properties.roundedCylinder.facepoint=n.plus(C),A},cylinderElliptic:function(e){let t=i(e,"start",[0,-1,0]),n=i(e,"end",[0,1,0]),r=s(e,"radius",[1,1]),o=s(e,"radiusEnd",r),a=s(e,"radiusStart",r);if(o._x<0||a._x<0||o._y<0||a._y<0)throw new Error("Radius should be non-negative");if(!(0!==o._x&&0!==o._y||0!==a._x&&0!==a._y))throw new Error("Either radiusStart or radiusEnd should be positive");let l=u(e,"resolution",c),h=n.minus(t),p=h.unit(),v=p.randomNonParallelVector().unit(),x=v.cross(p).unit(),b=new f(t),w=new f(n),D=[];function E(e,n,r){let i=n*Math.PI*2,s=v.times(r._x*Math.cos(i)).plus(x.times(r._y*Math.sin(i))),o=t.plus(h.times(e)).plus(s);return new f(o)}for(let e=0;e<l;e++){let t=e/l,n=(e+1)/l;o._x===a._x&&o._y===a._y?(D.push(new d([b,E(0,t,o),E(0,n,o)])),D.push(new d([E(0,n,o),E(0,t,o),E(1,t,o),E(1,n,o)])),D.push(new d([w,E(1,n,o),E(1,t,o)]))):(a._x>0&&(D.push(new d([b,E(0,t,a),E(0,n,a)])),D.push(new d([E(0,t,a),E(1,t,o),E(0,n,a)]))),o._x>0&&(D.push(new d([w,E(1,n,o),E(1,t,o)])),D.push(new d([E(1,t,o),E(1,n,o),E(0,n,a)]))))}let C=y(D);return C.properties.cylinder=new g,C.properties.cylinder.start=new m(t,p.negated(),v),C.properties.cylinder.end=new m(n,p,v),C.properties.cylinder.facepoint=t.plus(v.times(a)),C},polyhedron:function(e){if("points"in(e=e||{})!="faces"in e)throw new Error("polyhedron needs 'points' and 'faces' arrays");let t=o(e,"points",[[1,1,0],[1,-1,0],[-1,-1,0],[-1,1,0],[0,0,1]]).map((function(e){return new f(e)})),n=r(e,"faces",[[0,1,4],[1,2,4],[2,3,4],[3,0,4],[1,0,3],[2,1,3]]);n.forEach((function(e){e.reverse()}));let i=n.map((function(e){return new d(e.map((function(e){return t[e]})))}));return y(i).reTesselated()}}},{"../core/CSGFactories":48,"../core/Properties":52,"../core/connectors":53,"../core/constants":54,"../core/math/Polygon3":62,"../core/math/Vector3":65,"../core/math/Vertex3":67,"./optionParsers":38}],43:[function(e,t,n){const r=e("../core/math/Polygon3"),{fromPolygons:i}=e("../core/CSGFactories"),{fnSortByIndex:s}=e("../core/utils"),o=function(e,t,n,i){let o=t.vertices.slice(0),a=n.vertices.slice(0),u=n.shared||null;o[0].pos.equals(o[o.length-1].pos)||o.push(o[0]),a[0].pos.equals(a[a.length-1].pos)||a.push(a[0]),i&&(o=o.reverse(),a=a.reverse());let l,c=a.length-1,h=o.length-1,p=c-h,f=p>0,d=p<0,m=[];for(let e=Math.abs(p);e>0;e--)m.push({len:1/0,index:-1});if(d)for(let e=0;e<h;e++){l=o[e].pos.distanceToSquared(o[e+1].pos);for(let e=m.length-1;e>=0;e--)if(m[e].len>l){m[e].len=l,m.index=e;break}}else if(f)for(let e=0;e<c;e++){l=a[e].pos.distanceToSquared(a[e+1].pos);for(let e=m.length-1;e>=0;e--)if(m[e].len>l){m[e].len=l,m.index=e;break}}m.sort(s);let g,y,v,x=function(e,t,n,i){return new r([e,t,n],i)},b=o[0],w=a[0];for(let t=0,n=0,r=c+h;t+n<r;){if(m.length){if(f&&n===m[0].index){g=a[++n],e.push(x(g,w,b,u)),w=g,m.shift();continue}if(d&&t===m[0].index){g=o[++t],e.push(x(w,b,g,u)),b=g,m.shift();continue}}y=t<h?w.pos.distanceToSquared(o[t+1].pos):1/0,v=n<c?b.pos.distanceToSquared(a[n+1].pos):1/0,y<=v?(g=o[++t],e.push(x(w,b,g,u)),b=g):n<c&&(g=a[++n],e.push(x(g,w,b,u)),w=g)}return e};t.exports=function(e,t){let n,s=[],a=null,u=null,l=null,c=null,h=2,p=!1,f=null;if(t&&(p=Boolean(t.loop),t.numslices&&(h=t.numslices),t.callback&&(n=t.callback)),!n){let e=r.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]);n=function(t,n){return 0===t||1===t?e.translate([0,0,t]):null}}for(let t=0,i=h-1;t<=i;t++)if(a=n.call(e,t/i,t),a){if(!(a instanceof r))throw new Error("Polygon.solidFromSlices callback error: Polygon expected");a.checkIfConvex(),u?(null===f&&(f=u.plane.signedDistanceToPoint(a.vertices[0].pos)<0),o(s,u,a,f)):l=a,u=a}return c=a,p?l.vertices.length===c.vertices.length&&l.vertices.every((function(e,t){return e.pos.equals(c.vertices[t].pos)}))||o(s,c,l,f):(s.unshift(f?l:l.flipped()),s.push(f?c.flipped():c)),i(s)}},{"../core/CSGFactories":48,"../core/math/Polygon3":62,"../core/utils":72}],44:[function(e,t,n){const r=e("../fonts/single-line/hershey/simplex.js"),{union:i}=e("./ops-booleans"),s={xOffset:0,yOffset:0,input:"?",align:"left",font:r,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0};function o(e,t){t||"string"!=typeof e||(e={input:e}),e=e||{};let n=Object.assign({},s,e);return n.input=t||n.input,n}function a(e,t){const{x:n,y:r}=Object.assign({x:0,y:0},e||{});let i=t.segments,s=null,o=null;for(let e=0,t=i.length;e<t;e++){s=i[e];for(let e=0,t=s.length;e<t;e++)o=s[e],s[e]=[o[0]+n,o[1]+r]}return t}function u(e,t){let{xOffset:n,yOffset:r,input:i,font:s,height:a,extrudeOffset:u}=o(e,t),l=i.charCodeAt(0);l&&s[l]||(l=63);let c=[].concat(s[l]),h=(a-u)/s.height,p=u/2,f=c.shift()*h,d=[],m=[];for(let e=0,t=c.length;e<t;e+=2)gx=h*c[e]+n,gy=h*c[e+1]+r+p,void 0===c[e]?(d.push(m),m=[],e--):m.push([gx,gy]);return m.length&&d.push(m),{width:f,height:a,segments:d}}function l(e,t){let{xOffset:n,yOffset:r,input:i,font:s,height:l,align:c,extrudeOffset:h,lineSpacing:p,letterSpacing:f}=o(e,t),[d,m]=[n,r],[g,y,v,x,b,w]=[],D={width:0,segments:[]},E=[],C=[],S=0,A=d;const T=()=>{E.push(D),S=Math.max(S,D.width),D={width:0,segments:[]}};for(g=0,y=i.length;g<y;g++)v=i[g],x=u({xOffset:d,yOffset:m,font:s,height:l,extrudeOffset:h},v),"\n"!==v?(b=x.width*f,D.width+=b,d+=b," "!==v&&(D.segments=D.segments.concat(x.segments))):(d=A,m-=x.height*p,T());for(D.segments.length&&T(),g=0,y=E.length;g<y;g++)D=E[g],S>D.width&&(w=S-D.width,"right"===c?D=a({x:w},D):"center"===c&&(D=a({x:w/2},D))),C=C.concat(D.segments);return C}t.exports={vector_char:function(e,t,n){return u({xOffset:e,yOffset:t},n)},vector_text:function(e,t,n){return l({xOffset:e,yOffset:t},n)},vectorChar:u,vectorText:l}},{"../fonts/single-line/hershey/simplex.js":81,"./ops-booleans":32}],45:[function(e,t,n){const{Connector:r}=e("./connectors"),i=e("./math/Vertex3"),s=e("./math/Vector2"),o=e("./math/Vector3"),a=e("./math/Polygon3"),{fromPolygons:u}=e("./CSGFactories"),{fromSides:l,fromFakeCSG:c}=e("./CAGFactories"),h=e("./utils/canonicalize"),p=e("./utils/retesellate"),{isCAGValid:f,isSelfIntersecting:d,hasPointInside:m}=e("./utils/cagValidation"),{area:g,getBounds:y}=e("./utils/cagMeasurements"),{overCutInsideCorners:v}=e("../api/ops-cnc"),{extrudeInOrthonormalBasis:x,extrudeInPlane:b,extrude:w,rotateExtrude:D}=e("../api/ops-extrusions"),E=e("../api/cagOutlinePaths"),C=e("../api/center"),{expand:S,contract:A,expandedShellOfCAG:T}=e("../api/ops-expandContract");let k=function(){this.sides=[],this.isCanonicalized=!1};k.prototype={union:function(e){let t;t=e instanceof Array?e:[e];let n=this._toCSGWall(-1,1);return n=n.union(t.map((function(e){return e._toCSGWall(-1,1).reTesselated()})),!1,!1),c(n).canonicalized()},subtract:function(e){let t;t=e instanceof Array?e:[e];let n=this._toCSGWall(-1,1);return t.map((function(e){n=n.subtractSub(e._toCSGWall(-1,1),!1,!1)})),n=n.reTesselated(),n=n.canonicalized(),n=c(n),n=n.canonicalized(),n},intersect:function(e){let t;t=e instanceof Array?e:[e];let n=this._toCSGWall(-1,1);return t.map((function(e){n=n.intersectSub(e._toCSGWall(-1,1),!1,!1)})),n=n.reTesselated(),n=n.canonicalized(),n=c(n),n=n.canonicalized(),n},transform:function(e){let t=e.isMirroring(),n=this.sides.map((function(t){return t.transform(e)})),r=l(n);return t&&(r=r.flipped()),r},flipped:function(){let e=this.sides.map((function(e){return e.flipped()}));return e.reverse(),l(e)},center:function(e){return C({axes:e},[this])},expandedShell:function(e,t){return T(this,e,t)},expand:function(e,t){return S(this,e,t)},contract:function(e,t){return A(this,e,t)},area:function(){return g(this)},getBounds:function(){return y(this)},isSelfIntersecting:function(e){return d(this,e)},extrudeInOrthonormalBasis:function(e,t,n){return x(this,e,t,n)},extrudeInPlane:function(e,t,n,r){return b(this,e,t,n,r)},extrude:function(e){return w(this,e)},rotateExtrude:function(e){return D(this,e)},check:function(){return f(this)},canonicalized:function(){return h(this)},reTesselated:function(){return p(this)},getOutlinePaths:function(){return E(this)},overCutInsideCorners:function(e){return v(this,e)},hasPointInside:function(e){return m(this,e)},toString:function(){let e="CAG ("+this.sides.length+" sides):\n";return this.sides.map((function(t){e+="  "+t.toString()+"\n"})),e},_toCSGWall:function(e,t){let n=this.sides.map((function(n){return n.toPolygon3D(e,t)}));return u(n)},_toVector3DPairs:function(e){let t=this.sides.map((function(e){let t=e.vertex0.pos,n=e.vertex1.pos;return[o.Create(t.x,t.y,0),o.Create(n.x,n.y,0)]}));return void 0!==e&&(t=t.map((function(t){return t.map((function(t){return t.transform(e)}))}))),t},_toPlanePolygons:function(e){e=Object.assign({},{flipped:!1},e);let{flipped:t}=e,n=[0,0,0],l=[0,0,1],c=[0,1,0],h=new r(n,l,c),p=e.translation||n,f=e.axisVector||l,d=e.normalVector||c,m=e.toConnector||new r(p,f,d),g=h.getTransformationTo(m,!1,0),y=this.getBounds();y[0]=y[0].minus(new s(1,1)),y[1]=y[1].plus(new s(1,1));let v=this._toCSGWall(-1,1),x=u([new a([new i(new o(y[0].x,y[0].y,0)),new i(new o(y[1].x,y[0].y,0)),new i(new o(y[1].x,y[1].y,0)),new i(new o(y[0].x,y[1].y,0))])]);return t&&(x=x.invert()),x=x.intersectSub(v),x.polygons.filter((function(e){return Math.abs(e.plane.normal.z)>.99})).map((function(e){return e.transform(g)}))},_toWallPolygons:function(e){let t=new r([0,0,0],[0,0,1],[0,1,0]),n=e.toConnector1,s=e.toConnector2;if(!(n instanceof r&&s instanceof r))throw new Error("could not parse Connector arguments toConnector1 or toConnector2");if(e.cag&&e.cag.sides.length!==this.sides.length)throw new Error("target cag needs same sides count as start cag");let o=e.cag||this,u=t.getTransformationTo(n,!1,0),l=t.getTransformationTo(s,!1,0),c=this._toVector3DPairs(u),h=o._toVector3DPairs(l),p=[];return c.forEach((function(e,t){p.push(new a([new i(h[t][1]),new i(h[t][0]),new i(e[0])])),p.push(new a([new i(h[t][1]),new i(e[0]),new i(e[1])]))})),p},toPoints:function(){let e=this.sides.map((function(e){return e.vertex0.pos}));return e.length>0&&e.push(e.shift()),e},toCompactBinary:function(){let e=this.canonicalized(),t=e.sides.length,n={},r=[],i=0,s=new Uint32Array(2*t),o=0;e.sides.map((function(e){[e.vertex0,e.vertex1].map((function(e){let t,a=e.getTag();a in n?t=n[a]:(t=i++,n[a]=t,r.push(e)),s[o++]=t}))}));let a=new Float64Array(2*i),u=0;return r.map((function(e){let t=e.pos;a[u++]=t._x,a[u++]=t._y})),{class:"CAG",sideVertexIndices:s,vertexData:a}}},t.exports=k},{"../api/cagOutlinePaths":23,"../api/center":24,"../api/ops-cnc":33,"../api/ops-expandContract":35,"../api/ops-extrusions":36,"./CAGFactories":46,"./CSGFactories":48,"./connectors":53,"./math/Polygon3":62,"./math/Vector2":64,"./math/Vector3":65,"./math/Vertex3":67,"./utils/cagMeasurements":73,"./utils/cagValidation":74,"./utils/canonicalize":75,"./utils/retesellate":79}],46:[function(e,t,n){const r=e("./math/Side"),i=e("./math/Vector2"),s=e("./math/Vertex2"),{areaEPS:o}=e("./constants"),{isSelfIntersecting:a,contains:u}=e("./utils/cagValidation"),{union:l,difference:c}=e("../api/ops-booleans"),h=function(t){let n=new(e("./CAG"));return n.sides=t,n},p=function(e){if(!e)throw new Error("points parameter must be defined");if(!Array.isArray(e))throw new Error("points parameter must be an array");if(void 0!==e[0].x||"number"==typeof e[0][0])return f(e);if("object"==typeof e[0][0])return d(e);throw new Error("Unsupported points list format")},f=function(e){if(e.length<3)throw new Error("CAG shape needs at least 3 points");let t=[],n=new s(new i(e[e.length-1]));e.map((function(e){let o=new s(new i(e));t.push(new r(n,o)),n=o}));let u=h(t);if(a(u))throw new Error("Polygon is self intersecting!");let l=u.area();if(Math.abs(l)<o)throw new Error("Degenerate polygon!");return l<0&&(u=u.flipped()),u.canonicalized()},d=function(e){if(1===e.length)return p(e[0]);let t=[];e.forEach((e=>{t.push(f(e))}));let n={};t.forEach(((e,r)=>{t.forEach(((t,i)=>{e!==t&&(n[r]||(n[r]={parents:[],isHole:!1}),n[i]||(n[i]={parents:[],isHole:!1}),u(t,e)&&(n[r].parents.push(i),n[r].isHole=!!(n[r].parents.length%2),n[i].isHole=!!(n[i].parents.length%2)))}))}));let r=null;for(key in n)r=n[key],r.isHole&&(delete n[key],r.parents.forEach((e=>{t[e]=c(t[e],t[key])})));let i=h([]);for(key in n)i=l(i,t[key]);return i};t.exports={fromSides:h,fromObject:function(e){let t=e.sides.map((function(e){return r.fromObject(e)})),n=h(t);return n.isCanonicalized=e.isCanonicalized,n},fromPoints:p,fromPointsNoCheck:function(e){let t=[],n=new i(e[e.length-1]),o=new s(n);return e.map((function(e){let n=new i(e),a=new s(n),u=new r(o,a);t.push(u),o=a})),h(t)},fromPath2:function(e){if(!e.isClosed())throw new Error("The path should be closed!");return p(e.getPoints())},fromFakeCSG:function(e){let t=e.polygons.map((function(e){return r._fromFakePolygon(e)})).filter((function(e){return null!==e}));return h(t)},fromCompactBinary:function(e){if("CAG"!==e.class)throw new Error("Not a CAG");let t=[],n=e.vertexData,o=n.length/2,a=0;for(let e=0;e<o;e++){let e=n[a++],r=n[a++],o=new i(e,r),u=new s(o);t.push(u)}let u=[],l=e.sideVertexIndices.length/2;a=0;for(let n=0;n<l;n++){let n=e.sideVertexIndices[a++],i=e.sideVertexIndices[a++],s=new r(t[n],t[i]);u.push(s)}let c=h(u);return c.isCanonicalized=!0,c}}},{"../api/ops-booleans":32,"./CAG":45,"./constants":54,"./math/Side":63,"./math/Vector2":64,"./math/Vertex2":66,"./utils/cagValidation":74}],47:[function(e,t,n){const r=e("./trees"),i=e("./math/Polygon3"),s=e("./math/Plane"),o=e("./math/OrthoNormalBasis"),a=(e("./CAG"),e("./Properties")),{fromPolygons:u}=e("./CSGFactories"),l=e("./utils/fixTJunctions"),c=e("./utils/canonicalize"),h=e("./utils/retesellate"),{bounds:p}=e("./utils/csgMeasurements"),{projectToOrthoNormalBasis:f}=e("./utils/csgProjections"),{lieFlat:d,getTransformationToFlatLying:m,getTransformationAndInverseTransformationToFlatLying:g}=e("../api/ops-cnc"),{sectionCut:y,cutByPlane:v}=e("../api/ops-cuts"),x=e("../api/center"),{expand:b,contract:w,expandedShellOfCCSG:D}=e("../api/ops-expandContract");let E=function(){this.polygons=[],this.properties=new a,this.isCanonicalized=!0,this.isRetesselated=!0};E.prototype={union:function(e){let t,n;for(e instanceof Array?(t=e.slice(0),t.push(this)):t=[this,e],n=1;n<t.length;n+=2)t.push(t[n-1].unionSub(t[n]));return t[n-1].reTesselated().canonicalized()},unionSub:function(e,t,n){if(this.mayOverlap(e)){let i=new r(this.polygons),s=new r(e.polygons);i.clipTo(s,!1),s.clipTo(i),s.invert(),s.clipTo(i),s.invert();let o=i.allPolygons().concat(s.allPolygons()),a=u(o);return a.properties=this.properties._merge(e.properties),t&&(a=a.reTesselated()),n&&(a=a.canonicalized()),a}return this.unionForNonIntersecting(e)},unionForNonIntersecting:function(e){let t=this.polygons.concat(e.polygons),n=u(t);return n.properties=this.properties._merge(e.properties),n.isCanonicalized=this.isCanonicalized&&e.isCanonicalized,n.isRetesselated=this.isRetesselated&&e.isRetesselated,n},subtract:function(e){let t;t=e instanceof Array?e:[e];let n=this;for(let e=0;e<t.length;e++){let r=e===t.length-1;n=n.subtractSub(t[e],r,r)}return n},subtractSub:function(e,t,n){let i=new r(this.polygons),s=new r(e.polygons);i.invert(),i.clipTo(s),s.clipTo(i,!0),i.addPolygons(s.allPolygons()),i.invert();let o=u(i.allPolygons());return o.properties=this.properties._merge(e.properties),t&&(o=o.reTesselated()),n&&(o=o.canonicalized()),o},intersect:function(e){let t;t=e instanceof Array?e:[e];let n=this;for(let e=0;e<t.length;e++){let r=e===t.length-1;n=n.intersectSub(t[e],r,r)}return n},intersectSub:function(e,t,n){let i=new r(this.polygons),s=new r(e.polygons);i.invert(),s.clipTo(i),s.invert(),i.clipTo(s),s.clipTo(i),i.addPolygons(s.allPolygons()),i.invert();let o=u(i.allPolygons());return o.properties=this.properties._merge(e.properties),t&&(o=o.reTesselated()),n&&(o=o.canonicalized()),o},invert:function(){let e=this.polygons.map((function(e){return e.flipped()}));return u(e)},transform1:function(e){let t=this.polygons.map((function(t){return t.transform(e)})),n=u(t);return n.properties=this.properties._transform(e),n.isRetesselated=this.isRetesselated,n},transform:function(e){let t=e.isMirroring(),n={},r={},s=this.polygons.map((function(s){let o,a=s.plane,u=a.getTag();u in r?o=r[u]:(o=a.transform(e),r[u]=o);let l=s.vertices.map((function(t){let r,i=t.getTag();return i in n?r=n[i]:(r=t.transform(e),n[i]=r),r}));return t&&l.reverse(),new i(l,s.shared,o)})),o=u(s);return o.properties=this.properties._transform(e),o.isRetesselated=this.isRetesselated,o.isCanonicalized=this.isCanonicalized,o},center:function(e){return x({axes:e},[this])},expand:function(e,t){return b(this,e,t)},contract:function(e,t){return w(this,e,t)},expandedShell:function(e,t,n){return D(this,e,t,n)},stretchAtPlane:function(e,t,n){let r=s.fromNormalAndPoint(e,t),i=new o(r),a=this.sectionCut(i).extrudeInOrthonormalBasis(i,n),u=this.cutByPlane(r),l=this.cutByPlane(r.flipped());return u.union([a,l.translate(r.normal.times(n))])},canonicalized:function(){return c(this)},reTesselated:function(){return h(this)},fixTJunctions:function(){return l(u,this)},getBounds:function(){return p(this)},mayOverlap:function(e){if(0===this.polygons.length||0===e.polygons.length)return!1;{let t=p(this),n=p(e);return!(t[1].x<n[0].x||t[0].x>n[1].x||t[1].y<n[0].y||t[0].y>n[1].y||t[1].z<n[0].z||t[0].z>n[1].z)}},cutByPlane:function(e){return v(this,e)},connectTo:function(e,t,n,r){let i=e.getTransformationTo(t,n,r);return this.transform(i)},setShared:function(e){let t=this.polygons.map((function(t){return new i(t.vertices,e,t.plane)})),n=u(t);return n.properties=this.properties,n.isRetesselated=this.isRetesselated,n.isCanonicalized=this.isCanonicalized,n},setColor:function(e){let t=i.Shared.fromColor.apply(this,arguments);return this.setShared(t)},getTransformationAndInverseTransformationToFlatLying:function(){return g(this)},getTransformationToFlatLying:function(){return m(this)},lieFlat:function(){return d(this)},projectToOrthoNormalBasis:function(e){return f(this,e)},sectionCut:function(e){return y(this,e)},getFeatures:function(e){e instanceof Array||(e=[e]);let t=this.toTriangles().map((function(t){return t.getTetraFeatures(e)})).reduce((function(e,t){return t.map((function(t,n){return t+(0===e?0:e[n])}))}),0);return 1===t.length?t[0]:t},toPolygons:function(){return this.polygons},toString:function(){let e="CSG solid:\n";return this.polygons.map((function(t){e+=t.toString()})),e},toCompactBinary:function(){let e=this.canonicalized(),t=e.polygons.length,n=0,r=0,i={},s=[],o=0,a={},u=[],l=[],c={},h=0;e.polygons.map((function(e){e.vertices.map((function(e){++n;let t=e.getTag();t in i||(i[t]=r++,s.push(e))}));let t=e.plane.getTag();t in a||(a[t]=o++,u.push(e.plane));let p=e.shared.getTag();p in c||(c[p]=h++,l.push(e.shared))}));let p=new Uint32Array(t),f=new Uint32Array(t),d=new Uint32Array(n),m=new Uint32Array(t),g=new Float64Array(3*r),y=new Float64Array(4*o),v=0;for(let n=0;n<t;++n){let t=e.polygons[n];p[n]=t.vertices.length,t.vertices.map((function(e){let t=e.getTag(),n=i[t];d[v++]=n}));let r=t.plane.getTag(),s=a[r];m[n]=s;let o=t.shared.getTag(),u=c[o];f[n]=u}let x=0;s.map((function(e){const t=e.pos;g[x++]=t._x,g[x++]=t._y,g[x++]=t._z}));let b=0;return u.map((function(e){const t=e.normal;y[b++]=t._x,y[b++]=t._y,y[b++]=t._z,y[b++]=e.w})),{class:"CSG",numPolygons:t,numVerticesPerPolygon:p,polygonPlaneIndexes:m,polygonSharedIndexes:f,polygonVertices:d,vertexData:g,planeData:y,shared:l}},toTriangles:function(){let e=[];return this.polygons.forEach((function(t){let n=t.vertices[0];for(let r=t.vertices.length-3;r>=0;r--)e.push(new i([n,t.vertices[r+1],t.vertices[r+2]],t.shared,t.plane))})),e}},t.exports=E},{"../api/center":24,"../api/ops-cnc":33,"../api/ops-cuts":34,"../api/ops-expandContract":35,"./CAG":45,"./CSGFactories":48,"./Properties":52,"./math/OrthoNormalBasis":58,"./math/Plane":60,"./math/Polygon3":62,"./trees":71,"./utils/canonicalize":75,"./utils/csgMeasurements":76,"./utils/csgProjections":77,"./utils/fixTJunctions":78,"./utils/retesellate":79}],48:[function(e,t,n){const r=e("./math/Vector3"),i=e("./math/Vertex3"),s=e("./math/Plane"),o=e("./math/Polygon2"),a=e("./math/Polygon3"),u=function(t){let n=new(e("./CSG"));return n.polygons=t,n.isCanonicalized=!1,n.isRetesselated=!1,n};t.exports={fromPolygons:u,fromSlices:function(e){return o.createFromPoints([[0,0,0],[1,0,0],[1,1,0],[0,1,0]]).solidFromSlices(e)},fromObject:function(e){let t=e.polygons.map((function(e){return a.fromObject(e)})),n=u(t);return n.isCanonicalized=e.isCanonicalized,n.isRetesselated=e.isRetesselated,n},fromCompactBinary:function(e){if("CSG"!==e.class)throw new Error("Not a CSG");let t,n,o,l,c,h,p=[],f=e.planeData,d=f.length/4,m=0;for(let e=0;e<d;e++)t=f[m++],n=f[m++],o=f[m++],l=f[m++],c=r.Create(t,n,o),h=new s(c,l),p.push(h);let g=[];const y=e.vertexData,v=y.length/3;let x,b;m=0;for(let e=0;e<v;e++)t=y[m++],n=y[m++],o=y[m++],x=r.Create(t,n,o),b=new i(x),g.push(b);let w,D,E,C,S=e.shared.map((function(e){return a.Shared.fromObject(e)})),A=[],T=e.numPolygons,k=e.numVerticesPerPolygon,_=e.polygonVertices,F=e.polygonPlaneIndexes,P=e.polygonSharedIndexes;m=0;for(let e=0;e<T;e++){w=k[e],D=[];for(let e=0;e<w;e++)D.push(g[_[m++]]);h=p[F[e]],E=S[P[e]],C=new a(D,E,h),A.push(C)}let M=u(A);return M.isCanonicalized=!0,M.isRetesselated=!0,M}}},{"./CSG":47,"./math/Plane":60,"./math/Polygon2":61,"./math/Polygon3":62,"./math/Vector3":65,"./math/Vertex3":67}],49:[function(e,t,n){const r=function(e,t){this.lookuptable={},this.multiplier=1/t};r.prototype={lookupOrCreate:function(e,t){let n="",r=this.multiplier;if(e.forEach((function(e){let t=Math.round(e*r);n+=t+"/"})),n in this.lookuptable)return this.lookuptable[n];{let i=t(e),s=e.map((function(e){let t=Math.floor(e*r);return[t+"/",t+1+"/"]})),o=1<<e.length;for(let e=0;e<o;++e){let t=e;n="",s.forEach((function(e){n+=e[1&t],t>>=1})),this.lookuptable[n]=i}return i}}},t.exports=r},{}],50:[function(e,t,n){const r=e("./FuzzyFactory"),{EPS:i}=e("./constants"),s=e("./math/Side"),o=function(){this.vertexfactory=new r(2,i)};o.prototype={getVertex:function(e){let t=[e.pos._x,e.pos._y];return this.vertexfactory.lookupOrCreate(t,(function(t){return e}))},getSide:function(e){let t=this.getVertex(e.vertex0),n=this.getVertex(e.vertex1);return new s(t,n)}},t.exports=o},{"./FuzzyFactory":49,"./constants":54,"./math/Side":63}],51:[function(e,t,n){const{EPS:r}=e("./constants"),i=e("./math/Polygon3"),s=e("./FuzzyFactory"),o=function(){this.vertexfactory=new s(3,r),this.planefactory=new s(4,r),this.polygonsharedfactory={}};o.prototype={getPolygonShared:function(e){let t=e.getHash();return t in this.polygonsharedfactory?this.polygonsharedfactory[t]:(this.polygonsharedfactory[t]=e,e)},getVertex:function(e){let t=[e.pos._x,e.pos._y,e.pos._z];return this.vertexfactory.lookupOrCreate(t,(function(t){return e}))},getPlane:function(e){let t=[e.normal._x,e.normal._y,e.normal._z,e.w];return this.planefactory.lookupOrCreate(t,(function(t){return e}))},getPolygon:function(e){let t=this.getPlane(e.plane),n=this.getPolygonShared(e.shared),r=this,s=e.vertices.map((function(e){return r.getVertex(e)})),o=[];if(s.length>0){let e=s[s.length-1].getTag();s.forEach((function(t){let n=t.getTag();n!==e&&o.push(t),e=n}))}return o.length<3&&(o=[]),new i(o,n,t)}},t.exports=o},{"./FuzzyFactory":49,"./constants":54,"./math/Polygon3":62}],52:[function(e,t,n){const r=function(){};r.prototype={_transform:function(e){let t=new r;return r.transformObj(this,t,e),t},_merge:function(e){let t=new r;return r.cloneObj(this,t),r.addFrom(t,e),t}},r.transformObj=function(e,t,n){for(let i in e){if("_transform"===i)continue;if("_merge"===i)continue;let s=e[i],o=s;"object"==typeof s&&("transform"in s&&"function"==typeof s.transform?o=s.transform(n):s instanceof Array?(o=[],r.transformObj(s,o,n)):s instanceof r&&(o=new r,r.transformObj(s,o,n))),t[i]=o}},r.cloneObj=function(e,t){for(let n in e){if("_transform"===n)continue;if("_merge"===n)continue;let i=e[n],s=i;if("object"==typeof i)if(i instanceof Array){s=[];for(let e=0;e<i.length;e++)s.push(i[e])}else i instanceof r&&(s=new r,r.cloneObj(i,s));t[n]=s}},r.addFrom=function(e,t){for(let n in t)"_transform"!==n&&"_merge"!==n&&(n in e&&"object"==typeof e[n]&&e[n]instanceof r&&"object"==typeof t[n]&&t[n]instanceof r?r.addFrom(e[n],t[n]):n in e||(e[n]=t[n]))},t.exports=r},{}],53:[function(e,t,n){const r=e("./math/Vector3"),i=e("./math/Line3"),s=e("./math/Matrix4"),o=e("./math/OrthoNormalBasis"),a=e("./math/Plane"),u=function(e,t,n){this.point=new r(e),this.axisvector=new r(t).unit(),this.normalvector=new r(n).unit()};u.prototype={normalized:function(){let e=this.axisvector.unit(),t=this.normalvector.cross(e).unit(),n=e.cross(t);return new u(this.point,e,n)},transform:function(e){let t=this.point.multiply4x4(e),n=this.point.plus(this.axisvector).multiply4x4(e).minus(t),r=this.point.plus(this.normalvector).multiply4x4(e).minus(t);return new u(t,n,r)},getTransformationTo:function(e,t,n){t=!!t,n=n?Number(n):0;let i=this.normalized();e=e.normalized();let u=s.translation(this.point.negated()),l=a.anyPlaneFromVector3Ds(new r(0,0,0),i.axisvector,e.axisvector),c=new o(l),h=c.to2D(i.axisvector).angle(),p=c.to2D(e.axisvector).angle(),f=180*(p-h)/Math.PI;t&&(f+=180),u=u.multiply(c.getProjectionMatrix()),u=u.multiply(s.rotationZ(f)),u=u.multiply(c.getInverseProjectionMatrix());let d=i.transform(u),m=a.fromNormalAndPoint(e.axisvector,new r(0,0,0)),g=new o(m);return h=g.to2D(d.normalvector).angle(),p=g.to2D(e.normalvector).angle(),f=180*(p-h)/Math.PI,f+=n,u=u.multiply(g.getProjectionMatrix()),u=u.multiply(s.rotationZ(f)),u=u.multiply(g.getInverseProjectionMatrix()),u=u.multiply(s.translation(e.point)),u},axisLine:function(){return new i(this.point,this.axisvector)},extend:function(e){let t=this.point.plus(this.axisvector.unit().times(e));return new u(t,this.axisvector,this.normalvector)}};const l=function(e){this.connectors_=e?e.slice():[]};l.defaultNormal=[0,0,1],l.fromPath2D=function(e,t,n){if(3===arguments.length)return l._fromPath2DTangents(e,t,n);if(2===arguments.length)return l._fromPath2DExplicit(e,t);throw new Error("call with path2D and either 2 direction vectors, or a function returning direction vectors")},l._fromPath2DTangents=function(e,t,n){let r,i=e.points.length,s=new l([new u(e.points[0],t,l.defaultNormal)]);return e.points.slice(1,i-1).forEach((function(t,n){r=e.points[n+2].minus(e.points[n]).toVector3D(0),s.appendConnector(new u(t.toVector3D(0),r,l.defaultNormal))}),this),s.appendConnector(new u(e.points[i-1],n,l.defaultNormal)),s.closed=e.closed,s},l._fromPath2DExplicit=function(e,t){let n=new l(e.points.map((function(e,n){return new u(e.toVector3D(0),r.Create(1,0,0).rotateZ(function(e,t,n){return"function"==typeof e&&(e=e(t,n)),e}(t,e,n)),l.defaultNormal)}),this));return n.closed=e.closed,n},l.prototype={setClosed:function(e){this.closed=!!e},appendConnector:function(e){this.connectors_.push(e)},followWith:function(t){const n=e("./CSG");function r(e,t){return"function"==typeof e&&(e=e(t.point,t.axisvector,t.normalvector)),e}this.verify();let i,s=[],o=this.connectors_[this.connectors_.length-1],a=r(t,o);return this.connectors_.forEach((function(e,n){i=r(t,e),n||this.closed?s.push.apply(s,a._toWallPolygons({toConnector1:o,toConnector2:e,cag:i})):s.push.apply(s,i._toPlanePolygons({toConnector:e,flipped:!0})),n!==this.connectors_.length-1||this.closed||s.push.apply(s,i._toPlanePolygons({toConnector:e})),a=i,o=e}),this),n.fromPolygons(s).reTesselated().canonicalized()},verify:function(){let e,t;for(let n=0;n<this.connectors_.length-1;n++){if(e=this.connectors_[n],t=this.connectors_[n+1],t.point.minus(e.point).dot(e.axisvector)<=0)throw new Error("Invalid ConnectorList. Each connectors position needs to be within a <90deg range of previous connectors axisvector");if(e.axisvector.dot(t.axisvector)<=0)throw new Error("invalid ConnectorList. No neighboring connectors axisvectors may span a >=90deg angle")}}},t.exports={Connector:u,ConnectorList:l}},{"./CSG":47,"./math/Line3":56,"./math/Matrix4":57,"./math/OrthoNormalBasis":58,"./math/Plane":60,"./math/Vector3":65}],54:[function(e,t,n){const r=1e-5,i=.5*r*r*Math.sin(.1);let s=1;t.exports={_CSGDEBUG:!1,defaultResolution2D:32,defaultResolution3D:12,EPS:r,angleEPS:.1,areaEPS:i,all:0,top:1,bottom:2,left:3,right:4,front:5,back:6,staticTag:s,getTag:()=>s++}},{}],55:[function(e,t,n){const r=e("./Vector2"),{solve2Linear:i}=e("../utils"),s=function(e,t){e=new r(e),t=parseFloat(t);let n=e.length();t*=n,e=e.times(1/n),this.normal=e,this.w=t};s.fromPoints=function(e,t){e=new r(e);let n=(t=new r(t)).minus(e).normal().negated().unit(),i=e.dot(n);return new s(n,i)},s.prototype={reverse:function(){return new s(this.normal.negated(),-this.w)},equals:function(e){return e.normal.equals(this.normal)&&e.w===this.w},origin:function(){return this.normal.times(this.w)},direction:function(){return this.normal.normal()},xAtY:function(e){return(this.w-this.normal._y*e)/this.normal.x},absDistanceToPoint:function(e){let t=(e=new r(e)).dot(this.normal);return Math.abs(t-this.w)},intersectWithLine:function(e){let t=i(this.normal.x,this.normal.y,e.normal.x,e.normal.y,this.w,e.w);return t=new r(t),t},transform:function(e){let t=new r(0,0),n=this.normal.times(this.w),i=t.multiply4x4(e),o=this.normal.multiply4x4(e).minus(i),a=n.multiply4x4(e),u=o.dot(a);return new s(o,u)}},t.exports=s},{"../utils":72,"./Vector2":64}],56:[function(e,t,n){const r=e("./Vector3"),{EPS:i}=e("../constants"),{solve2Linear:s}=e("../utils"),o=function(e,t){e=new r(e),t=new r(t),this.point=e,this.direction=t.unit()};o.fromPoints=function(e,t){e=new r(e);let n=(t=new r(t)).minus(e);return new o(e,n)},o.fromPlanes=function(e,t){let n=e.normal.cross(t.normal),a=n.length();if(a<i)throw new Error("Parallel planes");n=n.times(1/a);let u,l=Math.abs(n.x),c=Math.abs(n.y),h=Math.abs(n.z);if(l>=c&&l>=h){let n=s(e.normal.y,e.normal.z,t.normal.y,t.normal.z,e.w,t.w);u=new r(0,n[0],n[1])}else if(c>=l&&c>=h){let n=s(e.normal.x,e.normal.z,t.normal.x,t.normal.z,e.w,t.w);u=new r(n[0],0,n[1])}else{let n=s(e.normal.x,e.normal.y,t.normal.x,t.normal.y,e.w,t.w);u=new r(n[0],n[1],0)}return new o(u,n)},o.prototype={intersectWithPlane:function(e){let t=(e.w-e.normal.dot(this.point))/e.normal.dot(this.direction);return this.point.plus(this.direction.times(t))},clone:function(e){return new o(this.point.clone(),this.direction.clone())},reverse:function(){return new o(this.point.clone(),this.direction.negated())},transform:function(e){let t=this.point.multiply4x4(e),n=this.point.plus(this.direction).multiply4x4(e).minus(t);return new o(t,n)},closestPointOnLine:function(e){let t=(e=new r(e)).minus(this.point).dot(this.direction)/this.direction.dot(this.direction);return this.point.plus(this.direction.times(t))},distanceToPoint:function(e){e=new r(e);let t=this.closestPointOnLine(e);return e.minus(t).length()},equals:function(e){return!!this.direction.equals(e.direction)&&!(this.distanceToPoint(e.point)>i)}},t.exports=o},{"../constants":54,"../utils":72,"./Vector3":65}],57:[function(e,t,n){const r=e("./Vector3"),i=e("./Vector2"),s=e("./OrthoNormalBasis"),o=e("./Plane"),a=function(e){this.elements=arguments.length>=1?e:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};a.prototype={plus:function(e){for(var t=[],n=0;n<16;n++)t[n]=this.elements[n]+e.elements[n];return new a(t)},minus:function(e){for(var t=[],n=0;n<16;n++)t[n]=this.elements[n]-e.elements[n];return new a(t)},multiply:function(e){var t=this.elements[0],n=this.elements[1],r=this.elements[2],i=this.elements[3],s=this.elements[4],o=this.elements[5],u=this.elements[6],l=this.elements[7],c=this.elements[8],h=this.elements[9],p=this.elements[10],f=this.elements[11],d=this.elements[12],m=this.elements[13],g=this.elements[14],y=this.elements[15],v=e.elements[0],x=e.elements[1],b=e.elements[2],w=e.elements[3],D=e.elements[4],E=e.elements[5],C=e.elements[6],S=e.elements[7],A=e.elements[8],T=e.elements[9],k=e.elements[10],_=e.elements[11],F=e.elements[12],P=e.elements[13],M=e.elements[14],I=e.elements[15],N=[];return N[0]=t*v+n*D+r*A+i*F,N[1]=t*x+n*E+r*T+i*P,N[2]=t*b+n*C+r*k+i*M,N[3]=t*w+n*S+r*_+i*I,N[4]=s*v+o*D+u*A+l*F,N[5]=s*x+o*E+u*T+l*P,N[6]=s*b+o*C+u*k+l*M,N[7]=s*w+o*S+u*_+l*I,N[8]=c*v+h*D+p*A+f*F,N[9]=c*x+h*E+p*T+f*P,N[10]=c*b+h*C+p*k+f*M,N[11]=c*w+h*S+p*_+f*I,N[12]=d*v+m*D+g*A+y*F,N[13]=d*x+m*E+g*T+y*P,N[14]=d*b+m*C+g*k+y*M,N[15]=d*w+m*S+g*_+y*I,new a(N)},clone:function(){var e=this.elements.map((function(e){return e}));return new a(e)},rightMultiply1x3Vector:function(e){var t=e._x,n=e._y,i=e._z,s=t*this.elements[0]+n*this.elements[1]+i*this.elements[2]+1*this.elements[3],o=t*this.elements[4]+n*this.elements[5]+i*this.elements[6]+1*this.elements[7],a=t*this.elements[8]+n*this.elements[9]+i*this.elements[10]+1*this.elements[11],u=t*this.elements[12]+n*this.elements[13]+i*this.elements[14]+1*this.elements[15];if(1!==u){var l=1/u;s*=l,o*=l,a*=l}return new r(s,o,a)},leftMultiply1x3Vector:function(e){var t=e._x,n=e._y,i=e._z,s=t*this.elements[0]+n*this.elements[4]+i*this.elements[8]+1*this.elements[12],o=t*this.elements[1]+n*this.elements[5]+i*this.elements[9]+1*this.elements[13],a=t*this.elements[2]+n*this.elements[6]+i*this.elements[10]+1*this.elements[14],u=t*this.elements[3]+n*this.elements[7]+i*this.elements[11]+1*this.elements[15];if(1!==u){var l=1/u;s*=l,o*=l,a*=l}return new r(s,o,a)},rightMultiply1x2Vector:function(e){var t=e.x,n=e.y,r=t*this.elements[0]+n*this.elements[1]+0*this.elements[2]+1*this.elements[3],s=t*this.elements[4]+n*this.elements[5]+0*this.elements[6]+1*this.elements[7],o=(this.elements[8],this.elements[9],this.elements[10],this.elements[11],t*this.elements[12]+n*this.elements[13]+0*this.elements[14]+1*this.elements[15]);if(1!==o){var a=1/o;r*=a,s*=a}return new i(r,s)},leftMultiply1x2Vector:function(e){var t=e.x,n=e.y,r=t*this.elements[0]+n*this.elements[4]+0*this.elements[8]+1*this.elements[12],s=t*this.elements[1]+n*this.elements[5]+0*this.elements[9]+1*this.elements[13],o=(this.elements[2],this.elements[6],this.elements[10],this.elements[14],t*this.elements[3]+n*this.elements[7]+0*this.elements[11]+1*this.elements[15]);if(1!==o){var a=1/o;r*=a,s*=a}return new i(r,s)},isMirroring:function(){var e=new r(this.elements[0],this.elements[4],this.elements[8]),t=new r(this.elements[1],this.elements[5],this.elements[9]),n=new r(this.elements[2],this.elements[6],this.elements[10]);return e.cross(t).dot(n)<0}},a.unity=function(){return new a},a.rotationX=function(e){var t=e*Math.PI*(1/180),n=Math.cos(t),r=Math.sin(t);return new a([1,0,0,0,0,n,r,0,0,-r,n,0,0,0,0,1])},a.rotationY=function(e){var t=e*Math.PI*(1/180),n=Math.cos(t),r=Math.sin(t);return new a([n,0,-r,0,0,1,0,0,r,0,n,0,0,0,0,1])},a.rotationZ=function(e){var t=e*Math.PI*(1/180),n=Math.cos(t),r=Math.sin(t);return new a([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])},a.rotation=function(e,t,n){e=new r(e),t=new r(t);var i=o.fromNormalAndPoint(t,e),u=new s(i),l=a.translation(e.negated());return(l=(l=(l=l.multiply(u.getProjectionMatrix())).multiply(a.rotationZ(n))).multiply(u.getInverseProjectionMatrix())).multiply(a.translation(e))},a.translation=function(e){var t=new r(e),n=[1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,t.z,1];return new a(n)},a.mirroring=function(e){var t=e.normal.x,n=e.normal.y,r=e.normal.z,i=e.w;return new a([1-2*t*t,-2*n*t,-2*r*t,0,-2*t*n,1-2*n*n,-2*r*n,0,-2*t*r,-2*n*r,1-2*r*r,0,2*t*i,2*n*i,2*r*i,1])},a.scaling=function(e){var t=new r(e),n=[t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1];return new a(n)},t.exports=a},{"./OrthoNormalBasis":58,"./Plane":60,"./Vector2":64,"./Vector3":65}],58:[function(e,t,n){const r=e("./Vector2"),i=e("./Vector3"),s=e("./Line2"),o=e("./Line3"),a=e("./Plane"),u=function(e,t){t=arguments.length<2?e.normal.randomNonParallelVector():new i(t),this.v=e.normal.cross(t).unit(),this.u=this.v.cross(e.normal),this.plane=e,this.planeorigin=e.normal.times(e.w)};u.GetCartesian=function(e,t){let n,r,s=e+"/"+t;if("X/Y"===s)n=[0,0,1],r=[1,0,0];else if("Y/-X"===s)n=[0,0,1],r=[0,1,0];else if("-X/-Y"===s)n=[0,0,1],r=[-1,0,0];else if("-Y/X"===s)n=[0,0,1],r=[0,-1,0];else if("-X/Y"===s)n=[0,0,-1],r=[-1,0,0];else if("-Y/-X"===s)n=[0,0,-1],r=[0,-1,0];else if("X/-Y"===s)n=[0,0,-1],r=[1,0,0];else if("Y/X"===s)n=[0,0,-1],r=[0,1,0];else if("X/Z"===s)n=[0,-1,0],r=[1,0,0];else if("Z/-X"===s)n=[0,-1,0],r=[0,0,1];else if("-X/-Z"===s)n=[0,-1,0],r=[-1,0,0];else if("-Z/X"===s)n=[0,-1,0],r=[0,0,-1];else if("-X/Z"===s)n=[0,1,0],r=[-1,0,0];else if("-Z/-X"===s)n=[0,1,0],r=[0,0,-1];else if("X/-Z"===s)n=[0,1,0],r=[1,0,0];else if("Z/X"===s)n=[0,1,0],r=[0,0,1];else if("Y/Z"===s)n=[1,0,0],r=[0,1,0];else if("Z/-Y"===s)n=[1,0,0],r=[0,0,1];else if("-Y/-Z"===s)n=[1,0,0],r=[0,-1,0];else if("-Z/Y"===s)n=[1,0,0],r=[0,0,-1];else if("-Y/Z"===s)n=[-1,0,0],r=[0,-1,0];else if("-Z/-Y"===s)n=[-1,0,0],r=[0,0,-1];else if("Y/-Z"===s)n=[-1,0,0],r=[0,1,0];else{if("Z/Y"!==s)throw new Error("OrthoNormalBasis.GetCartesian: invalid combination of axis identifiers. Should pass two string arguments from [X,Y,Z,-X,-Y,-Z], being two different axes.");n=[-1,0,0],r=[0,0,1]}return new u(new a(new i(n),0),new i(r))},u.Z0Plane=function(){let e=new a(new i([0,0,1]),0);return new u(e,new i([1,0,0]))},u.prototype={getProjectionMatrix:function(){return new(e("./Matrix4"))([this.u.x,this.v.x,this.plane.normal.x,0,this.u.y,this.v.y,this.plane.normal.y,0,this.u.z,this.v.z,this.plane.normal.z,0,0,0,-this.plane.w,1])},getInverseProjectionMatrix:function(){const t=e("./Matrix4");let n=this.plane.normal.times(this.plane.w);return new t([this.u.x,this.u.y,this.u.z,0,this.v.x,this.v.y,this.v.z,0,this.plane.normal.x,this.plane.normal.y,this.plane.normal.z,0,n.x,n.y,n.z,1])},to2D:function(e){return new r(e.dot(this.u),e.dot(this.v))},to3D:function(e){return this.planeorigin.plus(this.u.times(e.x)).plus(this.v.times(e.y))},line3Dto2D:function(e){let t=e.point,n=e.direction.plus(t),r=this.to2D(t),i=this.to2D(n);return s.fromPoints(r,i)},line2Dto3D:function(e){let t=e.origin(),n=e.direction().plus(t),r=this.to3D(t),i=this.to3D(n);return o.fromPoints(r,i)},transform:function(e){let t=this.plane.transform(e),n=this.u.transform(e),r=new i(0,0,0).transform(e),s=n.minus(r);return new u(t,s)}},t.exports=u},{"./Line2":55,"./Line3":56,"./Matrix4":57,"./Plane":60,"./Vector2":64,"./Vector3":65}],59:[function(e,t,n){const r=e("./Vector2"),{EPS:i,angleEPS:s}=e("../constants"),{parseOptionAs2DVector:o,parseOptionAsFloat:a,parseOptionAsInt:u,parseOptionAsBool:l}=e("../../api/optionParsers"),{defaultResolution2D:c}=e("../constants"),h=e("./Vertex2"),p=e("./Side"),f=function(e,t){e=e||[];let n=null;(t=!!t)&&e.length>0&&(n=new r(e[e.length-1]));let s=[];e.map((function(e){e=new r(e);let t=!1;null!==n&&(t=e.distanceTo(n)<i),t||s.push(e),n=e})),this.points=s,this.closed=t};f.arc=function(e){let t=o(e,"center",0),n=a(e,"radius",1),i=a(e,"startangle",0),h=a(e,"endangle",360),p=u(e,"resolution",c),d=l(e,"maketangent",!1);for(;h-i>=720;)h-=360;for(;h-i<=-720;)h+=360;let m,g=[],y=Math.abs(h-i);if(y<s)m=r.fromAngle(i/180*Math.PI).times(n),g.push(m.plus(t));else{let e=Math.floor(p*y/360)+1,s=.5*e/y;s>.25&&(s=.25);let o=d?e+2:e;for(let a=0;a<=o;a++){let o=a;d&&(o=(a-1)*(e-2*s)/e+s,o<0&&(o=0),o>e&&(o=e));let u=i+o*(h-i)/e;m=r.fromAngle(u/180*Math.PI).times(n),g.push(m.plus(t))}}return new f(g,!1)},f.prototype={concat:function(e){if(this.closed||e.closed)throw new Error("Paths must not be closed");let t=this.points.concat(e.points);return new f(t)},getPoints:function(){return this.points},appendPoint:function(e){if(this.closed)throw new Error("Path must not be closed");e=new r(e);let t=this.points.concat([e]);return new f(t)},appendPoints:function(e){if(this.closed)throw new Error("Path must not be closed");let t=this.points;return e.forEach((function(e){t.push(new r(e))})),new f(t)},close:function(){return new f(this.points,!0)},isClosed:function(){return this.closed},getTurn:function(){const e=this.points;let t=0,n=e.length-1;for(let r=0;r<e.length;n=r++)t+=e[n].x*e[r].y-e[n].y*e[r].x;return t>0?"clockwise":t<0?"counter-clockwise":"straight"},rectangularExtrude:function(e,t,n){return this.expandToCAG(e/2,n).extrude({offset:[0,0,t]})},expandToCAG:function(t,n){const r=e("../CAG");let i,s=[],o=this.points.length,a=0;this.closed&&o>2&&(a=-1);for(let e=a;e<o;e++){let t=e;t<0&&(t=o-1);let n=this.points[t],r=new h(n);if(e>a){let e=new p(i,r);s.push(e)}i=r}return r.fromSides(s).expandedShell(t,n)},innerToCAG:function(){const t=e("../CAG");if(!this.closed)throw new Error("The path should be closed!");return t.fromPoints(this.points)},transform:function(e){let t=this.points.map((function(t){return t.multiply4x4(e)}));return new f(t,this.closed)},appendBezier:function(e,t){if(arguments.length<2&&(t={}),this.closed)throw new Error("Path must not be closed");if(!(e instanceof Array))throw new Error("appendBezier: should pass an array of control points");if(e.length<1)throw new Error("appendBezier: need at least 1 control point");if(this.points.length<1)throw new Error("appendBezier: path must already contain a point (the endpoint of the path is used as the starting point for the bezier curve)");let n=u(t,"resolution",c);n<4&&(n=4);let i=[],s=[];s.push(this.points[this.points.length-1]);for(let t=0;t<e.length;++t){let n=e[t];if(null===n){if(0!==t)throw new Error("appendBezier: null can only be passed as the first control point");if(e.length<2)throw new Error("appendBezier: null can only be passed if there is at least one more control point");let r;if("lastBezierControlPoint"in this)r=this.lastBezierControlPoint;else{if(this.points.length<2)throw new Error("appendBezier: null is passed as a control point but this requires a previous bezier curve or at least two points in the existing path");r=this.points[this.points.length-2]}n=this.points[this.points.length-1].times(2).minus(r)}else n=new r(n);s.push(n)}let o=s.length-1,a=1;for(let e=0;e<=o;++e)e>0&&(a*=e),i.push(a);let l=[];for(let e=0;e<=o;++e){let t=i[o]/(i[e]*i[o-e]);l.push(t)}let h=function(e){let t=1,n=Math.pow(1-e,o),i=1!==e?1/(1-e):1,a=new r(0,0);for(let r=0;r<=o;++r){r===o&&(n=1);let u=l[r]*t*n;a=a.plus(s[r].times(u)),t*=e,n*=i}return a},p=[],d=[],m=o+1;for(let e=0;e<m;++e){let t=e/(m-1),n=h(t);p.push(n),d.push(t)}let g=1,y=2*Math.PI/n,v=Math.sin(y);for(;g<p.length-1;){let e=p[g].minus(p[g-1]).unit(),t=p[g+1].minus(p[g]).unit(),n=e.cross(t);if(Math.abs(n)>v){let e=d[g-1],t=d[g+1],n=e+1*(t-e)/3,r=e+2*(t-e)/3,i=h(n),s=h(r);p.splice(g,1,i,s),d.splice(g,1,n,r),g--,g<1&&(g=1)}else++g}p=this.points.concat(p.slice(1));let x=new f(p);return x.lastBezierControlPoint=s[s.length-2],x},appendArc:function(e,t){let n=1e5;if(arguments.length<2&&(t={}),this.closed)throw new Error("Path must not be closed");if(this.points.length<1)throw new Error("appendArc: path must already contain a point (the endpoint of the path is used as the starting point for the arc)");let i,s,o=u(t,"resolution",c);if(o<4&&(o=4),"xradius"in t||"yradius"in t){if("radius"in t)throw new Error("Should either give an xradius and yradius parameter, or a radius parameter");i=a(t,"xradius",0),s=a(t,"yradius",0)}else i=a(t,"radius",0),s=i;let h=a(t,"xaxisrotation",0),p=l(t,"clockwise",!1),d=l(t,"large",!1),m=this.points[this.points.length-1];e=new r(e),i=Math.round(i*n)/n,s=Math.round(s*n)/n,e=new r(Math.round(e.x*n)/n,Math.round(e.y*n)/n);let g=!p,y=[];if(0===i||0===s)y.push(e);else{i=Math.abs(i),s=Math.abs(s);let t=h*Math.PI/180,a=Math.cos(t),u=Math.sin(t),l=m.minus(e).times(.5),c=Math.round((a*l.x+u*l.y)*n)/n,p=Math.round((-u*l.x+a*l.y)*n)/n,f=new r(c,p),v=f.x*f.x/(i*i)+f.y*f.y/(s*s);if(v>1){let e=Math.sqrt(v);i*=e,s*=e,i=Math.round(i*n)/n,s=Math.round(s*n)/n}let x=Math.sqrt((i*i*s*s-i*i*f.y*f.y-s*s*f.x*f.x)/(i*i*f.y*f.y+s*s*f.x*f.x));g===d&&(x=-x);let b=new r(i*f.y/s,-s*f.x/i).times(x),w=new r(a*b.x-u*b.y,u*b.x+a*b.y).plus(m.plus(e).times(.5)),D=new r((f.x-b.x)/i,(f.y-b.y)/s),E=new r((-f.x-b.x)/i,(-f.y-b.y)/s),C=D.angleRadians(),S=E.angleRadians()-C;S%=2*Math.PI,!g&&S>0?S-=2*Math.PI:g&&S<0&&(S+=2*Math.PI);let A=Math.ceil(Math.abs(S)/(2*Math.PI)*o)+1;A<1&&(A=1);for(let e=1;e<=A;e++){let t=C+e/A*S,n=Math.cos(t),o=Math.sin(t),l=new r(a*i*n-u*s*o,u*i*n+a*s*o).plus(w);y.push(l)}}y=this.points.concat(y);let v=new f(y);return v}},t.exports=f},{"../../api/optionParsers":38,"../CAG":45,"../constants":54,"./Side":63,"./Vector2":64,"./Vertex2":66}],60:[function(e,t,n){const r=e("./Vector3"),i=e("./Line3"),{EPS:s,getTag:o}=e("../constants"),a=function(e,t){this.normal=e,this.w=t};a.fromObject=function(e){let t=new r(e.normal),n=parseFloat(e.w);return new a(t,n)},a.fromVector3Ds=function(e,t,n){let r=t.minus(e).cross(n.minus(e)).unit();return new a(r,r.dot(e))},a.anyPlaneFromVector3Ds=function(e,t,n){let r=t.minus(e),i=n.minus(e);r.length()<s&&(r=i.randomNonParallelVector()),i.length()<s&&(i=r.randomNonParallelVector());let o=r.cross(i);return o.length()<s&&(i=r.randomNonParallelVector(),o=r.cross(i)),o=o.unit(),new a(o,o.dot(e))},a.fromPoints=function(e,t,n){return e=new r(e),t=new r(t),n=new r(n),a.fromVector3Ds(e,t,n)},a.fromNormalAndPoint=function(e,t){e=new r(e),t=new r(t),e=e.unit();let n=t.dot(e);return new a(e,n)},a.prototype={flipped:function(){return new a(this.normal.negated(),-this.w)},getTag:function(){let e=this.tag;return e||(e=o(),this.tag=e),e},equals:function(e){return this.normal.equals(e.normal)&&this.w===e.w},transform:function(e){let t=e.isMirroring(),n=this.normal.randomNonParallelVector(),r=this.normal.cross(n),i=this.normal.cross(r),s=this.normal.times(this.w),o=s.plus(r),u=s.plus(i);s=s.multiply4x4(e),o=o.multiply4x4(e),u=u.multiply4x4(e);let l=a.fromVector3Ds(s,o,u);return t&&(l=l.flipped()),l},splitLineBetweenPoints:function(e,t){let n=t.minus(e),r=(this.w-this.normal.dot(e))/this.normal.dot(n);return isNaN(r)&&(r=0),r>1&&(r=1),r<0&&(r=0),e.plus(n.times(r))},intersectWithLine:function(e){return e.intersectWithPlane(this)},intersectWithPlane:function(e){return i.fromPlanes(this,e)},signedDistanceToPoint:function(e){return this.normal.dot(e)-this.w},toString:function(){return"[normal: "+this.normal.toString()+", w: "+this.w+"]"},mirrorPoint:function(e){let t=this.signedDistanceToPoint(e);return e.minus(this.normal.times(2*t))}},t.exports=a},{"../constants":54,"./Line3":56,"./Vector3":65}],61:[function(e,t,n){const r=e("../CAG"),{fromPoints:i}=e("../CAGFactories");function s(e){const t=i(e);this.sides=t.sides}s.prototype=r.prototype,t.exports=s},{"../CAG":45,"../CAGFactories":46}],62:[function(e,t,n){const r=e("./Vector3"),i=e("./Vertex3"),s=e("./Matrix4"),{_CSGDEBUG:o,EPS:a,getTag:u,areaEPS:l}=e("../constants");let c=function(t,n,r){if(this.vertices=t,n||(n=c.defaultShared),this.shared=n,arguments.length>=3)this.plane=r;else{const n=e("./Plane");this.plane=n.fromVector3Ds(t[0].pos,t[1].pos,t[2].pos)}if(o&&!this.checkIfConvex())throw new Error("Not convex!")};c.prototype={checkIfConvex:function(){return c.verticesConvex(this.vertices,this.plane.normal)},setColor:function(e){let t=c.Shared.fromColor.apply(this,arguments);return this.shared=t,this},getSignedVolume:function(){let e=0;for(let t=0;t<this.vertices.length-2;t++)e+=this.vertices[0].pos.dot(this.vertices[t+1].pos.cross(this.vertices[t+2].pos));return e/=6,e},getArea:function(){let e=0;for(let t=0;t<this.vertices.length-2;t++)e+=this.vertices[t+1].pos.minus(this.vertices[0].pos).cross(this.vertices[t+2].pos.minus(this.vertices[t+1].pos)).length();return e/=2,e},getTetraFeatures:function(e){let t=[];return e.forEach((function(e){"volume"===e?t.push(this.getSignedVolume()):"area"===e&&t.push(this.getArea())}),this),t},extrude:function(t){const{fromPolygons:n}=e("../CSGFactories");let r=[],i=this;i.plane.normal.dot(t)>0&&(i=i.flipped()),r.push(i);let s=i.translate(t),o=this.vertices.length;for(let e=0;e<o;e++){let t=[],n=e<o-1?e+1:0;t.push(i.vertices[e].pos),t.push(s.vertices[e].pos),t.push(s.vertices[n].pos),t.push(i.vertices[n].pos);let a=c.createFromPoints(t,this.shared);r.push(a)}return s=s.flipped(),r.push(s),n(r)},translate:function(e){return this.transform(s.translation(e))},boundingSphere:function(){if(!this.cachedBoundingSphere){let e=this.boundingBox(),t=e[0].plus(e[1]).times(.5),n=e[1].minus(t).length();this.cachedBoundingSphere=[t,n]}return this.cachedBoundingSphere},boundingBox:function(){if(!this.cachedBoundingBox){let e,t,n=this.vertices,i=n.length;e=0===i?new r(0,0,0):n[0].pos,t=e;for(let r=1;r<i;r++){let i=n[r].pos;e=e.min(i),t=t.max(i)}this.cachedBoundingBox=[e,t]}return this.cachedBoundingBox},flipped:function(){let e=this.vertices.map((function(e){return e.flipped()}));e.reverse();let t=this.plane.flipped();return new c(e,this.shared,t)},transform:function(e){let t=this.vertices.map((function(t){return t.transform(e)})),n=this.plane.transform(e);return e.isMirroring()&&t.reverse(),new c(t,this.shared,n)},toString:function(){let e="Polygon plane: "+this.plane.toString()+"\n";return this.vertices.map((function(t){e+="  "+t.toString()+"\n"})),e},projectToOrthoNormalBasis:function(t){const n=e("../CAG"),{fromPointsNoCheck:r}=e("../CAGFactories");let i=r(this.vertices.map((function(e){return t.to2D(e.pos)}))),s=i.area();return Math.abs(s)<l?i=new n:s<0&&(i=i.flipped()),i},solidFromSlices:function(t){return e("../../api/solidFromSlices")(this,t)}},c.fromObject=function(t){const n=e("./Plane");let r=t.vertices.map((function(e){return i.fromObject(e)})),s=c.Shared.fromObject(t.shared),o=n.fromObject(t.plane);return new c(r,s,o)},c.createFromPoints=function(e,t,n){let s,o=[];return e.map((function(e){let t=new r(e),n=new i(t);o.push(n)})),s=arguments.length<3?new c(o,t):new c(o,t,n),s},c.verticesConvex=function(e,t){let n=e.length;if(n>2){let r=e[n-2].pos,i=e[n-1].pos;for(let s=0;s<n;s++){let n=e[s].pos;if(!c.isConvexPoint(r,i,n,t))return!1;r=i,i=n}}return!0},c.isConvexPoint=function(e,t,n,r){return t.minus(e).cross(n.minus(t)).dot(r)>=0},c.isStrictlyConvexPoint=function(e,t,n,r){return t.minus(e).cross(n.minus(t)).dot(r)>=a},c.Shared=function(e){if(null!=e&&4!==e.length)throw new Error("Expecting 4 element array");this.color=e},c.Shared.fromObject=function(e){return new c.Shared(e.color)},c.Shared.fromColor=function(e){let t;if(1===arguments.length)t=arguments[0].slice();else{t=[];for(let e=0;e<arguments.length;e++)t.push(arguments[e])}if(3===t.length)t.push(1);else if(4!==t.length)throw new Error("setColor expects either an array with 3 or 4 elements, or 3 or 4 parameters.");return new c.Shared(t)},c.Shared.prototype={getTag:function(){let e=this.tag;return e||(e=u(),this.tag=e),e},getHash:function(){return this.color?this.color.join("/"):"null"}},c.defaultShared=new c.Shared(null),t.exports=c},{"../../api/solidFromSlices":43,"../CAG":45,"../CAGFactories":46,"../CSGFactories":48,"../constants":54,"./Matrix4":57,"./Plane":60,"./Vector3":65,"./Vertex3":67}],63:[function(e,t,n){const r=e("./Vector2"),i=e("./Vertex2"),s=e("./Vertex3"),o=e("./Polygon3"),{getTag:a}=e("../constants"),u=function(e,t){if(!(e instanceof i))throw new Error("Assertion failed");if(!(t instanceof i))throw new Error("Assertion failed");this.vertex0=e,this.vertex1=t};u.fromObject=function(e){var t=i.fromObject(e.vertex0),n=i.fromObject(e.vertex1);return new u(t,n)},u._fromFakePolygon=function(e){if(e.vertices.length<4)return null;var t=[],n=e.vertices.filter((function(e,n){return e.pos.z>0&&(t.push(n),!0)})).map((function(e){return new r(e.pos.x,e.pos.y)}));if(2!==n.length)throw new Error("Assertion failed: _fromFakePolygon: not enough points found");var s=t[1]-t[0];if(1!==s&&3!==s)throw new Error("Assertion failed: _fromFakePolygon: unknown index ordering");return 1===s&&n.reverse(),new u(new i(n[0]),new i(n[1]))},u.prototype={toString:function(){return this.vertex0+" -> "+this.vertex1},toPolygon3D:function(e,t){const n=[new s(this.vertex0.pos.toVector3D(e)),new s(this.vertex1.pos.toVector3D(e)),new s(this.vertex1.pos.toVector3D(t)),new s(this.vertex0.pos.toVector3D(t))];return new o(n)},transform:function(e){var t=this.vertex0.pos.transform(e),n=this.vertex1.pos.transform(e);return new u(new i(t),new i(n))},flipped:function(){return new u(this.vertex1,this.vertex0)},direction:function(){return this.vertex1.pos.minus(this.vertex0.pos)},getTag:function(){var e=this.tag;return e||(e=a(),this.tag=e),e},lengthSquared:function(){let e=this.vertex1.pos.x-this.vertex0.pos.x,t=this.vertex1.pos.y-this.vertex0.pos.y;return e*e+t*t},length:function(){return Math.sqrt(this.lengthSquared())}},t.exports=u},{"../constants":54,"./Polygon3":62,"./Vector2":64,"./Vertex2":66,"./Vertex3":67}],64:[function(e,t,n){const{IsFloat:r}=e("../utils"),i=function(e,t){if(2===arguments.length)this._x=parseFloat(e),this._y=parseFloat(t);else{var n=!0;if(1===arguments.length)if("object"==typeof e)e instanceof i?(this._x=e._x,this._y=e._y):e instanceof Array?(this._x=parseFloat(e[0]),this._y=parseFloat(e[1])):"x"in e&&"y"in e?(this._x=parseFloat(e.x),this._y=parseFloat(e.y)):n=!1;else{var s=parseFloat(e);this._x=s,this._y=s}else n=!1;if(n&&(r(this._x)&&r(this._y)||(n=!1)),!n)throw new Error("wrong arguments")}};i.fromAngle=function(e){return i.fromAngleRadians(e)},i.fromAngleDegrees=function(e){var t=Math.PI*e/180;return i.fromAngleRadians(t)},i.fromAngleRadians=function(e){return i.Create(Math.cos(e),Math.sin(e))},i.Create=function(e,t){var n=Object.create(i.prototype);return n._x=e,n._y=t,n},i.prototype={get x(){return this._x},get y(){return this._y},set x(e){throw new Error("Vector2D is immutable")},set y(e){throw new Error("Vector2D is immutable")},toVector3D:function(t){return new(e("./Vector3"))(this._x,this._y,t)},equals:function(e){return this._x===e._x&&this._y===e._y},clone:function(){return i.Create(this._x,this._y)},negated:function(){return i.Create(-this._x,-this._y)},plus:function(e){return i.Create(this._x+e._x,this._y+e._y)},minus:function(e){return i.Create(this._x-e._x,this._y-e._y)},times:function(e){return i.Create(this._x*e,this._y*e)},dividedBy:function(e){return i.Create(this._x/e,this._y/e)},dot:function(e){return this._x*e._x+this._y*e._y},lerp:function(e,t){return this.plus(e.minus(this).times(t))},length:function(){return Math.sqrt(this.dot(this))},distanceTo:function(e){return this.minus(e).length()},distanceToSquared:function(e){return this.minus(e).lengthSquared()},lengthSquared:function(){return this.dot(this)},unit:function(){return this.dividedBy(this.length())},cross:function(e){return this._x*e._y-this._y*e._x},normal:function(){return i.Create(this._y,-this._x)},multiply4x4:function(e){return e.leftMultiply1x2Vector(this)},transform:function(e){return e.leftMultiply1x2Vector(this)},angle:function(){return this.angleRadians()},angleDegrees:function(){return 180*this.angleRadians()/Math.PI},angleRadians:function(){return Math.atan2(this._y,this._x)},min:function(e){return i.Create(Math.min(this._x,e._x),Math.min(this._y,e._y))},max:function(e){return i.Create(Math.max(this._x,e._x),Math.max(this._y,e._y))},toString:function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+")"},abs:function(){return i.Create(Math.abs(this._x),Math.abs(this._y))}},t.exports=i},{"../utils":72,"./Vector3":65}],65:[function(e,t,n){const{IsFloat:r}=e("../utils"),i=e("./Vector2"),s=function(e,t,n){if(3===arguments.length)this._x=parseFloat(e),this._y=parseFloat(t),this._z=parseFloat(n);else if(2===arguments.length)this._x=parseFloat(e),this._y=parseFloat(t),this._z=0;else{var o=!0;if(1===arguments.length)if("object"==typeof e)e instanceof s?(this._x=e._x,this._y=e._y,this._z=e._z):e instanceof i?(this._x=e._x,this._y=e._y,this._z=0):e instanceof Array?e.length<2||e.length>3?o=!1:(this._x=parseFloat(e[0]),this._y=parseFloat(e[1]),3===e.length?this._z=parseFloat(e[2]):this._z=0):"x"in e&&"y"in e?(this._x=parseFloat(e.x),this._y=parseFloat(e.y),this._z="z"in e?parseFloat(e.z):0):"_x"in e&&"_y"in e?(this._x=parseFloat(e._x),this._y=parseFloat(e._y),this._z="_z"in e?parseFloat(e._z):0):o=!1;else{var a=parseFloat(e);this._x=a,this._y=a,this._z=a}else o=!1;if(!o)throw new Error("wrong arguments");r(this._x)&&r(this._y)&&r(this._z)||(o=!1)}};s.Create=function(e,t,n){var r=Object.create(s.prototype);return r._x=e,r._y=t,r._z=n,r},s.prototype={get x(){return this._x},get y(){return this._y},get z(){return this._z},set x(e){throw new Error("Vector3D is immutable")},set y(e){throw new Error("Vector3D is immutable")},set z(e){throw new Error("Vector3D is immutable")},clone:function(){return s.Create(this._x,this._y,this._z)},negated:function(){return s.Create(-this._x,-this._y,-this._z)},abs:function(){return s.Create(Math.abs(this._x),Math.abs(this._y),Math.abs(this._z))},plus:function(e){return s.Create(this._x+e._x,this._y+e._y,this._z+e._z)},minus:function(e){return s.Create(this._x-e._x,this._y-e._y,this._z-e._z)},times:function(e){return s.Create(this._x*e,this._y*e,this._z*e)},dividedBy:function(e){return s.Create(this._x/e,this._y/e,this._z/e)},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z},lerp:function(e,t){return this.plus(e.minus(this).times(t))},lengthSquared:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSquared())},unit:function(){return this.dividedBy(this.length())},cross:function(e){return s.Create(this._y*e._z-this._z*e._y,this._z*e._x-this._x*e._z,this._x*e._y-this._y*e._x)},distanceTo:function(e){return this.minus(e).length()},distanceToSquared:function(e){return this.minus(e).lengthSquared()},equals:function(e){return this._x===e._x&&this._y===e._y&&this._z===e._z},multiply4x4:function(e){return e.leftMultiply1x3Vector(this)},transform:function(e){return e.leftMultiply1x3Vector(this)},toString:function(){return"("+this._x.toFixed(5)+", "+this._y.toFixed(5)+", "+this._z.toFixed(5)+")"},randomNonParallelVector:function(){var e=this.abs();return e._x<=e._y&&e._x<=e._z?s.Create(1,0,0):e._y<=e._x&&e._y<=e._z?s.Create(0,1,0):s.Create(0,0,1)},min:function(e){return s.Create(Math.min(this._x,e._x),Math.min(this._y,e._y),Math.min(this._z,e._z))},max:function(e){return s.Create(Math.max(this._x,e._x),Math.max(this._y,e._y),Math.max(this._z,e._z))}},t.exports=s},{"../utils":72,"./Vector2":64}],66:[function(e,t,n){const r=e("./Vector2"),{getTag:i}=e("../constants"),s=function(e){this.pos=e};s.fromObject=function(e){return new s(new r(e.pos._x,e.pos._y))},s.prototype={toString:function(){return"("+this.pos.x.toFixed(5)+","+this.pos.y.toFixed(5)+")"},getTag:function(){var e=this.tag;return e||(e=i(),this.tag=e),e}},t.exports=s},{"../constants":54,"./Vector2":64}],67:[function(e,t,n){const r=e("./Vector3"),{getTag:i}=e("../constants"),s=function(e){this.pos=e};s.fromObject=function(e){var t=new r(e.pos);return new s(t)},s.prototype={flipped:function(){return this},getTag:function(){var e=this.tag;return e||(e=i(),this.tag=e),e},interpolate:function(e,t){var n=this.pos.lerp(e.pos,t);return new s(n)},transform:function(e){var t=this.pos.multiply4x4(e);return new s(t)},toString:function(){return this.pos.toString()}},t.exports=s},{"../constants":54,"./Vector3":65}],68:[function(e,t,n){const{EPS:r}=e("../constants"),{solve2Linear:i}=e("../utils");t.exports={linesIntersect:function(e,t,n,s){if(t.equals(n)||s.equals(e)){if(s.minus(n).unit().plus(t.minus(e).unit()).length()<r)return!0}else{let r=t.minus(e),o=s.minus(n);if(Math.abs(r.cross(o))<1e-9)return!1;let a=i(-r.x,o.x,-r.y,o.y,e.x-n.x,e.y-n.y);if(a[0]>1e-6&&a[0]<.999999&&a[1]>1e-5&&a[1]<.999999)return!0}return!1}}},{"../constants":54,"../utils":72}],69:[function(e,t,n){const{EPS:r}=e("../constants"),i=e("./OrthoNormalBasis"),{interpolateBetween2DPointsForY:s,insertSorted:o,fnNumberSort:a}=e("../utils"),u=e("./Vertex3"),l=e("./Vector2"),c=e("./Line2"),h=e("./Polygon3");t.exports=function(e,t){let n=e.length;if(n>0){let p=e[0].plane,f=e[0].shared,d=new i(p),m=[],g=[],y={},v={},x={},b=1/r*10;for(let t=0;t<n;t++){let n=e[t],r=[],i=n.vertices.length,s=-1;if(i>0){let e,o,a;for(let u=0;u<i;u++){let i,c=d.to2D(n.vertices[u].pos),h=Math.floor(c.y*b);h in x?i=x[h]:h+1 in x?i=x[h+1]:h-1 in x?i=x[h-1]:(i=c.y,x[h]=c.y),c=l.Create(c.x,i),r.push(c);let p=c.y;(0===u||p<e)&&(e=p,s=u),(0===u||p>o)&&(o=p,a=u),p in v||(v[p]={}),v[p][t]=!0}e>=o?(r=[],i=0,s=-1):(e in y||(y[e]=[]),y[e].push(t))}r.reverse(),s=i-s-1,m.push(r),g.push(s)}let w=[];for(let e in v)w.push(e);w.sort(a);let D=[],E=[];for(let e=0;e<w.length;e++){let n,i=[],a=w[e],x=Number(a),b=v[a];for(let e=0;e<D.length;++e){let t=D[e],n=t.polygonindex;if(b[n]){let r=m[n],i=r.length,s=t.leftvertexindex,o=t.rightvertexindex;for(;;){let e=s+1;if(e>=i&&(e=0),r[e].y!==x)break;s=e}let a=o-1;if(a<0&&(a=i-1),r[a].y===x&&(o=a),s!==t.leftvertexindex&&s===o)D.splice(e,1),--e;else{t.leftvertexindex=s,t.rightvertexindex=o,t.topleft=r[s],t.topright=r[o];let e=s+1;e>=i&&(e=0),t.bottomleft=r[e];let n=o-1;n<0&&(n=i-1),t.bottomright=r[n]}}}if(e>=w.length-1)D=[],n=null;else{n=Number(w[e+1]);let t=.5*(x+n),r=y[a];for(let e in r){let n=r[e],i=m[n],a=i.length,u=g[n],l=u;for(;;){let e=l+1;if(e>=a&&(e=0),i[e].y!==x)break;if(e===u)break;l=e}let c=u;for(;;){let e=c-1;if(e<0&&(e=a-1),i[e].y!==x)break;if(e===l)break;c=e}let h=l+1;h>=a&&(h=0);let p=c-1;p<0&&(p=a-1);let f={polygonindex:n,leftvertexindex:l,rightvertexindex:c,topleft:i[l],topright:i[c],bottomleft:i[h],bottomright:i[p]};o(D,f,(function(e,n){let r=s(e.topleft,e.bottomleft,t),i=s(n.topleft,n.bottomleft,t);return r>i?1:r<i?-1:0}))}}for(let e in D){let t=D[e],o=(m[t.polygonindex].length,s(t.topleft,t.bottomleft,x)),a=l.Create(o,x);o=s(t.topright,t.bottomright,x);let u=l.Create(o,x);o=s(t.topleft,t.bottomleft,n);let h=l.Create(o,n);o=s(t.topright,t.bottomright,n);let p=l.Create(o,n),f={topleft:a,topright:u,bottomleft:h,bottomright:p,leftline:c.fromPoints(a,h),rightline:c.fromPoints(p,u)};if(i.length>0){let e=i[i.length-1],t=f.topleft.distanceTo(e.topright),n=f.bottomleft.distanceTo(e.bottomright);t<r&&n<r&&(f.topleft=e.topleft,f.leftline=e.leftline,f.bottomleft=e.bottomleft,i.splice(i.length-1,1))}i.push(f)}if(e>0){let e={},n={};for(let t=0;t<i.length;t++){let s=i[t];for(let t=0;t<E.length;t++)if(!n[t]){let i=E[t];if(i.bottomleft.distanceTo(s.topleft)<r&&i.bottomright.distanceTo(s.topright)<r){n[t]=!0;let o=s.leftline.direction().x-i.leftline.direction().x,a=s.rightline.direction().x-i.rightline.direction().x,u=Math.abs(o)<r,l=Math.abs(a)<r,c=l||a>=0;(u||o>=0)&&c&&(s.outpolygon=i.outpolygon,s.leftlinecontinues=u,s.rightlinecontinues=l,e[t]=!0);break}}}for(let n=0;n<E.length;n++)if(!e[n]){let e=E[n];e.outpolygon.rightpoints.push(e.bottomright),e.bottomright.distanceTo(e.bottomleft)>r&&e.outpolygon.leftpoints.push(e.bottomleft),e.outpolygon.leftpoints.reverse();let i=e.outpolygon.rightpoints.concat(e.outpolygon.leftpoints),s=[];i.map((function(e){let t=d.to3D(e),n=new u(t);s.push(n)}));let o=new h(s,f,p);t.push(o)}}for(let e=0;e<i.length;e++){let t=i[e];t.outpolygon?(t.leftlinecontinues||t.outpolygon.leftpoints.push(t.topleft),t.rightlinecontinues||t.outpolygon.rightpoints.push(t.topright)):(t.outpolygon={leftpoints:[],rightpoints:[]},t.outpolygon.leftpoints.push(t.topleft),t.topleft.distanceTo(t.topright)>r&&t.outpolygon.rightpoints.push(t.topright))}E=i}}}},{"../constants":54,"../utils":72,"./Line2":55,"./OrthoNormalBasis":58,"./Polygon3":62,"./Vector2":64,"./Vertex3":67}],70:[function(e,t,n){const r=e("./math/Matrix4"),i=e("./math/Vector3"),s=e("./math/Plane");t.exports={addTransformationMethodsToPrototype:function(e){e.mirrored=function(e){return this.transform(r.mirroring(e))},e.mirroredX=function(){let e=new s(i.Create(1,0,0),0);return this.mirrored(e)},e.mirroredY=function(){let e=new s(i.Create(0,1,0),0);return this.mirrored(e)},e.mirroredZ=function(){let e=new s(i.Create(0,0,1),0);return this.mirrored(e)},e.translate=function(e){return this.transform(r.translation(e))},e.scale=function(e){return this.transform(r.scaling(e))},e.rotateX=function(e){return this.transform(r.rotationX(e))},e.rotateY=function(e){return this.transform(r.rotationY(e))},e.rotateZ=function(e){return this.transform(r.rotationZ(e))},e.rotate=function(e,t,n){return this.transform(r.rotation(e,t,n))},e.rotateEulerAngles=function(e,t,n,s){s=s||[0,0,0];let o=r.rotationZ(e),a=r.rotationX(t),u=r.rotationZ(n),l=r.translation(new i(s));return this.transform(u.multiply(a).multiply(o).multiply(l))}},addCenteringToPrototype:function(e,t){e.center=function(e){(e=Array.prototype.map.call(arguments,(function(e){return e}))).length||(e=t.slice());let n=this.getBounds();return this.translate(t.map((function(t){return e.indexOf(t)>-1?-(n[0][t]+n[1][t])/2:0})))}}}},{"./math/Matrix4":57,"./math/Plane":60,"./math/Vector3":65}],71:[function(e,t,n){const{_CSGDEBUG:r,EPS:i}=e("./constants"),s=e("./math/Vertex3"),o=e("./math/Polygon3"),a=function(){this.parent=null,this.children=[],this.polygon=null,this.removed=!1};a.prototype={addPolygons:function(e){if(!this.isRootNode())throw new Error("Assertion failed");let t=this;e.map((function(e){t.addChild(e)}))},remove:function(){if(!this.removed){if(this.removed=!0,r){if(this.isRootNode())throw new Error("Assertion failed");if(this.children.length)throw new Error("Assertion failed")}let e=this.parent.children,t=e.indexOf(this);if(t<0)throw new Error("Assertion failed");e.splice(t,1),this.parent.recursivelyInvalidatePolygon()}},isRemoved:function(){return this.removed},isRootNode:function(){return!this.parent},invert:function(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()},getPolygon:function(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon},getPolygons:function(e){let t,n,r,i,s=[this],o=[s];for(t=0;t<o.length;++t)for(s=o[t],n=0,r=s.length;n<r;n++)i=s[n],i.polygon?e.push(i.polygon):o.push(i.children)},splitByPlane:function(e,t,n,r,i){if(this.children.length){let s,o,a,u,l,c=[this.children];for(s=0;s<c.length;s++)for(l=c[s],o=0,a=l.length;o<a;o++)u=l[o],u.children.length?c.push(u.children):u._splitByPlane(e,t,n,r,i)}else this._splitByPlane(e,t,n,r,i)},_splitByPlane:function(e,t,n,r,a){let u=this.polygon;if(u){let l=u.boundingSphere(),c=l[1]+i,h=e.normal,p=l[0],f=h.dot(p)-e.w;if(f>c)r.push(this);else if(f<-c)a.push(this);else{let l=function(e,t){let n={type:null,front:null,back:null},r=e.normal,a=t.vertices,u=a.length;if(t.plane.equals(e))n.type=0;else{let l=e.w,c=!1,h=!1,p=[],f=-i;for(let e=0;e<u;e++){let t=r.dot(a[e].pos)-l,n=t<0;p.push(n),t>i&&(c=!0),t<f&&(h=!0)}if(c||h)if(h)if(c){n.type=4;let r=[],l=[],c=p[0];for(let t=0;t<u;t++){let n=a[t],i=t+1;i>=u&&(i=0);let o=p[i];if(c===o)c?l.push(n):r.push(n);else{let t=n.pos,o=a[i].pos,u=e.splitLineBetweenPoints(t,o),h=new s(u);c?(l.push(n),l.push(h),r.push(h)):(r.push(n),r.push(h),l.push(h))}c=o}let h=i*i;if(l.length>=3){let e=l[l.length-1];for(let t=0;t<l.length;t++){let n=l[t];n.pos.distanceToSquared(e.pos)<h&&(l.splice(t,1),t--),e=n}}if(r.length>=3){let e=r[r.length-1];for(let t=0;t<r.length;t++){let n=r[t];n.pos.distanceToSquared(e.pos)<h&&(r.splice(t,1),t--),e=n}}r.length>=3&&(n.front=new o(r,t.shared,t.plane)),l.length>=3&&(n.back=new o(l,t.shared,t.plane))}else n.type=3;else n.type=2;else{let e=r.dot(t.plane.normal);n.type=e>=0?0:1}}return n}(e,u);switch(l.type){case 0:t.push(this);break;case 1:n.push(this);break;case 2:r.push(this);break;case 3:a.push(this);break;case 4:if(l.front){let e=this.addChild(l.front);r.push(e)}if(l.back){let e=this.addChild(l.back);a.push(e)}}}}},addChild:function(e){let t=new a;return t.parent=this,t.polygon=e,this.children.push(t),t},invertSub:function(){let e,t,n,r,i=[this],s=[i];for(e=0;e<s.length;e++)for(i=s[e],t=0,n=i.length;t<n;t++)r=i[t],r.polygon&&(r.polygon=r.polygon.flipped()),s.push(r.children)},recursivelyInvalidatePolygon:function(){let e=this;for(;e.polygon;)e.polygon=null,e.parent&&(e=e.parent)}};const u=function(e){this.polygonTree=new a,this.rootnode=new l(null),e&&this.addPolygons(e)};u.prototype={invert:function(){this.polygonTree.invert(),this.rootnode.invert()},clipTo:function(e,t){t=!!t,this.rootnode.clipTo(e,t)},allPolygons:function(){let e=[];return this.polygonTree.getPolygons(e),e},addPolygons:function(e){let t=this,n=e.map((function(e){return t.polygonTree.addChild(e)}));this.rootnode.addPolygonTreeNodes(n)}};const l=function(e){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=e};l.prototype={invert:function(){let e,t=[this];for(let n=0;n<t.length;n++){e=t[n],e.plane&&(e.plane=e.plane.flipped()),e.front&&t.push(e.front),e.back&&t.push(e.back);let r=e.front;e.front=e.back,e.back=r}},clipPolygons:function(e,t){let n,r={node:this,polygontreenodes:e},i=[];do{if(n=r.node,e=r.polygontreenodes,n.plane){let r=[],s=[],o=t?r:s,a=n.plane,u=e.length;for(let t=0;t<u;t++){let n=e[t];n.isRemoved()||n.splitByPlane(a,o,r,s,r)}n.front&&s.length>0&&i.push({node:n.front,polygontreenodes:s});let l=r.length;if(n.back&&l>0)i.push({node:n.back,polygontreenodes:r});else for(let e=0;e<l;e++)r[e].remove()}r=i.pop()}while(void 0!==r)},clipTo:function(e,t){let n=this,r=[];do{n.polygontreenodes.length>0&&e.rootnode.clipPolygons(n.polygontreenodes,t),n.front&&r.push(n.front),n.back&&r.push(n.back),n=r.pop()}while(void 0!==n)},addPolygonTreeNodes:function(e){let t,n={node:this,polygontreenodes:e},r=[];do{if(t=n.node,0===(e=n.polygontreenodes).length){n=r.pop();continue}let i=t;if(!t.plane){let n=e[0].getPolygon().plane;t.plane=n}let s=[],o=[];for(let t=0,n=e.length;t<n;++t)e[t].splitByPlane(i.plane,i.polygontreenodes,o,s,o);s.length>0&&(t.front||(t.front=new l(t)),r.push({node:t.front,polygontreenodes:s})),o.length>0&&(t.back||(t.back=new l(t)),r.push({node:t.back,polygontreenodes:o})),n=r.pop()}while(void 0!==n)},getParentPlaneNormals:function(e,t){t>0&&this.parent&&(e.push(this.parent.plane.normal),this.parent.getParentPlaneNormals(e,t-1))}},t.exports=u},{"./constants":54,"./math/Polygon3":62,"./math/Vertex3":67}],72:[function(e,t,n){t.exports={fnNumberSort:function(e,t){return e-t},fnSortByIndex:function(e,t){return e.index-t.index},IsFloat:function(e){return!isNaN(e)||e===1/0||e===-1/0},solve2Linear:function(e,t,n,r,i,s){let o=1/(e*r-t*n),a=i*r-t*s,u=-i*n+e*s;return a*=o,u*=o,[a,u]},insertSorted:function(e,t,n){let r=0,i=e.length;for(;i>r;){let s=Math.floor((r+i)/2);n(t,e[s])>0?r=s+1:i=s}e.splice(r,0,t)},interpolateBetween2DPointsForY:function(e,t,n){let r,i=n-e.y,s=t.y-e.y;return s<0&&(i=-i,s=-s),r=i<=0?0:i>=s?1:s<1e-10?.5:i/s,e.x+r*(t.x-e.x)},isCAG:function(e){return"sides"in e&&"length"in e.sides},isCSG:function(e){return"polygons"in e&&"length"in e.polygons}}},{}],73:[function(e,t,n){const r=e("../math/Vector2");t.exports={area:function(e){let t=0;return e.sides.map((function(e){t+=e.vertex0.pos.cross(e.vertex1.pos)})),t*=.5,t},getBounds:function(e){let t;t=0===e.sides.length?new r(0,0):e.sides[0].vertex0.pos;let n=t;return e.sides.map((function(e){t=t.min(e.vertex0.pos),t=t.min(e.vertex1.pos),n=n.max(e.vertex0.pos),n=n.max(e.vertex1.pos)})),[t,n]}}},{"../math/Vector2":64}],74:[function(e,t,n){const{areaEPS:r}=e("../constants"),{linesIntersect:i}=e("../math/lineUtils"),s=function(e,t){let n=null,r=null,i=!1;return e.sides.forEach((e=>{n=e.vertex0.pos,r=e.vertex1.pos,s.c1(t,n,r)&&s.c2(t,n,r)&&(i=!i)})),i};s.c1=(e,t,n)=>t.y>e.y!=n.y>e.y,s.c2=(e,t,n)=>e.x<(n.x-t.x)*(e.y-t.y)/(n.y-t.y)+t.x,t.exports={isCAGValid:function(e){let t=[];e.isSelfIntersecting(!0)&&t.push("Self intersects");let n={};e.sides.map((function(e){function t(e){let t=e.x+" "+e.y;t in n||(n[t]=0),n[t]++}t(e.vertex0.pos),t(e.vertex1.pos)}));for(let e in n){let r=n[e];1&r&&t.push("Uneven number of sides ("+r+") for point "+e)}let i=e.area();if(i<r&&t.push("Area is "+i),t.length>0){let e="";throw t.map((function(t){e+=t+"\n"})),new Error(e)}},isSelfIntersecting:function(e,t){let n=e.sides.length;for(let r=0;r<n;r++){let s=e.sides[r];for(let o=r+1;o<n;o++){let n=e.sides[o];if(i(s.vertex0.pos,s.vertex1.pos,n.vertex0.pos,n.vertex1.pos))return t&&(console.log("side "+r+": "+s),console.log("side "+o+": "+n)),!0}}return!1},hasPointInside:s,contains:function(e,t){for(let n=0,r=t.sides.length;n<r;n++)if(!s(e,t.sides[n].vertex0.pos))return!1;return!0}}},{"../constants":54,"../math/lineUtils":68}],75:[function(e,t,n){const{EPS:r}=e("../constants"),i=e("../FuzzyFactory3d"),s=e("../FuzzyFactory2d"),{fromPolygons:o}=e("../CSGFactories"),{fromSides:a}=e("../CAGFactories"),u=function(e,t){let n=e,r=[];return t.polygons.forEach((function(e){let t=n.getPolygon(e);t.vertices.length>=3&&r.push(t)})),o(r)},l=function(e,t){let n=e,i=t.sides.map((function(e){return n.getSide(e)})).filter((function(e){return e.length()>r}));return a(i)};t.exports=function(e,t){return e.isCanonicalized?e:"sides"in e?function(e,t){if(e.isCanonicalized)return e;{let t=new s,n=l(t,e);return n.isCanonicalized=!0,n}}(e):function(e,t){if(e.isCanonicalized)return e;{const t=new i;let n=u(t,e);return n.isCanonicalized=!0,n.isRetesselated=e.isRetesselated,n.properties=e.properties,n}}(e)}},{"../CAGFactories":46,"../CSGFactories":48,"../FuzzyFactory2d":50,"../FuzzyFactory3d":51,"../constants":54}],76:[function(e,t,n){const r=e("../math/Vector3");t.exports={bounds:function(e){if(!e.cachedBoundingBox){let t=new r(0,0,0),n=new r(0,0,0),i=e.polygons,s=i.length;for(let e=0;e<s;e++){let r=i[e].boundingBox();0===e?(t=r[0],n=r[1]):(t=t.min(r[0]),n=n.max(r[1]))}e.cachedBoundingBox=[t,n]}return e.cachedBoundingBox},volume:function(e){let t=e.toTriangles().map((function(e){return e.getTetraFeatures(["volume"])}));console.log("volume",t)},area:function(e){let t=e.toTriangles().map((function(e){return e.getTetraFeatures(["area"])}));console.log("area",t)}}},{"../math/Vector3":65}],77:[function(e,t,n){const r=e("../CAG"),{EPS:i}=e("../constants");t.exports={projectToOrthoNormalBasis:function(e,t){let n=[];return e.polygons.filter((function(e){return e.plane.normal.minus(t.plane.normal).lengthSquared()<i*i})).map((function(e){let r=e.projectToOrthoNormalBasis(t);r.sides.length>0&&n.push(r)})),(new r).union(n)}}},{"../CAG":45,"../constants":54}],78:[function(e,t,n){const{EPS:r}=e("../constants"),i=e("../math/Polygon3"),s=e("../math/Plane");function o(e,t,n,r,i,s){let o=r.getTag(),u=i.getTag();if(o===u)throw new Error("Assertion failed");let l=o+"/"+u;if(u+"/"+o in e)return a(e,t,n,i,r,null),null;let c={vertex0:r,vertex1:i,polygonindex:s};return l in e?e[l].push(c):e[l]=[c],o in t?t[o].push(l):t[o]=[l],u in n?n[u].push(l):n[u]=[l],l}function a(e,t,n,r,i,s){let o=r.getTag(),a=i.getTag(),u=o+"/"+a;if(!(u in e))throw new Error("Assertion failed");let l=-1,c=e[u];for(let e=0;e<c.length;e++){let t=c[e];if(t.vertex0===r&&t.vertex1===i&&(null===s||t.polygonindex===s)){l=e;break}}if(l<0)throw new Error("Assertion failed");if(c.splice(l,1),0===c.length&&delete e[u],l=t[o].indexOf(u),l<0)throw new Error("Assertion failed");if(t[o].splice(l,1),0===t[o].length&&delete t[o],l=n[a].indexOf(u),l<0)throw new Error("Assertion failed");n[a].splice(l,1),0===n[a].length&&delete n[a]}t.exports=function(e,t){t=t.canonicalized();let n={};for(let e=0;e<t.polygons.length;e++){let r=t.polygons[e],i=r.vertices.length;if(i>=3){let t=r.vertices[0],s=t.getTag();for(let o=0;o<i;o++){let a=o+1;a===i&&(a=0);let u=r.vertices[a],l=u.getTag(),c=s+"/"+l,h=l+"/"+s;if(h in n){let e=n[h];e.splice(-1,1),0===e.length&&delete n[h]}else{let r={vertex0:t,vertex1:u,polygonindex:e};c in n?n[c].push(r):n[c]=[r]}t=u,s=l}}}let u={},l={},c={},h=!0;for(let e in n)h=!1,c[e]=!0,n[e].map((function(t){let n=t.vertex0.getTag(),r=t.vertex1.getTag();n in u?u[n].push(e):u[n]=[e],r in l?l[r].push(e):l[r]=[e]}));if(!h){let h=t.polygons.slice(0);for(;;){let e=!0;for(let t in n)e=!1,c[t]=!0;if(e)break;let t=!1;for(;;){let e=null;for(let t in c){e=t;break}if(null===e)break;let p=!0;if(e in n){let f=n[e];if(0===f.length)throw new Error("Assertion failed");let d=f[0];for(let e=0;e<2;e++){let f=0===e?d.vertex0:d.vertex1,m=0===e?d.vertex1:d.vertex0,g=f.getTag(),y=m.getTag(),v=[];0===e?g in l&&(v=l[g]):g in u&&(v=u[g]);for(let d=0;d<v.length;d++){let x=n[v[d]][0],b=0===e?x.vertex0:x.vertex1,w=0===e?x.vertex1:x.vertex0,D=b.getTag();if(w.getTag()!==g)throw new Error("Assertion failed");if(D===y){a(n,u,l,f,m,null),a(n,u,l,m,f,null),p=!1,e=2,t=!0;break}{let d=f.pos,g=m.pos,y=b.pos.minus(d),v=g.minus(d).dot(y)/y.dot(y);if(v>0&&v<1&&d.plus(y.times(v)).distanceToSquared(g)<r*r){let r=x.polygonindex,f=h[r],d=x.vertex1.getTag(),g=-1;for(let e=0;e<f.vertices.length;e++)if(f.vertices[e].getTag()===d){g=e;break}if(g<0)throw new Error("Assertion failed");let y=f.vertices.slice(0);y.splice(g,0,m);let v=new i(y,f.shared);if(isNaN(v.plane.w)){let e=!1,t=function(t){v.vertices.forEach((function(n){e||t(n)}))};t((function(n){t((function(r){t((function(t){v.plane=s.fromPoints(n.pos,r.pos,t.pos),isNaN(v.plane.w)||(e=!0)}))}))}))}h[r]=v,a(n,u,l,x.vertex0,x.vertex1,r);let b=o(n,u,l,x.vertex0,m,r),w=o(n,u,l,m,x.vertex1,r);null!==b&&(c[b]=!0),null!==w&&(c[w]=!0),p=!1,e=2,t=!0;break}}}}}p&&delete c[e]}if(!t)break}let p=e(h);p.properties=t.properties,p.isCanonicalized=!0,p.isRetesselated=!0,t=p}return t}},{"../constants":54,"../math/Plane":60,"../math/Polygon3":62}],79:[function(e,t,n){const r=e("../FuzzyFactory3d"),i=e("../math/reTesselateCoplanarPolygons"),{fromPolygons:s}=e("../CSGFactories");t.exports=function(e){if(e.isRetesselated)return e;{let t={},n=e.isCanonicalized,o=new r;e.polygons.map((function(e){let r=e.plane,i=e.shared;n||(r=o.getPlane(r),i=o.getPolygonShared(i));let s=r.getTag()+"/"+i.getTag();s in t?t[s].push(e):t[s]=[e]}));let a=[];for(let e in t){let n=t[e];if(n.length<2)a=a.concat(n);else{let e=[];i(n,e),a=a.concat(e)}}let u=s(a);return u.isRetesselated=!0,u.properties=e.properties,u}}},{"../CSGFactories":48,"../FuzzyFactory3d":51,"../math/reTesselateCoplanarPolygons":69}],80:[function(e,t,n){t.exports=function(e){return e?e.constructor!==Array?[e]:e:[]}},{}],81:[function(e,t,n){t.exports={height:14,32:[16],33:[10,5,21,5,7,,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,,12,21,12,14],35:[21,11,25,4,-7,,17,25,10,-7,,4,12,18,12,,3,6,17,6],36:[20,8,25,8,-4,,12,25,12,-4,,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,,3,18,13,12,,13,18,3,12],43:[26,13,18,13,0,,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,,12,16,10,14,9,11,9,8,10,6,11,5,,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,,9,21,17,0,,4,7,14,7],66:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,,4,21,17,21,,4,11,12,11,,4,0,17,0],70:[18,4,21,4,0,,4,21,17,21,,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,,13,8,18,8],72:[22,4,21,4,0,,18,21,18,0,,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,,18,21,4,7,,9,12,18,0],76:[17,4,21,4,0,,4,0,16,0],77:[24,4,21,4,0,,4,21,12,0,,20,21,12,0,,20,21,20,0],78:[22,4,21,4,0,,4,21,18,0,,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,,12,4,18,-2],82:[21,4,21,4,0,,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,,17,21,9,0],87:[24,2,21,7,0,,12,21,7,0,,12,21,17,0,,22,21,17,0],88:[20,3,21,17,0,,17,21,3,0],89:[18,1,21,9,11,9,0,,17,21,9,11],90:[20,17,21,3,0,,3,21,17,21,,3,0,17,0],91:[14,4,25,4,-7,,5,25,5,-7,,4,25,11,25,,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,,10,25,10,-7,,3,25,10,25,,3,-7,10,-7],94:[16,6,15,8,18,10,15,,3,12,8,17,13,12,,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,,14,14,4,4,,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0,,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,,15,14,15,0],118:[16,2,14,8,0,,14,14,8,0],119:[22,3,14,7,0,,11,14,7,0,,11,14,15,0,,19,14,15,0],120:[17,3,14,14,0,,14,14,3,0],121:[16,2,14,8,0,,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,,3,14,14,14,,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]}},{}],82:[function(e,t,n){!function(e){function t(e){var t=this;t.options=e||{},t.trackPosition=!1!==t.options.track,t.trackPosition&&(t.line=t.column=t.c=0)}function n(e,t){return e.trackPosition&&(t+=`\nLine: ${e.line}\nColumn: ${e.column}\nChar: ${e.c}`),t=new Error(t),e.error=t,i(e,"onerror",t)}function r(e){return i(e,"onend",e.data)}function i(e,t,n){var r=t.toString();return e[r]&&e[r](e,n),e}function s(e,t){t=t.trim(),null===e.group?(function(e,t){var r=parseInt(t);isNaN(r)?(n(e,"Invalid group (int)"),e.group=null):e.group=r}(e,t),e.value=null):function(e,t){e.options.strict,e.value=t}(e,t),null!==e.group&&null!==e.value&&(function(e,t,n){if(void 0!==e.absorbers){var r=e.absorbers.get(t);void 0!==r&&r(e,t,n)}}(e,e.group,e.value),e.group=null,e.value=null)}function o(e,t){return e&&e.length>t?e.charAt(t):""}e.reader=function(e){return new t(e)},e.STATES=["start","end","error"],t.prototype={on:function(e,t){this["on"+e]=t},absorb:function(e,t){void 0===this.absorbers&&(this.absorbers=new Map),this.absorbers.set(e,t)},write:function(e){return function(e,t){if(e.error)throw e.error;if(e.isclosed)return n(e,"Cannot write after close");if(function(e){i(e,"onstart",e.data)}(e),null===t)return r(e);e.group=null,e.value=null,e.error=null,e.position=0,e.line=0,e.column=0;for(var a=0,u="",l="";null===e.error&&(u=o(t,a++));)e.trackPosition&&(e.position++,"\n"===u?(e.line++,e.column=0):e.column++),"\n"===u?(s(e,l),l=""):l+=u;r(e)}(this,e),this},close:function(){return this.isclosed=!0,this}}}(void 0===n?this.dxf={}:n)},{}],83:[function(e,t,n){let r=new Map([[0,"etyp"],[1,"text"],[2,"name"],[3,"nam1"],[5,"hdle"],[6,"ltyp"],[7,"lsty"],[8,"lnam"],[9,"vari"],[10,"pptx"],[11,"sptx"],[12,"tptx"],[13,"fptx"],[20,"ppty"],[21,"spty"],[22,"tpty"],[23,"fpty"],[30,"pptz"],[31,"sptz"],[32,"tptz"],[33,"fptz"],[38,"elev"],[39,"lthk"],[40,"swid"],[41,"ewid"],[42,"bulg"],[43,"cwid"],[48,"lscl"],[50,"ang0"],[51,"ang1"],[60,"visb"],[62,"cnmb"],[67,"spac"],[70,"lflg"],[71,"fvia"],[72,"fvib"],[73,"fvic"],[74,"fvid"],[75,"cflg"],[90,"vlen"],[91,"slen"],[92,"plen"],[93,"flen"],[94,"elen"],[95,"clen"],[100,"sbnm"],[210,"etrx"],[220,"etry"],[230,"etrz"]]);t.exports={colorIndex:[[255,0,0,255],[255,255,0,255],[0,255,0,255],[0,255,255,255],[0,0,255,255],[255,0,255,255],[255,255,255,255],[128,128,128,255],[192,192,192,255],[255,0,0,255],[255,127,127,255],[165,0,0,255],[165,82,82,255],[127,0,0,255],[127,63,63,255],[76,0,0,255],[76,38,38,255],[38,0,0,255],[38,19,19,255],[255,63,0,255],[255,159,127,255],[165,41,0,255],[165,103,82,255],[127,31,0,255],[127,79,63,255],[76,19,0,255],[76,47,38,255],[38,9,0,255],[38,23,19,255],[255,127,0,255],[255,191,127,255],[165,82,0,255],[165,124,82,255],[127,63,0,255],[127,95,63,255],[76,38,0,255],[76,57,38,255],[38,19,0,255],[38,28,19,255],[255,191,0,255],[255,223,127,255],[165,124,0,255],[165,145,82,255],[127,95,0,255],[127,111,63,255],[76,57,0,255],[76,66,38,255],[38,28,0,255],[38,33,19,255],[255,255,0,255],[255,255,127,255],[165,165,0,255],[165,165,82,255],[127,127,0,255],[127,127,63,255],[76,76,0,255],[76,76,38,255],[38,38,0,255],[38,38,19,255],[191,255,0,255],[223,255,127,255],[124,165,0,255],[145,165,82,255],[95,127,0,255],[111,127,63,255],[57,76,0,255],[66,76,38,255],[28,38,0,255],[33,38,19,255],[127,255,0,255],[191,255,127,255],[82,165,0,255],[124,165,82,255],[63,127,0,255],[95,127,63,255],[38,76,0,255],[57,76,38,255],[19,38,0,255],[28,38,19,255],[63,255,0,255],[159,255,127,255],[41,165,0,255],[103,165,82,255],[31,127,0,255],[127,63,255],[19,76,0,255],[47,76,38,255],[9,38,0,255],[23,38,19,255],[0,255,0,255],[127,255,127,255],[0,165,0,255],[82,165,82,255],[0,127,0,255],[63,127,63,255],[0,76,0,255],[38,76,38,255],[0,38,0,255],[19,38,19,255],[0,255,63,255],[127,255,159,255],[0,165,41,255],[82,165,103,255],[0,127,31,255],[63,127,79,255],[0,76,19,255],[38,76,47,255],[0,38,9,255],[19,38,23,255],[0,255,127,255],[127,255,191,255],[0,165,82,255],[82,165,124,255],[0,127,63,255],[63,127,95,255],[0,76,38,255],[38,76,57,255],[0,38,19,255],[19,38,28,255],[0,255,191,255],[127,255,223,255],[0,165,124,255],[82,165,145,255],[0,127,95,255],[63,127,111,255],[0,76,57,255],[38,76,66,255],[0,38,28,255],[19,38,33,255],[0,255,255,255],[127,255,255,255],[0,165,165,255],[82,165,165,255],[0,127,127,255],[63,127,127,255],[0,76,76,255],[38,76,76,255],[0,38,38,255],[19,38,38,255],[0,191,255,255],[127,223,255,255],[0,124,165,255],[82,145,165,255],[0,95,127,255],[63,111,127,255],[0,57,76,255],[38,66,76,255],[0,28,38,255],[19,33,38,255],[0,127,255,255],[127,191,255,255],[0,82,165,255],[82,124,165,255],[0,63,127,255],[63,95,127,255],[0,38,76,255],[38,57,76,255],[0,19,38,255],[19,28,38,255],[0,63,255,255],[127,159,255,255],[0,41,165,255],[82,103,165,255],[0,31,127,255],[63,79,127,255],[0,19,76,255],[38,47,76,255],[0,9,38,255],[19,23,38,255],[0,0,255,255],[127,127,255,255],[0,0,165,255],[82,82,165,255],[0,0,127,255],[63,63,127,255],[0,0,76,255],[38,38,76,255],[0,0,38,255],[19,19,38,255],[63,0,255,255],[159,127,255,255],[41,0,165,255],[103,82,165,255],[31,0,127,255],[79,63,127,255],[19,0,76,255],[47,38,76,255],[9,0,38,255],[23,19,38,255],[127,0,255,255],[191,127,255,255],[82,0,165,255],[124,82,165,255],[63,0,127,255],[95,63,127,255],[38,0,76,255],[57,38,76,255],[19,0,38,255],[28,19,38,255],[191,0,255,255],[223,127,255,255],[124,0,165,255],[145,82,165,255],[95,0,127,255],[111,63,127,255],[57,0,76,255],[66,38,76,255],[28,0,38,255],[33,19,38,255],[255,0,255,255],[255,127,255,255],[165,0,165,255],[165,82,165,255],[127,0,127,255],[127,63,127,255],[76,0,76,255],[76,38,76,255],[38,0,38,255],[38,19,38,255],[255,0,191,255],[255,127,223,255],[165,0,124,255],[165,82,145,255],[127,0,95,255],[127,63,111,255],[76,0,57,255],[76,38,66,255],[38,0,28,255],[38,19,33,255],[255,0,127,255],[255,127,191,255],[165,0,82,255],[165,82,124,255],[127,0,63,255],[127,63,95,255],[76,0,38,255],[76,38,57,255],[38,0,19,255],[38,19,28,255],[255,0,63,255],[255,127,159,255],[165,0,41,255],[165,82,103,255],[127,0,31,255],[127,63,79,255],[76,0,19,255],[76,38,47,255],[38,0,9,255],[38,19,23,255],[84,84,84,255],[118,118,118,255],[160,160,160,255],[192,192,192,255],[224,224,224,255],[0,0,0,255]],BYBLOCK:0,BYLAYER:256,getTLA:function(e){return r.get(e)}}},{}],84:[function(e,t,n){const{colorIndex:r,BYLAYER:i,getTLA:s}=e("./autocad"),o=e("./DxfReader"),{instantiateAsciiDxf:a}=e("./instantiate"),u=e("./translate");function l(e,t){if(!0===e.options.strict)throw t;console.log(`error: line ${t.line}, column ${t.column}, bad character [${t.c}]`)}function c(e,t){}function h(e,t){}function p(e,t,n){let r=null;switch(n){case"LAYER":r={type:"layer"},r[s(48)]=1,r[s(60)]=0,r[s(67)]=0,e.objstack.push(r);break;case"LINE":r={type:"line"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=0,e.objstack.push(r);break;case"LWPOLYLINE":r={type:"lwpolyline"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(38)]=0,r[s(39)]=0,r[s(43)]=0,r[s(70)]=0,r[s(90)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=1,e.objstack.push(r);break;case"MESH":r={type:"mesh"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(91)]=0,r[s(92)]=0,r[s(93)]=0,r[s(94)]=0,r[s(95)]=0,r.state=0,e.objstack.push(r);break;case"POLYLINE":r={type:"polyline"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(10)]=0,r[s(20)]=0,r[s(30)]=0,r[s(39)]=0,r[s(40)]=0,r[s(41)]=0,r[s(70)]=0,r[s(71)]=0,r[s(72)]=0,r[s(73)]=0,r[s(74)]=0,r[s(75)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=1,e.objstack.push(r);break;case"ARC":r={type:"arc"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(39)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=1,e.objstack.push(r);break;case"CIRCLE":r={type:"circle"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(39)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=1,e.objstack.push(r);break;case"ELLIPSE":r={type:"ellipse"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(210)]=0,r[s(220)]=0,r[s(230)]=1,e.objstack.push(r);break;case"VERTEX":r={type:"vertex"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(10)]=0,r[s(20)]=0,r[s(30)]=0,r[s(40)]=0,r[s(41)]=0,r[s(42)]=0,r[s(70)]=0,r[s(71)]=0,r[s(72)]=0,r[s(73)]=0,r[s(74)]=0,e.objstack.push(r);break;case"3DFACE":r={type:"3dface"},r[s(48)]=1,r[s(60)]=0,r[s(62)]=i,r[s(67)]=0,r[s(70)]=0,e.objstack.push(r);break;case"SEQEND":r={type:"seqend"},e.objstack.push(r);break;default:r={},e.objstack.push(r)}}function f(e,t,n){let r={type:"variable",name:n};e.objstack.push(r)}function d(e,t,n){let r=e.objstack.pop();"type"in r&&(r[s(t)]=parseFloat(n)),e.objstack.push(r)}function m(e,t,n){let r=e.objstack.pop();"type"in r&&(r[s(t)]=parseFloat(n)),e.objstack.push(r)}function g(e,t,n){let r=e.objstack.pop();"type"in r&&("lwpolyline"===r.type?(void 0===r.pptxs&&(r.pptxs=[],r.bulgs=[]),r.pptxs.push(parseFloat(n)),r.bulgs.push(0)):"mesh"===r.type?(void 0===r.pptxs&&(r.pptxs=[]),r.pptxs.push(parseFloat(n))):r[s(t)]=parseFloat(n)),e.objstack.push(r)}function y(e,t,n){let r=e.objstack.pop();"type"in r&&("lwpolyline"===r.type||"mesh"===r.type?(void 0===r.pptys&&(r.pptys=[]),r.pptys.push(parseFloat(n))):r[s(t)]=parseFloat(n)),e.objstack.push(r)}function v(e,t,n){let r=e.objstack.pop();"type"in r&&("mesh"===r.type?(void 0===r.pptzs&&(r.pptzs=[]),r.pptzs.push(parseFloat(n))):r[s(t)]=parseFloat(n)),e.objstack.push(r)}function x(e,t,n){let r=e.objstack.pop();if("type"in r)if("lwpolyline"===r.type){let e=r.bulgs;void 0!==e&&r.pptxs.length===e.length&&(e[e.length-1]=parseFloat(n))}else r[s(t)]=parseFloat(n);e.objstack.push(r)}function b(e,t,n){let r=e.objstack.pop();if("type"in r)if("mesh"===r.type){let e=r.state;switch(t){case 91:r[s(t)]=parseFloat(n),r.state=1;break;case 92:1===e?(r.vlen=parseFloat(n),r.state=2):(r.plen=parseFloat(n),r.state=6);break;case 93:r[s(t)]=parseFloat(n),r.state=3;break;case 94:r[s(t)]=parseFloat(n),r.state=4;break;case 95:r[s(t)]=parseFloat(n),r.state=5;break;default:r.state=7}}else r[s(t)]=parseFloat(n);e.objstack.push(r)}function w(e,t,n){let r=e.objstack.pop();if("type"in r)if("mesh"===r.type)switch(r.state){case 3:void 0===r.fvals&&(r.fvals=[]),r.fvals.push(parseFloat(n));break;case 4:void 0===r.evals&&(r.evals=[]),r.evals.push(parseFloat(n))}else r[s(t)]=parseFloat(n);e.objstack.push(r)}function D(e,t,n){let r=e.objstack.pop();"type"in r&&(r[s(t)]=n),e.objstack.push(r)}function E(e,t,n){let r=e.objstack.pop();"type"in r&&void 0===r[s(t)]&&(r[s(t)]=n),e.objstack.push(r)}function C(e,t){let n=o.reader(t);return n.on("error",l),n.on("start",c),n.on("end",h),n.absorb(0,p),n.absorb(1,D),n.absorb(2,E),n.absorb(3,E),n.absorb(6,D),n.absorb(7,D),n.absorb(8,D),n.absorb(9,f),n.absorb(10,g),n.absorb(11,m),n.absorb(12,m),n.absorb(13,m),n.absorb(20,y),n.absorb(21,m),n.absorb(22,m),n.absorb(23,m),n.absorb(30,v),n.absorb(31,m),n.absorb(32,m),n.absorb(33,m),n.absorb(39,m),n.absorb(40,m),n.absorb(41,m),n.absorb(42,x),n.absorb(50,m),n.absorb(51,m),n.absorb(62,d),n.absorb(70,d),n.absorb(71,d),n.absorb(72,d),n.absorb(73,d),n.absorb(74,d),n.absorb(75,d),n.absorb(90,w),n.absorb(91,b),n.absorb(92,b),n.absorb(93,b),n.absorb(94,b),n.absorb(95,b),n.absorb(210,d),n.absorb(220,d),n.absorb(230,d),n.objstack=[],n.objstack.push({type:"dxf"}),n.write(e).close(),n}t.exports={deserialize:function(e,t,n){const i={version:"0.0.1",output:"jscad",strict:!0,colorindex:r,dxf:{angdir:0,insunits:4,pfacevmax:4}};return"jscad"===(n=Object.assign({},i,n)).output?function(e,t,n){let r=C(e,n),i=`// Produced by JSCAD IO Library : DXF Deserialization (${n.version})\n\n`;return i+=u(r,n),i}(e,0,n):function(e,t,n){let r=C(e,n);return a(r,n)}(e,0,n)}}},{"./DxfReader":82,"./autocad":83,"./instantiate":85,"./translate":86}],85:[function(e,t,n){const{CSG:r,CAG:i}=e("@jscad/csg"),{BYBLOCK:s,BYLAYER:o}=e("./autocad");function a(e,t,n){let i=[];if(i.push(new r.Vertex(new r.Vector3D([e.pptx,e.ppty,e.pptz]))),i.push(new r.Vertex(new r.Vector3D([e.sptx,e.spty,e.sptz]))),i.push(new r.Vertex(new r.Vector3D([e.tptx,e.tpty,e.tptz]))),e.fptx){let t=!1;e.tptx!==e.fptx&&(t=!0),e.tpty!==e.fpty&&(t=!0),e.tptz!==e.fptz&&(t=!0),t&&i.push(new r.Vertex(new r.Vector3D([e.fptx,e.fpty,e.fptz])))}let s=y(g(e,t),n.colorindex);return new r.Polygon(i,s)}function u(e,t,n){let i=null;if(e.pptz===e.sptz&0===e.pptz){let t=new r.Vector2D([e.pptx,e.ppty]),n=new r.Vector2D([e.sptx,e.spty]);i=r.Line2D.fromPoints(t,n)}else{let t=new r.Vector3D([e.pptx,e.ppty,e.pptz]),n=new r.Vector3D([e.sptx,e.spty,e.sptz]);i=r.Line3D.fromPoints(t,n)}return i}function l(e){const t=parseInt("00000000000100000",2),n=parseInt("00000000001000000",2),i=parseInt("00000000010000000",2);let s=e.lflg,o=null;return(s&t)===t||(s&n)===n?o=new r.Vector3D([e.pptx,e.ppty,e.pptz]):(s&i)===i?(o=new r.Vector3D([e.pptx,e.ppty,e.pptz]),o.fvia=e.fvia,o.fvib=e.fvib,o.fvic=e.fvic,o.fvid=e.fvid):(o=new r.Vector2D(e.pptx,e.ppty),o.bulg=e.bulg),o}function c(e,t,n,i){if(0===i)e=e.appendPoint([t,n]);else{let s=e.points[e.points.length-1],o=new r.Vector2D(t,n),a=s.distanceTo(o)*((1+Math.pow(i,2))/(4*i)),u=i<0,l=!1,c=Math.atan(i)/(Math.PI/180)*4;e=e.appendArc([t,n],{radius:a,xaxisrotation:c,clockwise:u,large:l})}return e}function h(e,t,n){const s=parseInt("00000000000000001",2);let o=e.vlen,a=e.pptxs,u=e.pptys,l=e.bulgs,h=e.lflg,p=new r.Path2D,f=(h&s)===s;return o!==a.length||o!==u.length||o!==l.length?p:(a.forEach((function(e,t,n){let r=0;t>0&&(r=l[t-1]),p=c(p,a[t],u[t],r)})),f?(p=c(p,a[0],u[0],l[o-1]),p=p.close(),i.fromPoints(p.points)):p)}function p(e,t,n){e.lthk;let i=e.pptx,s=e.ppty,o=e.swid,a=e.ang0,u=e.ang1,l=r.defaultResolution2D;return r.Path2D.arc({center:[i,s],radius:o,startangle:a,endangle:u,resolution:l})}function f(e,t,n){let s=e.lthk,o=e.pptx,a=e.ppty,u=e.swid,l=r.defaultResolution2D;return 0===s?i.circle({center:[o,a],radius:u,resolution:l}):i.circle({center:[o,a],radius:u,resolution:l}).extrude({offset:[0,0,s]})}function d(e,t,n){let s=e.pptx,o=e.ppty,a=e.pptz,u=e.sptx,l=e.spty,c=e.sptz,h=e.swid,p=r.defaultResolution2D;if(0===a&&0===c){let e=new r.Vector2D(0,0),t=new r.Vector2D(u,l),n=e.distanceTo(t),a=n*h,c=180*Math.atan2(l,u)/Math.PI;return c<r.EPS&&(c=0),i.ellipse({center:[0,0],radius:[n,a],resolution:p}).rotateZ(c).translate([s,o])}}function m(e,t,n){let i=e.vlen,s=e.pptxs,o=e.pptys,a=e.pptzs,u=e.flen,l=e.fvals,c=y(g(e,t),n.colorindex);r._CSGDEBUG=!1;let h=[];if(i===s.length&&i===o.length&&i===a.length&&u===l.length){let e=function(e){let t=[],n=0;for(;n<e.length;){let r=e[n++],i=[];for(;r>0;)i.push(e[n++]),r--;t.push(i)}return t}(l),t=function(e,t,n){let r=[],i=0;for(;i<e.length;){let s=e[i],o=t[i],a=n[i];r.push([s,o,a]),i++}return r}(s,o,a),i=0;for(;i<e.length;){let s=e[i],o=[],a=[],u=0;for(;u<s.length;){let e=s[u],n=new r.Vector3D(t[e]);o.push(n);let i=new r.Vertex(n);a.push(i),u++}1===n.dxf.angdir&&(a=a.reverse());let l=new r.Polygon(a,c);h.push(l),i++}}return r.fromPolygons(h)}function g(e,t){let n=e.cnmb||-1;if(n===o){n=-1;let r=function(e,t){let n=e.lnam||"0";for(let e of t)if(e.name===n)return e;return null}(e,t);null!==r&&(n=r.cnmb||-1)}else n===s&&(n=-1);return n}function y(e,t){if(e<0)return null;let n=t[e=function(e,t){let n=e%t;return Math.floor(n>=0?n:n+t)}(e,t.length)];return new r.Polygon.Shared(n)}function v(e){const t=parseInt("00000000000000001",2),n=parseInt("00000000000001000",2),i=parseInt("00000000000010000",2);let s=e.lflg,o=null;if((s&n)===n)o=null;else if((s&i)===i)o=new r;else{let e=(s&t)===t;o=new r.Path2D([],e)}return o}function x(e,t,n,i,s){return t instanceof r.Path2D&&e.push(new r.Path2D(i,t.closed)),t instanceof r&&e.push(r.fromPolygons(n)),null}t.exports={instantiatePolygon:a,instantiateVector:l,instantiateAsciiDxf:function(e,t){let n=[],i=null,s=[],o=[],c=[],g=null;for(let y of e.objstack)if(g=null,"type"in y){switch(y.type){case"dxf":default:break;case"layer":i=x(o,i,s,c),n.push(y);break;case"variable":case"seqend":i=x(o,i,s,c);break;case"3dface":g=a(y,n,t),null===i&&(i=new r);break;case"mesh":i=x(o,i,s,c),o.push(m(y,n,t));break;case"arc":i=x(o,i,s,c),o.push(p(y));break;case"circle":i=x(o,i,s,c),o.push(f(y));break;case"ellipse":i=x(o,i,s,c),o.push(d(y));break;case"line":i=x(o,i,s,c),o.push(u(y));break;case"polyline":null===i&&(i=v(y));break;case"vertex":g=l(y);break;case"lwpolyline":i=x(o,i,s,c),o.push(h(y))}g instanceof r.Polygon&&s.push(g),g instanceof r.Vector3D&&c.push(g),g instanceof r.Vector2D&&c.push(g)}return i=x(o,i,s,c),o}}},{"./autocad":83,"@jscad/csg":22}],86:[function(e,t,n){const{CSG:r}=e("@jscad/csg"),{BYBLOCK:i,BYLAYER:s}=e("./autocad"),{instantiatePolygon:o,instantiateVector:a}=e("./instantiate");function u(e){return new r.Vertex(e)}function l(e){return`new CSG.Vector2D(${e.x},${e.y})`}function c(e){return`${e.x},${e.y},${e.z}`}function h(e){let t="createPolygon([";for(let n of e.vertices)t+=`${p(n)},`;var n;return t+=`],${function(e){let t="null";if(null!==e&&null!==e.color){let n=e.color;t=`[${n[0]},${n[1]},${n[2]},${n[3]}]`}return t}(e.shared)},${n=e.plane,`[${c(n.normal)},${n.w}]`})`,t}function p(e){return`[${c(e.pos)}]`}function f(e,t,n){let i=e.name,s="";if(e.pptz===e.sptz&0===e.pptz){let t=new r.Vector2D([e.pptx,e.ppty]),n=new r.Vector2D([e.sptx,e.spty]);s=`  let ${i} = CSG.Line2D.fromPoints(${l(t)},${l(n)})\n`}else{let t=new r.Vector3D([e.pptx,e.ppty,e.pptz]),n=new r.Vector3D([e.sptx,e.spty,e.sptz]);s=`  let ${i} = CSG.Line3D.fromPoints(${c(t)},${c(n)})\n`}e.script=s,D(e,t)}function d(e,t,n,i,s,o){if(0===i)e+=`.appendPoint( [${t},${n}] )`;else{let a=new r.Vector2D(s,o),u=new r.Vector2D(t,n),l=i<0,c=!1;e+=`.appendArc([${t},${n}],{radius: ${a.distanceTo(u)*((1+Math.pow(i,2))/(4*i))},xaxisrotation: ${Math.atan(i)/(Math.PI/180)*4},clockwise: ${l},large: ${c},resolution: ${r.defaultResolution2D}})`}return e}function m(e,t,n){const r=parseInt("00000000000000001",2);let i=e.vlen,s=e.pptxs,o=e.pptys,a=e.bulgs,u=e.lflg,l=e.name,c=`  let ${l} = new CSG.Path2D()\n`,h=(u&r)===r;if(i===s.length&&i===o.length&&i===a.length){if(c+=`  ${l} = ${l}`,s.forEach((function(e,t,n){let r=0,i=0,u=0;t>0&&(r=a[t-1],i=s[t-1],u=o[t-1]),c=d(c,s[t],o[t],r,i,u)})),h){let e=a[i-1],t=s[i-1],n=o[i-1];c=d(c,s[0],o[0],e,t,n),c+=`\n  ${l} = ${l}.close()\n  ${l} = CAG.fromPoints(${l}.points)\n`}else c+="\n";e.script=c,D(e,t)}}function g(e,t,n){let i=e.lthk,s=e.pptx,o=e.ppty,a=(e.pptz,e.swid),u=e.ang0,l=e.ang1,c=e.name;if(0===i){let n=`  let ${c} = CSG.Path2D.arc({center: [${s},${o}],radius: ${a},startangle: ${u},endangle: ${l}, resolution: ${r.defaultResolution2D}})\n`;return e.script=n,void D(e,t)}}function y(e,t,n){let i=e.lthk,s=e.pptx,o=e.ppty,a=(e.pptz,e.swid),u=e.name,l=r.defaultResolution2D;if(0===i){let n=`  let ${u} = CAG.circle({center: [${s},${o}],radius: ${a},resolution: ${l}})\n`;return e.script=n,void D(e,t)}let c=`  let ${u} = CAG.circle({center: [${s},${o}],radius: ${a},resolution: ${l}).extrude({offset: [0,0,${i}]})\n`;e.script=c,D(e,t)}function v(e,t,n){let i=e.pptx,s=e.ppty,o=e.pptz,a=e.sptx,u=e.spty,l=e.sptz,c=e.swid,h=e.name,p=r.defaultResolution2D;if(0===o&&0===l){let n=new r.Vector2D(0,0),o=new r.Vector2D(a,u),l=n.distanceTo(o),f=l*c,d=180*Math.atan2(u,a)/Math.PI;d<r.EPS&&(d=0);let m=`  let ${h} = CAG.ellipse({center: [0,0],radius: [${l},${f}],resolution: ${p}}).rotateZ(${d}).translate([${i},${s}])\n`;return e.script=m,void D(e,t)}}function x(e,t,n){let i=e.vlen,s=e.pptxs,o=e.pptys,a=e.pptzs,l=e.flen,c=e.fvals,p=C(E(e,t),n.colorindex);r._CSGDEBUG=!1;let f=[];if(i===s.length&&i===o.length&&i===a.length&&l===c.length){let e=function(e){let t=[],n=0;for(;n<e.length;){let r=e[n++],i=[];for(;r>0;)i.push(e[n++]),r--;t.push(i)}return t}(c),t=function(e,t,n){let r=[],i=0;for(;i<e.length;){let s=e[i],o=t[i],a=n[i];r.push([s,o,a]),i++}return r}(s,o,a),i=0;for(;i<e.length;){let s=e[i],o=[],a=[],l=0;for(;l<s.length;){let e=s[l],n=new r.Vector3D(t[e]);o.push(n);let i=u(n);a.push(i),l++}1===n.dxf.angdir&&(a=a.reverse());let c=new r.Polygon(a,p);f.push(c),i++}}let d=e.name,m=`  const ${d}_polygons = [\n`;for(let e of f)m+="    "+h(e)+",\n";return m+=`  ]\n  let ${d} = CSG.fromPolygons(${d}_polygons)\n`,e.script=m,D(e,t),null}function b(e,t){let n=e.lnam||"0";for(let e of t)if(e.name===n)return e;return null}function w(e){for(let t of e)if("0"===t.name)return t;let t={type:"layer",lnam:"layer0",name:"0",lscl:1,visb:0,spac:0,objects:[]};return e.push(t),t}function D(e,t){let n=b(e,t);null===n&&(n=w(t)),"objects"in n||(n.objects=[]),n.objects.push(e)}function E(e,t){let n=e.cnmb||-1;if(n===s){n=-1;let r=b(e,t);null!==r&&(n=r.cnmb||-1)}return n}function C(e,t){if(e<1)return null;let n=t[(e=function(e,t){let n=e%t;return Math.floor(n>=0?n:n+t)}(e,t.length))-1];return new r.Polygon.Shared.fromColor([n[0]/255,n[1]/255,n[2]/255,n[3]/255])}function S(e){const t=parseInt("00000000000000001",2),n=parseInt("00000000000001000",2),r=parseInt("00000000000010000",2),i=parseInt("00000000000100000",2),s=parseInt("00000000001000000",2);let o=e.lflg,a=null;if((o&n)===n)a={type:"3dline",isclosed:(o&t)===t};else if((o&r)===r){a={type:"3dpolymesh"},a.fvia=e.fvia,a.fvib=e.fvib;let n=(o&t)===t;a.closedM=n,n=(o&i)===i,a.closedN=n}else(o&s)===s?(a={type:"3dpolyfaces"},a.fvia=e.fvia,a.fvib=e.fvib):a={type:"2dline",isclosed:(o&t)===t};return"cnmb"in e&&(a.cnmb=e.cnmb),"lnam"in e&&(a.lnam=e.lnam),a}function A(e,t,n,i){if(null===e)return null;let s=e.type;if("2dline"===s)return function(e,t,n,r){e.vlen=n.length,e.pptxs=[],e.pptys=[],e.bulgs=[];for(let t of n)e.pptxs.push(t.x),e.pptys.push(t.y),e.bulgs.push(t.bulg);return e.closed?e.lflg=parseInt("00000000000000001",2):e.lflg=0,m(e,t),null}(e,t,n);if("3dline"===s)return null;if("3dpolymesh"===s){let s=e.fvia,o=e.fvib,a=(n.length,function(e,t,n,i,s){function o(e,r){return n[(e-1)*t+(r-1)]}let a=[];if(e*t!==n.length)return a;if(e<2|t<2)return a;let l=1;for(;l<e;){let e=1;for(;e<t;){let t=[u(o(l,e)),u(o(l+1,e)),u(o(l+1,e+1)),u(o(l,e+1))];1===s.dxf.angdir&&(t=t.reverse());let n=new r.Polygon(t,i);Number.isFinite(n.plane.w)&&a.push(n),e++}l++}return a}(s,o,n,C(E(e,t),i.colorindex),i));n=a}if("3dpolyfaces"===s&&"fvia"in e){let s=function(e,t,n,i,s){let o=[];if(e+t!==n.length)return o;let a=e;for(;a<n.length;){let e=n[a],t=[Math.abs(e.fvia),Math.abs(e.fvib),Math.abs(e.fvic),Math.abs(e.fvid)],l=[];t[0]>0&&(l.push(u(n[t[0]-1])),t[1]>0&&(l.push(u(n[t[1]-1])),t[2]>0&&(l.push(u(n[t[2]-1])),t[3]>0&&l.push(u(n[t[3]-1]))))),l.length>2&&(1===s.dxf.angdir&&(l=l.reverse()),o.push(new r.Polygon(l,i))),a++}return o}(e.fvia,e.fvib,n,C(E(e,t),i.colorindex),i);n=s}let o=e.name,a=`  const ${o}_polygons = [\n`;for(let e of n)a+="    "+h(e)+",\n";return a+=`  ]\n  let ${o} = CSG.fromPolygons(${o}_polygons)\n`,e.script=a,D(e,t),null}function T(e,t){"$ANGDIR"===(e.name||"Unknown")&&"lflg"in e&&(t.dxf.angdir=e.lflg)}t.exports=function(e,t){let n=[],i=null,s=[],u=0;w(n);let l=null;for(let c of e.objstack)if(l=null,"type"in c){switch("name"in c?(name=c.name,name=name.replace(/ /g,"_"),name=name.replace(/-/g,"_"),name=name.replace(/\./g,"_"),c.name=name):(c.name="jscad"+u,u+=1),c.type){case"dxf":default:break;case"layer":i=A(i,n,s,t),s=[],c.objects=[],c.lnam="layer"+n.length,n.push(c);break;case"variable":i=A(i,n,s,t),s=[],T(c,t);break;case"3dface":l=o(c,n,t),null===i&&(i={type:"3dfaces"},i.name="jscad"+u,u+=1);break;case"mesh":i=A(i,n,s,t),s=[],x(c,n,t);break;case"arc":i=A(i,n,s,t),s=[],g(c,n);break;case"circle":i=A(i,n,s,t),y(c,n),s=[];break;case"ellipse":i=A(i,n,s,t),s=[],v(c,n);break;case"line":i=A(i,n,s,t),s=[],f(c,n);break;case"polyline":null===i&&(i=S(c),i.name="jscad"+u,u+=1);break;case"vertex":l=a(c);break;case"seqend":i=A(i,n,s,t),s=[];break;case"lwpolyline":i=A(i,n,s,t),s=[],m(c,n)}l instanceof r.Polygon&&s.push(l),l instanceof r.Vector3D&&s.push(l),l instanceof r.Vector2D&&s.push(l)}i=A(i,n,s,t);let c="function main() {\n  let layers = []\n  return layers.concat(";return n.forEach((function(e){let t=e.lnam||"Unknown";c+=`${t}(),`})),c+="[])\n}\n",c+="function createVertex(point) {\n  return new CSG.Vertex(new CSG.Vector3D(point[0],point[1],point[2]))\n}\nfunction createPlane(pointandw) {\n  return new CSG.Plane(new CSG.Vector3D(pointandw[0],pointandw[1],pointandw[2]),pointandw[3])\n}\nfunction createPolygon(listofpoints,color,pointandw) {\n  let vertices = []\n  for (let point of listofpoints) {\n    vertices.push(createVertex(point))\n  }\n  let shared = new CSG.Polygon.Shared(color)\n  let plane = createPlane(pointandw)\n  return new CSG.Polygon(vertices,shared,plane)\n}\n",n.forEach((function(e){c+=function(e){let t=`function ${e.lnam||"Unknown"}() {\n`;for(let n of e.objects)t+=n.script;t+="  return [";for(let n of e.objects)t+=n.name+",";return t+="]\n}\n",t}(e)})),c}},{"./autocad":83,"./instantiate":85,"@jscad/csg":22}],87:[function(e,t,n){t.exports={dxfHeaders:function(){return"  0\nSECTION\n  2\nHEADER\n  9\n$ACADVER\n  1\nAC1027\n  9\n$ACADMAINTVER\n 70\n8\n  9\n$DWGCODEPAGE\n  3\nANSI_1252\n  9\n$LASTSAVEDBY\n  1\nunknown\n  9\n$REQUIREDVERSIONS\n160\n0\n  9\n$INSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$EXTMIN\n 10\n1e+20\n 20\n1e+20\n 30\n1e+20\n  9\n$EXTMAX\n 10\n-1e+20\n 20\n-1e+20\n 30\n-1e+20\n  9\n$LIMMIN\n 10\n0.0\n 20\n0.0\n  9\n$LIMMAX\n 10\n12.0\n 20\n9.0\n  9\n$ORTHOMODE\n 70\n0\n  9\n$REGENMODE\n 70\n1\n  9\n$FILLMODE\n 70\n1\n  9\n$QTEXTMODE\n 70\n0\n  9\n$MIRRTEXT\n 70\n0\n  9\n$LTSCALE\n 40\n1.0\n  9\n$ATTMODE\n 70\n1\n  9\n$TEXTSIZE\n 40\n0.2\n  9\n$TRACEWID\n 40\n0.05\n  9\n$TEXTSTYLE\n  7\nNotes\n  9\n$CLAYER\n  8\n0\n  9\n$CELTYPE\n  6\nByLayer\n  9\n$CECOLOR\n 62\n256\n  9\n$CELTSCALE\n 40\n1.0\n  9\n$DISPSILH\n 70\n0\n  9\n$DIMSCALE\n 40\n1.0\n  9\n$DIMASZ\n 40\n3.0\n  9\n$DIMEXO\n 40\n1.5\n  9\n$DIMDLI\n 40\n6.0\n  9\n$DIMRND\n 40\n0.0\n  9\n$DIMDLE\n 40\n0.0\n  9\n$DIMEXE\n 40\n3.0\n  9\n$DIMTP\n 40\n0.0\n  9\n$DIMTM\n 40\n0.0\n  9\n$DIMTXT\n 40\n3.0\n  9\n$DIMCEN\n 40\n3.0\n  9\n$DIMTSZ\n 40\n0.0\n  9\n$DIMTOL\n 70\n0\n  9\n$DIMLIM\n 70\n0\n  9\n$DIMTIH\n 70\n0\n  9\n$DIMTOH\n 70\n0\n  9\n$DIMSE1\n 70\n0\n  9\n$DIMSE2\n 70\n0\n  9\n$DIMTAD\n 70\n1\n  9\n$DIMZIN\n 70\n3\n  9\n$DIMBLK\n  1\n\n  9\n$DIMASO\n 70\n1\n  9\n$DIMSHO\n 70\n1\n  9\n$DIMPOST\n  1\n\n  9\n$DIMAPOST\n  1\n\n  9\n$DIMALT\n 70\n0\n  9\n$DIMALTD\n 70\n2\n  9\n$DIMALTF\n 40\n25.4\n  9\n$DIMLFAC\n 40\n1.0\n  9\n$DIMTOFL\n 70\n0\n  9\n$DIMTVP\n 40\n0.0\n  9\n$DIMTIX\n 70\n0\n  9\n$DIMSOXD\n 70\n0\n  9\n$DIMSAH\n 70\n0\n  9\n$DIMBLK1\n  1\n\n  9\n$DIMBLK2\n  1\n\n  9\n$DIMSTYLE\n  2\nCivil-Metric\n  9\n$DIMCLRD\n 70\n0\n  9\n$DIMCLRE\n 70\n0\n  9\n$DIMCLRT\n 70\n0\n  9\n$DIMTFAC\n 40\n1.0\n  9\n$DIMGAP\n 40\n2.0\n  9\n$DIMJUST\n 70\n0\n  9\n$DIMSD1\n 70\n0\n  9\n$DIMSD2\n 70\n0\n  9\n$DIMTOLJ\n 70\n1\n  9\n$DIMTZIN\n 70\n0\n  9\n$DIMALTZ\n 70\n0\n  9\n$DIMALTTZ\n 70\n0\n  9\n$DIMUPT\n 70\n0\n  9\n$DIMDEC\n 70\n2\n  9\n$DIMTDEC\n 70\n2\n  9\n$DIMALTU\n 70\n2\n  9\n$DIMALTTD\n 70\n2\n  9\n$DIMTXSTY\n  7\nStandard\n  9\n$DIMAUNIT\n 70\n0\n  9\n$DIMADEC\n 70\n2\n  9\n$DIMALTRND\n 40\n0.0\n  9\n$DIMAZIN\n 70\n2\n  9\n$DIMDSEP\n 70\n46\n  9\n$DIMATFIT\n 70\n3\n  9\n$DIMFRAC\n 70\n1\n  9\n$DIMLDRBLK\n  1\n\n  9\n$DIMLUNIT\n 70\n2\n  9\n$DIMLWD\n 70\n-2\n  9\n$DIMLWE\n 70\n-2\n  9\n$DIMTMOVE\n 70\n0\n  9\n$DIMFXL\n 40\n1.0\n  9\n$DIMFXLON\n 70\n0\n  9\n$DIMJOGANG\n 40\n0.785398163397\n  9\n$DIMTFILL\n 70\n0\n  9\n$DIMTFILLCLR\n 70\n0\n  9\n$DIMARCSYM\n 70\n0\n  9\n$DIMLTYPE\n  6\n\n  9\n$DIMLTEX1\n  6\n\n  9\n$DIMLTEX2\n  6\n\n  9\n$DIMTXTDIRECTION\n 70\n0\n  9\n$LUNITS\n 70\n2\n  9\n$LUPREC\n 70\n4\n  9\n$SKETCHINC\n 40\n0.1\n  9\n$FILLETRAD\n 40\n0.0\n  9\n$AUNITS\n 70\n4\n  9\n$AUPREC\n 70\n5\n  9\n$MENU\n  1\n.\n  9\n$ELEVATION\n 40\n0.0\n  9\n$PELEVATION\n 40\n0.0\n  9\n$THICKNESS\n 40\n0.0\n  9\n$LIMCHECK\n 70\n0\n  9\n$CHAMFERA\n 40\n0.0\n  9\n$CHAMFERB\n 40\n0.0\n  9\n$CHAMFERC\n 40\n0.0\n  9\n$CHAMFERD\n 40\n0.0\n  9\n$SKPOLY\n 70\n0\n  9\n$TDCREATE\n 40\n2457986.69756\n  9\n$TDUCREATE\n 40\n2455631.2632\n  9\n$TDUPDATE\n 40\n2457986.69756\n  9\n$TDUUPDATE\n 40\n2456436.43179\n  9\n$TDINDWG\n 40\n0.0003490741\n  9\n$TDUSRTIMER\n 40\n0.0003487153\n  9\n$USRTIMER\n 70\n1\n  9\n$ANGBASE\n 50\n0.0\n  9\n$ANGDIR\n 70\n0\n  9\n$PDMODE\n 70\n0\n  9\n$PDSIZE\n 40\n0.0\n  9\n$PLINEWID\n 40\n0.0\n  9\n$SPLFRAME\n 70\n0\n  9\n$SPLINETYPE\n 70\n6\n  9\n$SPLINESEGS\n 70\n8\n  9\n$HANDSEED\n  5\n5C7\n  9\n$SURFTAB1\n 70\n6\n  9\n$SURFTAB2\n 70\n6\n  9\n$SURFTYPE\n 70\n6\n  9\n$SURFU\n 70\n6\n  9\n$SURFV\n 70\n6\n  9\n$UCSBASE\n  2\n\n  9\n$UCSNAME\n  2\n\n  9\n$UCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$UCSORTHOREF\n  2\n\n  9\n$UCSORTHOVIEW\n 70\n0\n  9\n$UCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$UCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSBASE\n  2\n\n  9\n$PUCSNAME\n  2\n\n  9\n$PUCSORG\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSXDIR\n 10\n1.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSYDIR\n 10\n0.0\n 20\n1.0\n 30\n0.0\n  9\n$PUCSORTHOREF\n  2\n\n  9\n$PUCSORTHOVIEW\n 70\n0\n  9\n$PUCSORGTOP\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBOTTOM\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGLEFT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGRIGHT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGFRONT\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PUCSORGBACK\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$USERI1\n 70\n0\n  9\n$USERI2\n 70\n0\n  9\n$USERI3\n 70\n0\n  9\n$USERI4\n 70\n0\n  9\n$USERI5\n 70\n0\n  9\n$USERR1\n 40\n0.0\n  9\n$USERR2\n 40\n0.0\n  9\n$USERR3\n 40\n0.0\n  9\n$USERR4\n 40\n0.0\n  9\n$USERR5\n 40\n0.0\n  9\n$WORLDVIEW\n 70\n1\n  9\n$SHADEDGE\n 70\n3\n  9\n$SHADEDIF\n 70\n70\n  9\n$TILEMODE\n 70\n1\n  9\n$MAXACTVP\n 70\n64\n  9\n$PINSBASE\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  9\n$PLIMCHECK\n 70\n0\n  9\n$PEXTMIN\n 10\n0.628866766397\n 20\n0.799999952316\n 30\n0.0\n  9\n$PEXTMAX\n 10\n9.02886638493\n 20\n7.19999957085\n 30\n0.0\n  9\n$PLIMMIN\n 10\n-0.700541819174\n 20\n-0.228100386192\n  9\n$PLIMMAX\n 10\n10.2994579405\n 20\n8.27189937351\n  9\n$UNITMODE\n 70\n0\n  9\n$VISRETAIN\n 70\n1\n  9\n$PLINEGEN\n 70\n0\n  9\n$PSLTSCALE\n 70\n1\n  9\n$TREEDEPTH\n 70\n3020\n  9\n$CMLSTYLE\n  2\nStandard\n  9\n$CMLJUST\n 70\n0\n  9\n$CMLSCALE\n 40\n1.0\n  9\n$PROXYGRAPHICS\n 70\n1\n  9\n$MEASUREMENT\n 70\n1\n  9\n$CELWEIGHT\n370\n-1\n  9\n$ENDCAPS\n280\n0\n  9\n$JOINSTYLE\n280\n0\n  9\n$LWDISPLAY\n290\n0\n  9\n$INSUNITS\n 70\n4\n  9\n$HYPERLINKBASE\n  1\n\n  9\n$STYLESHEET\n  1\n\n  9\n$XEDIT\n290\n1\n  9\n$CEPSNTYPE\n380\n0\n  9\n$PSTYLEMODE\n290\n1\n  9\n$FINGERPRINTGUID\n  2\n{39DB1BDD-BC6C-46D3-A333-DFCC0DC4782D}\n  9\n$VERSIONGUID\n  2\n{69EEBB2D-7039-498F-9366-3F994E4A07E7}\n  9\n$EXTNAMES\n290\n1\n  9\n$PSVPSCALE\n 40\n0.0\n  9\n$OLESTARTUP\n290\n0\n  9\n$SORTENTS\n280\n127\n  9\n$INDEXCTL\n280\n0\n  9\n$HIDETEXT\n280\n1\n  9\n$XCLIPFRAME\n280\n0\n  9\n$HALOGAP\n280\n0\n  9\n$OBSCOLOR\n 70\n257\n  9\n$OBSLTYPE\n280\n0\n  9\n$INTERSECTIONDISPLAY\n280\n0\n  9\n$INTERSECTIONCOLOR\n 70\n257\n  9\n$DIMASSOC\n280\n2\n  9\n$PROJECTNAME\n  1\n\n  9\n$CAMERADISPLAY\n290\n0\n  9\n$LENSLENGTH\n 40\n50.0\n  9\n$CAMERAHEIGHT\n 40\n0.0\n  9\n$STEPSPERSEC\n 40\n2.0\n  9\n$STEPSIZE\n 40\n6.0\n  9\n$3DDWFPREC\n 40\n2.0\n  9\n$PSOLWIDTH\n 40\n0.25\n  9\n$PSOLHEIGHT\n 40\n4.0\n  9\n$LOFTANG1\n 40\n1.57079632679\n  9\n$LOFTANG2\n 40\n1.57079632679\n  9\n$LOFTMAG1\n 40\n0.0\n  9\n$LOFTMAG2\n 40\n0.0\n  9\n$LOFTPARAM\n 70\n7\n  9\n$LOFTNORMALS\n280\n1\n  9\n$LATITUDE\n 40\n37.795\n  9\n$LONGITUDE\n 40\n-122.394\n  9\n$NORTHDIRECTION\n 40\n0.0\n  9\n$TIMEZONE\n 70\n-8000\n  9\n$LIGHTGLYPHDISPLAY\n280\n1\n  9\n$TILEMODELIGHTSYNCH\n280\n1\n  9\n$CMATERIAL\n347\n96\n  9\n$SOLIDHIST\n280\n1\n  9\n$SHOWHIST\n280\n1\n  9\n$DWFFRAME\n280\n2\n  9\n$DGNFRAME\n280\n0\n  9\n$REALWORLDSCALE\n290\n1\n  9\n$INTERFERECOLOR\n 62\n1\n  9\n$INTERFEREOBJVS\n345\nA3\n  9\n$INTERFEREVPVS\n346\nA0\n  9\n$CSHADOW\n280\n0\n  9\n$SHADOWPLANELOCATION\n 40\n0.0\n  0\nENDSEC"},dxfClasses:function(){return'  0\nSECTION\n  2\nCLASSES\n  0\nCLASS\n  1\nACDBDICTIONARYWDFLT\n  2\nAcDbDictionaryWithDefault\n  3\nObjectDBX Classes\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nDICTIONARYVAR\n  2\nAcDbDictionaryVar\n  3\nObjectDBX Classes\n 90\n0\n 91\n15\n280\n0\n281\n0\n  0\nCLASS\n  1\nTABLESTYLE\n  2\nAcDbTableStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nMATERIAL\n  2\nAcDbMaterial\n  3\nObjectDBX Classes\n 90\n1153\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nVISUALSTYLE\n  2\nAcDbVisualStyle\n  3\nObjectDBX Classes\n 90\n4095\n 91\n26\n280\n0\n281\n0\n  0\nCLASS\n  1\nSCALE\n  2\nAcDbScale\n  3\nObjectDBX Classes\n 90\n1153\n 91\n17\n280\n0\n281\n0\n  0\nCLASS\n  1\nMLEADERSTYLE\n  2\nAcDbMLeaderStyle\n  3\nACDB_MLEADERSTYLE_CLASS\n 90\n4095\n 91\n3\n280\n0\n281\n0\n  0\nCLASS\n  1\nCELLSTYLEMAP\n  2\nAcDbCellStyleMap\n  3\nObjectDBX Classes\n 90\n1152\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nEXACXREFPANELOBJECT\n  2\nExAcXREFPanelObject\n  3\nEXAC_ESW\n 90\n1025\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nNPOCOLLECTION\n  2\nAcDbImpNonPersistentObjectsCollection\n  3\nObjectDBX Classes\n 90\n1153\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nLAYER_INDEX\n  2\nAcDbLayerIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nSPATIAL_INDEX\n  2\nAcDbSpatialIndex\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nIDBUFFER\n  2\nAcDbIdBuffer\n  3\nObjectDBX Classes\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nDIMASSOC\n  2\nAcDbDimAssoc\n  3\n"AcDbDimAssoc|Product Desc:     AcDim ARX App For Dimension|Company:          Autodesk, Inc.|WEB Address:      www.autodesk.com"\n 90\n0\n 91\n0\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBSECTIONVIEWSTYLE\n  2\nAcDbSectionViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nACDBDETAILVIEWSTYLE\n  2\nAcDbDetailViewStyle\n  3\nObjectDBX Classes\n 90\n1025\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF\n  2\nAcDbRasterImageDef\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nRASTERVARIABLES\n  2\nAcDbRasterVariables\n  3\nISM\n 90\n0\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGEDEF_REACTOR\n  2\nAcDbRasterImageDefReactor\n  3\nISM\n 90\n1\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nIMAGE\n  2\nAcDbRasterImage\n  3\nISM\n 90\n2175\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nPDFDEFINITION\n  2\nAcDbPdfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n0\n  0\nCLASS\n  1\nPDFUNDERLAY\n  2\nAcDbPdfReference\n  3\nObjectDBX Classes\n 90\n4095\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDWFDEFINITION\n  2\nAcDbDwfDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDWFUNDERLAY\n  2\nAcDbDwfReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nCLASS\n  1\nDGNDEFINITION\n  2\nAcDbDgnDefinition\n  3\nObjectDBX Classes\n 90\n1153\n 91\n2\n280\n0\n281\n0\n  0\nCLASS\n  1\nDGNUNDERLAY\n  2\nAcDbDgnReference\n  3\nObjectDBX Classes\n 90\n1153\n 91\n1\n280\n0\n281\n1\n  0\nENDSEC'},dxfTables:function(){return"  0\nSECTION\n  2\nTABLES\n  0\nTABLE\n  2\nVPORT\n  5\n8\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLTYPE\n  5\n5F\n330\n0\n100\nAcDbSymbolTable\n 70\n7\n  0\nLTYPE\n  5\n14\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByBlock\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n15\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nByLayer\n 70\n0\n  3\n\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n16\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nContinuous\n 70\n0\n  3\nSolid line\n 72\n65\n 73\n0\n 40\n0.0\n  0\nLTYPE\n  5\n1B1\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nCENTER\n 70\n0\n  3\nCenter ____ _ ____ _ ____ _ ____ _ ____ _ ____\n 72\n65\n 73\n4\n 40\n2.0\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B2\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nDASHED\n 70\n0\n  3\nDashed __ __ __ __ __ __ __ __ __ __ __ __ __ _\n 72\n65\n 73\n2\n 40\n0.75\n 49\n0.5\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n1B3\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nPHANTOM\n 70\n0\n  3\nPhantom ______  __  __  ______  __  __  ______\n 72\n65\n 73\n6\n 40\n2.5\n 49\n1.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n 49\n0.25\n 74\n0\n 49\n-0.25\n 74\n0\n  0\nLTYPE\n  5\n39E\n330\n5F\n100\nAcDbSymbolTableRecord\n100\nAcDbLinetypeTableRecord\n  2\nHIDDEN\n 70\n0\n  3\nHidden __ __ __ __ __ __ __ __ __ __ __ __ __ __\n 72\n65\n 73\n2\n 40\n9.525\n 49\n6.35\n 74\n0\n 49\n-3.175\n 74\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nLAYER\n  5\n2\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nLAYER\n  5\n10\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\n0\n 70\n0\n 62\n7\n  6\nContinuous\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n1B4\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nView Port\n 70\n0\n 62\n7\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nLAYER\n  5\n21D\n330\n2\n100\nAcDbSymbolTableRecord\n100\nAcDbLayerTableRecord\n  2\nDefpoints\n 70\n0\n 62\n7\n  6\nContinuous\n290\n0\n370\n-3\n390\nF\n347\n98\n348\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nSTYLE\n  5\n3\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n  0\nSTYLE\n  5\n11\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nStandard\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\nDC\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nSTYLE\n  5\n178\n330\n3\n100\nAcDbSymbolTableRecord\n100\nAcDbTextStyleTableRecord\n  2\nNotes\n 70\n0\n 40\n3.0\n 41\n1.0\n 50\n0.0\n 71\n0\n 42\n0.2\n  3\narial.ttf\n  4\n\n  0\nENDTAB\n  0\nTABLE\n  2\nVIEW\n  5\n6\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nUCS\n  5\n7\n330\n0\n100\nAcDbSymbolTable\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nAPPID\n  5\n9\n330\n0\n100\nAcDbSymbolTable\n 70\n12\n  0\nAPPID\n  5\n12\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD\n 70\n0\n  0\nAPPID\n  5\nDD\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnoPO\n 70\n0\n  0\nAPPID\n  5\nDE\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcadAnnotative\n 70\n0\n  0\nAPPID\n  5\nDF\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMJAG\n 70\n0\n  0\nAPPID\n  5\nE0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMTALN\n 70\n0\n  0\nAPPID\n  5\n107\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_MLEADERVER\n 70\n0\n  0\nAPPID\n  5\n1B5\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nAcAecLayerStandard\n 70\n0\n  0\nAPPID\n  5\n1BA\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_EXEMPT_FROM_CAD_STANDARDS\n 70\n0\n  0\nAPPID\n  5\n237\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_DSTYLE_DIMBREAK\n 70\n0\n  0\nAPPID\n  5\n28E\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_PSEXT\n 70\n0\n  0\nAPPID\n  5\n4B0\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nACAD_NAV_VCDISPLAY\n 70\n0\n  0\nAPPID\n  5\n4E3\n330\n9\n100\nAcDbSymbolTableRecord\n100\nAcDbRegAppTableRecord\n  2\nHATCHBACKGROUNDCOLOR\n 70\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nDIMSTYLE\n  5\nA\n330\n0\n100\nAcDbSymbolTable\n 70\n3\n100\nAcDbDimStyleTable\n 71\n3\n340\n242\n340\n27\n340\nE1\n  0\nDIMSTYLE\n105\n27\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nStandard\n 70\n0\n 41\n3.0\n 42\n2.0\n 43\n9.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\nE1\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nAnnotative\n 70\n0\n 40\n0.0\n 41\n3.0\n 42\n2.5\n 43\n10.0\n 44\n5.0\n140\n3.0\n141\n2.0\n147\n2.0\n340\n11\n1001\nAcadAnnotative\n1000\nAnnotativeData\n1002\n{\n1070\n1\n1070\n1\n1002\n}\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n90.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nDIMSTYLE\n105\n242\n330\nA\n100\nAcDbSymbolTableRecord\n100\nAcDbDimStyleTableRecord\n  2\nCivil-Metric\n 70\n0\n 41\n3.0\n 42\n1.5\n 43\n6.0\n 44\n3.0\n 73\n0\n 74\n0\n 77\n1\n 78\n3\n 79\n2\n140\n3.0\n141\n3.0\n147\n2.0\n179\n2\n271\n2\n272\n2\n276\n1\n340\n11\n1001\nACAD_DSTYLE_DIMBREAK\n1070\n391\n1040\n3.0\n1001\nACAD_DSTYLE_DIMJAG\n1070\n388\n1040\n38.0\n1001\nACAD_DSTYLE_DIMTALN\n1070\n392\n1070\n0\n  0\nENDTAB\n  0\nTABLE\n  2\nBLOCK_RECORD\n  5\n1\n330\n0\n100\nAcDbSymbolTable\n 70\n4\n  0\nBLOCK_RECORD\n  5\n1F\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Model_Space\n340\n530\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n58\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n*Paper_Space\n340\n531\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n238\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_ArchTick\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nBLOCK_RECORD\n  5\n23C\n330\n1\n100\nAcDbSymbolTableRecord\n100\nAcDbBlockTableRecord\n  2\n_Open30\n340\n0\n 70\n0\n280\n1\n281\n0\n  0\nENDTAB\n  0\nENDSEC"},dxfBlocks:function(){return"  0\nSECTION\n  2\nBLOCKS\n  0\nBLOCK\n  5\n23A\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_ArchTick\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_ArchTick\n  1\n\n  0\nLWPOLYLINE\n  5\n239\n330\n238\n100\nAcDbEntity\n  8\n0\n  6\nByBlock\n 62\n0\n100\nAcDbPolyline\n 90\n2\n 70\n0\n 43\n0.15\n 10\n-0.5\n 20\n-0.5\n 10\n0.5\n 20\n0.5\n  0\nENDBLK\n  5\n23B\n330\n238\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n20\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Model_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Model_Space\n  1\n\n  0\nENDBLK\n  5\n21\n330\n1F\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n5A\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockBegin\n  2\n*Paper_Space\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n*Paper_Space\n  1\n\n  0\nENDBLK\n  5\n5B\n330\n58\n100\nAcDbEntity\n 67\n1\n  8\n0\n100\nAcDbBlockEnd\n  0\nBLOCK\n  5\n240\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockBegin\n  2\n_Open30\n 70\n0\n 10\n0.0\n 20\n0.0\n 30\n0.0\n  3\n_Open30\n  1\n\n  0\nLINE\n  5\n23D\n330\n23C\n100\nAcDbEntity\n  8\n0\n  6\nByBlock\n 62\n0\n370\n-2\n100\nAcDbLine\n 10\n-1.0\n 20\n0.26794919\n 30\n0.0\n 11\n0.0\n 21\n0.0\n 31\n0.0\n  0\nLINE\n  5\n23E\n330\n23C\n100\nAcDbEntity\n  8\n0\n  6\nByBlock\n 62\n0\n370\n-2\n100\nAcDbLine\n 10\n0.0\n 20\n0.0\n 30\n0.0\n 11\n-1.0\n 21\n-0.26794919\n 31\n0.0\n  0\nLINE\n  5\n23F\n330\n23C\n100\nAcDbEntity\n  8\n0\n  6\nByBlock\n 62\n0\n370\n-2\n100\nAcDbLine\n 10\n0.0\n 20\n0.0\n 30\n0.0\n 11\n-1.0\n 21\n0.0\n 31\n0.0\n  0\nENDBLK\n  5\n241\n330\n23C\n100\nAcDbEntity\n  8\n0\n100\nAcDbBlockEnd\n  0\nENDSEC"},dxfObjects:function(){return"  0\nSECTION\n  2\nOBJECTS\n  0\nDICTIONARY\n  5\nC\n330\n0\n100\nAcDbDictionary\n281\n1\n  3\nACAD_COLOR\n350\n524\n  3\nACAD_GROUP\n350\n525\n  3\nACAD_LAYOUT\n350\n526\n  3\nACAD_MATERIAL\n350\n527\n  3\nACAD_MLEADERSTYLE\n350\n528\n  3\nACAD_MLINESTYLE\n350\n529\n  3\nACAD_PLOTSETTINGS\n350\n52A\n  3\nACAD_PLOTSTYLENAME\n350\n52C\n  3\nACAD_SCALELIST\n350\n52D\n  3\nACAD_TABLESTYLE\n350\n52E\n  3\nACAD_VISUALSTYLE\n350\n52F\n  0\nDICTIONARY\n  5\n524\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n525\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n526\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nModel\n350\n530\n  3\nLayout1\n350\n531\n  0\nDICTIONARY\n  5\n527\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n528\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n529\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52A\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nACDBPLACEHOLDER\n  5\n52B\n330\n52C\n  0\nACDBDICTIONARYWDFLT\n  5\n52C\n330\nC\n100\nAcDbDictionary\n281\n1\n  3\nNormal\n350\n52B\n100\nAcDbDictionaryWithDefault\n340\n52B\n  0\nDICTIONARY\n  5\n52D\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52E\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nDICTIONARY\n  5\n52F\n330\nC\n100\nAcDbDictionary\n281\n1\n  0\nLAYOUT\n  5\n530\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n14.53\n 70\n11952\n 72\n0\n 73\n1\n 74\n0\n  7\n\n 75\n0\n147\n0.069\n148\n114.98\n149\n300.29\n100\nAcDbLayout\n  1\nModel\n 70\n1\n 71\n0\n 10\n0.0\n 20\n0.0\n 11\n12.0\n 21\n9.0\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.0\n 24\n0.0\n 34\n0.0\n 15\n0.0\n 25\n0.0\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n1F\n  0\nLAYOUT\n  5\n531\n330\n526\n100\nAcDbPlotSettings\n  1\n\n  2\nDWFx ePlot (XPS Compatible).pc3\n  4\nANSI_A_(8.50_x_11.00_Inches)\n  6\n\n 40\n5.8\n 41\n17.8\n 42\n5.8\n 43\n17.8\n 44\n215.9\n 45\n279.4\n 46\n0.0\n 47\n0.0\n 48\n0.0\n 49\n0.0\n140\n0.0\n141\n0.0\n142\n1.0\n143\n1.0\n 70\n688\n 72\n0\n 73\n1\n 74\n5\n  7\nacad.ctb\n 75\n16\n147\n1.0\n148\n0.0\n149\n0.0\n100\nAcDbLayout\n  1\nLayout1\n 70\n1\n 71\n1\n 10\n-0.7\n 20\n-0.23\n 11\n10.3\n 21\n8.27\n 12\n0.0\n 22\n0.0\n 32\n0.0\n 14\n0.63\n 24\n0.8\n 34\n0.0\n 15\n9.0\n 25\n7.2\n 35\n0.0\n146\n0.0\n 13\n0.0\n 23\n0.0\n 33\n0.0\n 16\n1.0\n 26\n0.0\n 36\n0.0\n 17\n0.0\n 27\n1.0\n 37\n0.0\n 76\n0\n330\n58\n  0\nENDSEC"}}},{}],88:[function(e,t,n){const{isCAG:r,isCSG:i}=e("@jscad/csg"),{ensureManifoldness:s}=e("@jscad/io-utils"),{dxfHeaders:o,dxfClasses:a,dxfTables:u,dxfBlocks:l,dxfObjects:c}=e("./autocad_AC2017"),h=function(e,t){var n;n=e;let o=(e=Array.isArray(n)?n:[n]).map((function(e,n){if(r(e)){let n=e.getOutlinePaths();return"polyline"===t.cagTo?f(n,t):p(n,t)}if(i(e))return e=s(e),"polyline"===t.csgTo?y(e,t):d(e,t);if(function(e){return!!(e&&"points"in e&&Array.isArray(e.points))}(e)){let n=e.getPoints(),r=e.isClosed();return p([{closed:r,points:n}],t)}return""})),a="  0\nSECTION\n  2\nENTITIES\n";return o.forEach((function(e){e&&(a+=e)})),a+="  0\nENDSEC",a},p=function(e,t){t.statusCallback&&t.statusCallback({progress:0});let n="";return e.map((function(r,i){if(r.points.length<1)return;let s=r.points.length+(r.closed?1:0);n+=`  0\nLWPOLYLINE\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  67\n0\n  100\nAcDbPolyline\n  90\n${s}\n  70\n${r.closed?1:0}\n`;for(let e=0;e<s;e++){let t=e;t>=r.points.length&&(t-=r.points.length);let i=r.points[t];n+=`  10\n${i.x}\n  20\n${i.y}\n`}t.statusCallback&&t.statusCallback({progress:100*i/e.length})})),t.statusCallback&&t.statusCallback({progress:100}),[n]},f=function(e,t){t.statusCallback&&t.statusCallback({progress:0});let n="";return e.map((function(r,i){let s=r.points.length+(r.closed?1:0);n+=`  0\nPOLYLINE\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDb2dPolyline\n`;for(let e=0;e<s;e++){let t=e;t>=r.points.length&&(t-=r.points.length);let i=r.points[t];n+=`  0\nVERTEX\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb2dVertex\n 10\n${i.x}\n 20\n${i.y}\n`}n+=`  0\nSEQEND\n  5\n${b()}\n  100\nAcDbEntity\n`,t.statusCallback&&t.statusCallback({progress:100*i/e.length})})),t.statusCallback&&t.statusCallback({progress:100}),[n]},d=function(e,t){t.statusCallback&&t.statusCallback({progress:0});let n="";return e.polygons.map((function(e,r){m(e).map((function(e,r){n+=g(e,t)}))})),t.statusCallback&&t.statusCallback({progress:100}),[n]},m=e=>{let t=e.vertices.length-2;if(t<1)return[];let n=e.vertices[0],r=[];for(let i=0;i<t;i++)r.push([n,e.vertices[i+1],e.vertices[i+2]]);return r},g=(e,t)=>{let n=e[0].pos,r=e[1].pos,i=e[2].pos,s=e[2].pos;return`  0\n3DFACE\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbFace\n  70\n0\n  10\n${n.x}\n  20\n${n.y}\n  30\n${n.z}\n  11\n${r.x}\n  21\n${r.y}\n  31\n${r.z}\n  12\n${i.x}\n  22\n${i.y}\n  32\n${i.z}\n  13\n${s.x}\n  23\n${s.y}\n  33\n${s.z}\n`},y=function(e,t){t.statusCallback&&t.statusCallback({progress:100}),t.statusCallback&&t.statusCallback({progress:0});let n="",r=v(e.polygons);return r.faces.length>0&&(n+=`  0\nPOLYLINE\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDb3dPolyline\n  70\n64\n  71\n${r.vertices.length}\n  72\n${r.faces.length}\n`,r.vertices.forEach((function(e){n+=`  0\nVERTEX\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n${e[0]}\n  20\n${e[1]}\n  30\n${e[2]}\n  70\n192\n`})),r.faces.forEach((function(e){n+=`  0\nVERTEX\n  5\n${b()}\n  100\nAcDbEntity\n  8\n0\n  100\nAcDbVertex\n  100\nAcDb3dPolylineVertex\n  10\n0\n  20\n0\n  30\n0\n  70\n128\n  71\n${e[0]}\n  72\n${e[1]}\n  73\n${e[2]}\n  74\n${e[3]}\n`}))),[n]},v=function(e){for(var t=[],n=[],r=0;r<e.length;++r){let a=e[r];for(var i=[],s=0;s<a.vertices.length;++s){var o=a.vertices[s].pos;n.push([o.x,o.y,o.z]),i.push(n.length)}for(;i.length<4;)i.push(0);t.push(i)}return{faces:t,vertices:n}};var x=0;function b(){let e="00000"+(++x).toString(16).toUpperCase();return"CAD"+e.substr(e.length-5)}t.exports={serialize:function(e,t){return t=Object.assign({},{cagTo:"lwpolyline",csgTo:"3dface",pathTo:"lwpolyline",statusCallback:null},t),[`999\nDXF generated by JSCAD\n${o(t)}\n${a(t)}\n${u(t)}\n${l(t)}\n${h(e,t)}\n${c(t)}\n  0\nEOF\n`]},mimeType:"application/dxf"}},{"./autocad_AC2017":87,"@jscad/csg":22,"@jscad/io-utils":92}],89:[function(e,t,n){t.exports={deserialize:function(e,t,n){n&&n.statusCallback&&n.statusCallback({progress:0}),n=Object.assign({},{version:"0.0.0",addMetaData:!0,output:"jscad"},n);const{version:r,output:i,addMetaData:s}=n;for(var o=e.split(/[\n]/),a="",u=0,l=[],c=[],h=0,p=[],f=[-100,-100],d=0,m=.35,g=0,y=0;y<o.length;y++){var v=0;if(!o[y].match(/^\s*;/)){for(var x=o[y].split(/\s+/),b=0;b<x.length;b++)if(x[b].match(/G(\d+)/)){var w=parseInt(RegExp.$1);1===w&&u++,90===w&&(l.type="abs"),91===w&&(l.type="rel")}else if(x[b].match(/M(\d+)/)){parseInt(RegExp.$1)}else if(x[b].match(/S([\d\.]+)/))parseInt(RegExp.$1);else if(x[b].match(/([XYZE])([\-\d\.]+)/)){var D=RegExp.$1;let e=parseFloat(RegExp.$2);"abs"===l.type?u&&(l[D]=e):u&&(l[D]+=e),u&&"E"===D&&void 0===c.E&&(c.E=l.E),u&&"E"===D&&l.E-c.E>0&&v++}u&&l.X&&l.Y&&(v&&(!h&&c.X&&c.Y&&p.push("["+(c.X+f[0])+","+(c.Y+f[1])+"]"),p.push("["+(l.X+f[0])+","+(l.Y+f[1])+"]")),!v&&h&&p.length>1&&(a.length&&(a+=",\n\t\t"),l.Z!==g&&(m=l.Z-g,d++),a+="EX(["+p.join(", ")+"],{w: "+1.1*m+", h:"+1.02*m+", fn:1, closed: false}).translate([0,0,"+l.Z+"])",p=[],g=l.Z),h=v,c.X=l.X,c.Y=l.Y,c.Z=l.Z,c.E=l.E),n&&n.statusCallback&&n.statusCallback({progress:100*y/o.length})}}let E=s?`//\n  // producer: OpenJSCAD.org Compatibility${r} GCode deserializer\n  // date: ${new Date}\n  // source: ${t}\n  //\n  `:"";return E+=`// layers: ${d}\n  function main() {\n\tvar EX = function(p,opt) { return rectangular_extrude(p,opt); }\n\treturn [\n    ${a}\n  }\n}\n  `,n&&n.statusCallback&&n.statusCallback({progress:100}),E}}},{}],90:[function(e,t,n){function r(e){this._buffer=e,this._pos=0}r.prototype={readInt8:function(){return this._decodeInt(8,!0)},readUInt8:function(){return this._decodeInt(8,!1)},readInt16:function(){return this._decodeInt(16,!0)},readUInt16:function(){return this._decodeInt(16,!1)},readInt32:function(){return this._decodeInt(32,!0)},readUInt32:function(){return this._decodeInt(32,!1)},readFloat:function(){return this._decodeFloat(23,8)},readDouble:function(){return this._decodeFloat(52,11)},readChar:function(){return this.readString(1)},readString:function(e){this._checkSize(8*e);var t=this._buffer.substr(this._pos,e);return this._pos+=e,t},seek:function(e){this._pos=e,this._checkSize(0)},getPosition:function(){return this._pos},getSize:function(){return this._buffer.length},_decodeFloat:function(e,t){var n=e+t+1,r=n>>3;this._checkSize(n);var i=Math.pow(2,t-1)-1,s=this._readBits(e+t,1,r),o=this._readBits(e,t,r),a=0,u=2,l=0;do{for(var c=this._readByte(++l,r),h=e%8||8,p=1<<h;p>>=1;)c&p&&(a+=1/u),u*=2}while(e-=h);return this._pos+=r,o===1+(i<<1)?a?NaN:s?-1/0:1/0:(1+-2*s)*(o||a?o?Math.pow(2,o-i)*(1+a):Math.pow(2,1-i)*a:0)},_decodeInt:function(e,t){var n=this._readBits(0,e,e/8),r=Math.pow(2,e),i=t&&n>=r/2?n-r:n;return this._pos+=e/8,i},_shl:function(e,t){for(++t;--t;e=1073741824==(1073741824&(e%=2147483648))?2*e:2*(e-1073741824)+2147483647+1);return e},_readByte:function(e,t){return 255&this._buffer.charCodeAt(this._pos+t-e-1)},_readBits:function(e,t,n){var r=(e+t)%8,i=e%8,s=n-(e>>3)-1,o=n+(-(e+t)>>3),a=s-o,u=this._readByte(s,n)>>i&(1<<(a?8-i:t))-1;for(a&&r&&(u+=(this._readByte(o++,n)&(1<<r)-1)<<(a--<<3)-i);a;)u+=this._shl(this._readByte(o++,n),(a--<<3)-i);return u},_checkSize:function(e){this._pos,Math.ceil(e/8),this._buffer.length}},t.exports=r},{}],91:[function(e,t,n){t.exports=function(e){const t=e=>"fixTJunctions"in(e="reTesselated"in e?e.reTesselated():e)?e.fixTJunctions():e;return e.constructor!==Array?t(e):e.map(t)}},{}],92:[function(e,t,n){const r=e("./makeBlob"),i=e("./BinaryReader"),s=e("./ensureManifoldness");t.exports={makeBlob:r,BinaryReader:i,ensureManifoldness:s}},{"./BinaryReader":90,"./ensureManifoldness":91,"./makeBlob":93}],93:[function(e,t,n){(function(e){function n(t,n){if(n=n||{},this.size=0,this.type="",this.isClosed=!1,this.encoding="utf8",this.buffer=null,this.length=32e6,!t)return;if(!Array.isArray(t))return;let r,i;n.type&&(this.type=n.type.toLowerCase()),n.endings,n.encoding&&(this.encoding=n.encoding.toLowerCase()),n.length&&(this.length=n.length),this.buffer=e.alloc(this.length);var s=0;for(s=0;s<t.length;s++)switch(typeof t[s]){case"string":r=this.buffer.write(t[s],this.size,this.encoding),this.size=this.size+r;break;case"object":if(i=t[s],e.isBuffer(i),i instanceof ArrayBuffer){var o=new DataView(i),a=0;for(a=0;a<i.byteLength;a++){var u=o.getUint8(a);r=this.buffer.writeUInt8(u,this.size,!1),this.size++}}}return this}n.prototype={asBuffer:function(){return this.buffer.slice(0,this.size)},slice:function(e,t,r){return e=e||0,t=t||this.size,r=r||"",new n},close:function(){this.isClosed||(this.isClosed=!0)},toString:function(){return"blob blob blob"}},t.exports=function(e,t){return"undefined"!=typeof window?window.Blob:n}}).call(this,e("buffer").Buffer)},{buffer:118}],94:[function(e,t,n){const{makeBlob:r}=e("@jscad/io-utils"),i=e("@jscad/amf-serializer"),s=e("@jscad/dxf-serializer"),o=e("@jscad/json-serializer"),a=e("@jscad/stl-serializer"),u=e("@jscad/svg-serializer"),l=e("@jscad/x3d-serializer"),c=e("@jscad/amf-deserializer"),h=e("@jscad/dxf-deserializer"),p=e("@jscad/gcode-deserializer"),f=e("@jscad/json-deserializer"),d=e("@jscad/obj-deserializer"),m=e("@jscad/stl-deserializer"),g=e("@jscad/svg-deserializer");t.exports={makeBlob:r,amfSerializer:i,dxfSerializer:s,jsonSerializer:o,stlSerializer:a,svgSerializer:u,x3dSerializer:l,amfDeSerializer:c,dxfDeSerializer:h,gcodeDeSerializer:p,jsonDeSerializer:f,objDeSerializer:d,stlDeSerializer:m,svgDeSerializer:g}},{"@jscad/amf-deserializer":4,"@jscad/amf-serializer":8,"@jscad/dxf-deserializer":84,"@jscad/dxf-serializer":88,"@jscad/gcode-deserializer":89,"@jscad/io-utils":92,"@jscad/json-deserializer":95,"@jscad/json-serializer":96,"@jscad/obj-deserializer":97,"@jscad/stl-deserializer":99,"@jscad/stl-serializer":103,"@jscad/svg-deserializer":106,"@jscad/svg-serializer":110,"@jscad/x3d-serializer":111}],95:[function(e,t,n){const{CSG:r,CAG:i}=e("@jscad/csg");function s(e){return"new CAG.Vertex(new CSG.Vector2D("+e.pos._x+","+e.pos._y+"))"}function o(e){return e.type&&"csg"===e.type?(t=r.fromObject(e),n="  var polygons = [];\n",t.polygons.map((function(e){n+="  poly = new CSG.Polygon([\n";for(var t=0;t<e.vertices.length;t++)n+="                         new CSG.Vertex(new CSG.Vector3D("+(r=e.vertices[t].pos)._x+","+r._y+","+r._z+")),\n";var r;n+="                         ])",e.shared&&e.shared.color&&e.shared.color.length?n+=".setColor("+JSON.stringify(e.shared.color)+");\n":n+=";\n",n+="  polygons.push(poly);\n"})),n+="  return CSG.fromPolygons(polygons);\n"):e.type&&"cag"===e.type?function(e){var t="  var sides = [];\n";return e.sides.map((function(e){var n;t+="  sides.push(new CAG.Side("+s((n=e).vertex0)+","+s(n.vertex1)+"));\n"})),t+="  return CAG.fromSides(sides);\n"}(i.fromObject(e)):"";var t,n}t.exports={deserialize:function(e,t,n){n&&n.statusCallback&&n.statusCallback({progress:0}),t=t||"amf",n=Object.assign({},{version:"0.0.0"},n);const{version:r}=n;var i=JSON.parse(e);n&&n.statusCallback&&n.statusCallback({progress:50});var s="";return s+="//\n",s+="// producer: OpenJSCAD.org "+r+" JSON Importer\n",s+="// date: "+new Date+"\n",s+="// source: "+t+"\n",s+="//\n",s+="function main() {\n",s+=o(i),s+="};\n",n&&n.statusCallback&&n.statusCallback({progress:100}),s}}},{"@jscad/csg":22}],96:[function(e,t,n){const{ensureManifoldness:r}=e("@jscad/io-utils");t.exports={serialize:function(e,t){t&&t.statusCallback&&t.statusCallback({progress:0});const n="sides"in e?function(e,t){let n='{ "type": "cag","sides": [',r="";return e.sides.map((function(i,s){n+=r,n+=JSON.stringify(i),r=",",t&&t.statusCallback&&t.statusCallback({progress:100*s/e.sides.length})})),n+="] }",[n]}(e,t):function(e,t){let n='{ "type": "csg","polygons": [',r="";return e.polygons.map((function(i,s){n+=r,n+=JSON.stringify(i),r=",",t&&t.statusCallback&&t.statusCallback({progress:100*s/e.polygons.length})})),n+="],",n+='"isCanonicalized": '+JSON.stringify(e.isCanonicalized)+",",n+='"isRetesselated": '+JSON.stringify(e.isRetesselated),n+="}",[n]}(r(e),t);return t&&t.statusCallback&&t.statusCallback({progress:100}),n},mimeType:"application/json"}},{"@jscad/io-utils":92}],97:[function(e,t,n){const{vt2jscad:r}=e("./vt2jscad"),{CSG:i}=e("@jscad/csg");t.exports={deserialize:function(e,t,n){n&&n.statusCallback&&n.statusCallback({progress:0}),n=Object.assign({},{version:"0.0.0",addMetaData:!0,output:"jscad"},n);const{output:s}=n,{positions:o,faces:a}=((e,t)=>{let n=e.split(/\n/),r=[],i=[];for(let e=0;e<n.length;e++){let s=n[e].split(/\s+/);if("v"===s[0])r.push([s[1],s[2],s[3]]);else if("f"===s[0]){let e=[],t=0;for(let n=1;n<s.length;n++){let i=s[n];i=i.replace(/\/.*$/,""),i--,i>=r.length&&t++,0===t&&e.push(i)}0===t&&i.push(e)}t&&t.statusCallback&&t.statusCallback({progress:90*e/n.length})}return{positions:r,faces:i}})(e,n),u="jscad"===s?(({positions:e,faces:t,addMetaData:n,filename:i,version:s})=>{let o=n?`//\n  // producer: OpenJSCAD.org Compatibility${s} OBJ deserializer\n  // date: ${new Date}\n  // source: ${i}\n  //\n  `:"";return o+=`// objects: 1\n// object #1: polygons: ${t.length}\nfunction main() { return\n${r(e,t)}\n}\n  `,o})({positions:o,faces:a,options:n}):(({positions:e,faces:t})=>i.polyhedron({points:e,faces:t}))({positions:o,faces:a,options:n});return n&&n.statusCallback&&n.statusCallback({progress:100}),u}}},{"./vt2jscad":98,"@jscad/csg":22}],98:[function(e,t,n){t.exports={vt2jscad:function(e,t,n,r){let i="";i+="polyhedron({ points: [\n  ";for(let t=0,n=0;t<e.length;t++)n++&&(i+=",\n  "),i+="["+e[t]+"]";i+="],\n  polygons: [\n  ";for(let e=0,n=0;e<t.length;e++)n++&&(i+=",\n  "),i+="["+t[e]+"]";if(r&&t.length===r.length){i+="],\n\tcolors: [\n  ";for(let e=0,t=0;e<r.length;e++)t++&&(i+=",\n  "),i+="["+r[e]+"]"}return i+="] })\n",i}}},{}],99:[function(e,t,n){const{CSG:r}=e("@jscad/csg"),{vt2jscad:i}=e("./vt2jscad"),{BinaryReader:s}=e("@jscad/io-utils"),o=console.info;function a(e,t,n,r){return(t?`//\n  // producer: OpenJSCAD.org Compatibility${n} STL Binary Importer\n  // date: ${new Date}\n  // source: ${r}\n  //\n  `:"")+`function main() { return union(\n// objects: ${e.length}\n${e.join("\n")}); }\n`}function u(e){return(new r).union(e)}function l(e,t,n,i,a=!1){let u=[],l=[],c=[],h=[],p=0,f=0,d=0,m=null,g=parseInt("01000000000000000",2),y=parseInt("00000000000011111",2),v=parseInt("00000001111100000",2),x=parseInt("00111110000000000",2),b=new s(e),w=0,D=0,E=0,C=0,S=0,A=0;for(let e=0;e<80;e++)switch(w){case 6:E=b.readUInt8(),w+=1;continue;case 7:C=b.readUInt8(),w+=1;continue;case 8:S=b.readUInt8(),w+=1;continue;case 9:A=b.readUInt8(),w+=1;continue;default:switch(D=b.readChar(),D){case"C":case"O":case"L":case"R":case"=":w+=1}}10===w&&(m=[E/255,C/255,S/255,A/255]);let T=b.readUInt32();for(let e=0;e<T;e++){a&&e%100==0&&console.info(`stl importer: converted ${p} out of ${T} triangles`);let t=[];t.push(b.readFloat()),t.push(b.readFloat()),t.push(b.readFloat());let n=[];n.push(b.readFloat()),n.push(b.readFloat()),n.push(b.readFloat());let i=[];i.push(b.readFloat()),i.push(b.readFloat()),i.push(b.readFloat());let s=[];s.push(b.readFloat()),s.push(b.readFloat()),s.push(b.readFloat());let D=0;for(let e=0;e<3;e++)isNaN(n[e])&&D++,isNaN(i[e])&&D++,isNaN(s[e])&&D++,isNaN(t[e])&&D++;D>0&&o("bad triangle vertice coords/normal: ",D),d+=D;let E=[];E.push(f++),E.push(f++),E.push(f++);let C=b.readUInt16(),S=null;if(10===w){let e=(C&y)/31,t=((C&v)>>>5)/31,n=((C&x)>>>10)/31,r=255;S=0==(C&g)?[e,t,n,r]:m,h.push(S)}if(0===D){let e=new r.Vector3D(n),o=new r.Vector3D(i),a=new r.Vector3D(s),u=o.minus(e),l=a.minus(e);if(new r.Vector3D(t).dot(u.cross(l))>0){let e=s;s=n,n=e}}u.push(n),u.push(i),u.push(s),l.push(E),c.push(t),p++}return d&&console.warn(`WARNING: import errors: ${d} (some triangles might be misaligned or missing)`),[i({vertices:u,triangles:l,normals:c,colors:h})]}function c(e,t,n,i){let s,a=0;const u=e.split("endsolid");let l=[];for(s=1;s<u.length;s++){let t=/\bfacet[\s\S]*?endloop/gim,n=[],u=[],c=[],h=0,p=0,f=e.match(t);if(null!=f){for(let e=0;e<f.length;e++){let t=/\bfacet\s+normal\s+(\S+)\s+(\S+)\s+(\S+)\s+outer\s+loop\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s+vertex\s+(\S+)\s+(\S+)\s+(\S+)\s*/gim.exec(f[e]);if(null==t)continue;if(13!==t.length){o("Failed to parse "+f[e]);break}let i=0;for(let e=0;e<t.length;e++)"NaN"===t[e]&&(o("bad normal or triangle vertice #"+a+" "+e+": '"+t[e]+"', skipped"),i++);if(p+=i,i)continue;let s=1,l=[];l.push(parseFloat(t[s++])),l.push(parseFloat(t[s++])),l.push(parseFloat(t[s++]));let d=[];d.push(parseFloat(t[s++])),d.push(parseFloat(t[s++])),d.push(parseFloat(t[s++]));let m=[];m.push(parseFloat(t[s++])),m.push(parseFloat(t[s++])),m.push(parseFloat(t[s++]));let g=[];g.push(parseFloat(t[s++])),g.push(parseFloat(t[s++])),g.push(parseFloat(t[s++]));let y=[];if(y.push(h++),y.push(h++),y.push(h++),0===i){let e=new r.Vector3D(d),t=new r.Vector3D(m),n=new r.Vector3D(g),i=t.minus(e),s=n.minus(e);if(new r.Vector3D(l).dot(i.cross(s))>0){let e=g;g=d,d=e}}n.push(d),n.push(m),n.push(g),c.push(l),u.push(y),a++}p&&console.warn(`WARNING: import errors: ${p} (some triangles might be misaligned or missing)`),l.push(i({vertices:n,triangles:u,index:s}))}}return l}t.exports={deserialize:function(e,t,n){n&&n.statusCallback&&n.statusCallback({progress:0}),n=Object.assign({},{version:"0.0.0",addMetaData:!0,output:"jscad"},n);const{version:s,output:o,addMetaData:h}=n,p=function(e){const t=function(e){if("string"!=typeof e){let t=new Uint8Array(e),n="";for(let r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n}return e}(e);return null===/vertex[\s]+([-+]?[0-9]+\.?[0-9]*([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+[\s]+([-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)+/g.exec(t)}(e);var f;e=p&&(f=e).constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)?function(e){let t="";const n=new Uint8Array(e);let r=n.byteLength;for(let e=0;e<r;e++)t+=String.fromCharCode(n[e]);return t}(e):e,n&&n.statusCallback&&n.statusCallback({progress:33}),n&&n.statusCallback&&n.statusCallback({progress:66});const d=("jscad"===o?a:u)((p?l:c)(e,t,s,"jscad"===o?({vertices:e,triangles:t,normals:n,colors:r,index:s})=>`// object #${s}: triangles: ${t.length}\n${i(e,t,null)}`:({vertices:e,triangles:t,normals:n,colors:i})=>function(e){let t=[],n=e.triangles||e.polygons,i=e.colors||null;for(let s=0;s<n.length;s++){let o=[];for(let t=0;t<n[s].length;t++)o[t]=e.points[n[s][t]];let a=[];for(let e=n[s].length-1;e>=0;e--)a.push(new r.Vertex(new r.Vector3D(o[e][0],o[e][1],o[e][2])));let u=r.Polygon.defaultShared;i&&i[s]&&(u=r.Polygon.Shared.fromColor(i[s])),t.push(new r.Polygon(a,u))}return r.fromPolygons(t)}({points:e,polygons:t})),h,s,t);return n&&n.statusCallback&&n.statusCallback({progress:100}),d}}},{"./vt2jscad":100,"@jscad/csg":22,"@jscad/io-utils":92}],100:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{dup:98}],101:[function(e,t,n){function r(e){return e._x+" "+e._y+" "+e._z}function i(e){return"vertex "+r(e.pos)+"\n"}t.exports={serialize:function(e,t){t&&t.statusCallback&&t.statusCallback({progress:0});var n="solid csg.js\n";return e.polygons.map((function(s,o){n+=function(e){var t="";if(e.vertices.length>=3)for(var n=i(e.vertices[0]),s=0;s<e.vertices.length-2;s++)t+="facet normal "+r(e.plane.normal)+"\nouter loop\n",t+=n,t+=i(e.vertices[s+1]),t+=i(e.vertices[s+2]),t+="endloop\nendfacet\n";return t}(s),t&&t.statusCallback&&t.statusCallback({progress:100*o/e.polygons.length})})),n+="endsolid csg.js\n",t&&t.statusCallback&&t.statusCallback({progress:100}),[n]}}},{}],102:[function(e,t,n){t.exports={serialize:function(e,t){t&&t.statusCallback&&t.statusCallback({progress:0});var n=new ArrayBuffer(4),r=new Int32Array(n,0,1),i=new Int8Array(n,0,4);if(r[0]=287454020,68!==i[0])throw new Error("Binary STL output is currently only supported on little-endian (Intel) processors");var s=0;e.polygons.map((function(e){var t=e.vertices.length;s+=t>=3?t-2:0}));for(var o=new Uint8Array(80),a=0;a<80;a++)o[a]=65;var u=new Uint32Array(1);u[0]=s;var l=new ArrayBuffer(50*s),c=new Int8Array(l),h=new ArrayBuffer(50),p=new Int8Array(h),f=new Float32Array(h,0,12),d=new Uint16Array(h,48,1),m=0;return e.polygons.map((function(n,r){var i=n.vertices.length;for(r=0;r<i-2;r++){var s=n.plane.normal;f[0]=s._x,f[1]=s._y,f[2]=s._z;for(var o=3,a=0;a<3;a++){var u=a+(a>0?r:0),l=n.vertices[u].pos;f[o++]=l._x,f[o++]=l._y,f[o++]=l._z}d[0]=0,c.set(p,m),m+=50}t&&t.statusCallback&&t.statusCallback({progress:100*r/e.polygons.length})})),t&&t.statusCallback&&t.statusCallback({progress:100}),[o.buffer,u.buffer,l]}}},{}],103:[function(e,t,n){const r=e("./CSGToStlb").serialize,i=e("./CSGToStla").serialize,{ensureManifoldness:s}=e("@jscad/io-utils");t.exports={mimeType:"application/sla",serialize:function(e,t){return t=Object.assign({},{binary:!0},t),e=s(e),t.binary?r(e,t):i(e,t)}}},{"./CSGToStla":101,"./CSGToStlb":102,"@jscad/io-utils":92}],104:[function(e,t,n){t.exports={pxPmm:1/.2822222,inchMM:.03937,ptMM:1/(1/.03937/72),pcMM:.23622,cssPxUnit:.2822222,svgColors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},{}],105:[function(e,t,n){const{inchMM:r,ptMM:i,pcMM:s,svgColors:o}=e("./constants"),a=function(e,t){var n=parseFloat(e);return isNaN(n)?0:(0===n||e.search(/EM/i)>0||e.search(/EX/i)>0||e.search(/MM/i)>0||(e.search(/CM/i)>0?n*=10:e.search(/IN/i)>0?n/=r:e.search(/PT/i)>0?n/=i:e.search(/PC/i)>0?n/=s:n/=t),n)};t.exports={svg2cagX:function(e,t){return e/t[0]},svg2cagY:function(e,t){return 0-e/t[1]},cagLengthX:function(e,t,n){if(e.indexOf("%")<0)return a(e,t[0]);var r=parseFloat(e);return isNaN(r)?0:0===r?r:(r=r/100*n,r/=t[0],-1e5*Math.round(r/-1e5))},cagLengthY:function(e,t,n){if(e.indexOf("%")<0)return a(e,t[1]);var r=parseFloat(e);return isNaN(r)?0:0===r?r:(r=r/100*n,r/=t[1],-1e5*Math.round(r/-1e5))},cagLengthP:function(e,t,n){if(e.indexOf("%")<0)return a(e,t[1]);var r=parseFloat(e);return isNaN(r)?0:0===r?r:(r=r/100*n,r/=t[0])},css2cag:a,cagColor:function(e){var t=null;if((e=e.toLowerCase())in o)t=[(t=o[e])[0]/255,t[1]/255,t[2]/255];else if("#"===e[0])4===e.length&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),7===e.length&&(t=[parseInt("0x"+e.slice(1,3))/255,parseInt("0x"+e.slice(3,5))/255,parseInt("0x"+e.slice(5,7))/255]);else{var n=/rgb\(.+,.+,.+\)/.exec(e);null!==n&&(t=(n=(n=n[0]).slice(n.indexOf("(")+1,n.indexOf(")"))).split(","),t=n.indexOf("%")>0?[(t=[parseInt(t[0]),parseInt(t[1]),parseInt(t[2])])[0]/100,t[1]/100,t[2]/100]:[(t=[parseInt(t[0]),parseInt(t[1]),parseInt(t[2])])[0]/255,t[1]/255,t[2]/255])}return t},cssStyle:function(e,t){if("STYLE"in e){var n=e.STYLE,r=new RegExp(t+"\\s*:\\s*\\S+;","i").exec(n);if(null!==r){for(var i=(r=r[0]).length;" "!==r[i]&&i>0;)i--;return r.slice(i+1,r.length-1)}}return null},reflect:function(e,t,n,r){var i=e-n,s=t-r;return e===n&&t===n?[e,t]:e===n?[e,r+-s]:t===r?[n+-i,t]:[n+-i,r+-s]},groupValue:function(e,t){for(var n=e.length;n>0;){const r=e[n-1];if(t in r)return r[t];n--}return null}}},{"./constants":104}],106:[function(e,t,n){const r=e("sax"),{CAG:i}=e("@jscad/csg"),{cagLengthX:s,cagLengthY:o}=e("./helpers"),{svgSvg:a,svgRect:u,svgCircle:l,svgGroup:c,svgLine:h,svgPath:p,svgEllipse:f,svgPolygon:d,svgPolyline:m,svgUse:g}=e("./svgElementHelpers"),y=e("./shapesMapCsg"),v=e("./shapesMapJscad");let x,b,w,D=[],E=[],C=!1,S=null,A=[1,1];const T=function(e){const t=E.length;E.push(e);let n=t;for(;n>0;)n--;let r=new i;const a={svgUnitsPmm:A,svgUnitsX:x,svgUnitsY:b,svgUnitsV:w,level:t,svgGroups:E};for(n=0;n<e.objects.length;n++){const t=e.objects[n];let i=y(t,T,a);if("transforms"in t){let e=null,n=null,r=null;for(let i=0;i<t.transforms.length;i++){const s=t.transforms[i];"rotate"in s&&(e=s),"scale"in s&&(n=s),"translate"in s&&(r=s)}if(null!==n){const e=n.scale[0],t=n.scale[1];i=i.scale([e,t])}if(null!==e){const t=0-e.rotate;i=i.rotateZ(t)}if(null!==r){const e=s(r.translate[0],A,x),t=0-o(r.translate[1],A,b);i=i.translate([e,t])}}r=r.union(i)}return E.pop(),r},k=function(e){const t=E.length;E.push(e);for(var n="  ",r=t;r>0;)n+="  ",r--;var i="";0===t&&(i+="function main(params) {\n");var a="cag"+t;for(i+=n+"var "+a+" = new CAG();\n",r=0;r<e.objects.length;r++){const l=e.objects[r],c=a+r;if(i+=v(l,k,{level:t,indent:n,ln:a,on:c,svgUnitsPmm:A,svgUnitsX:x,svgUnitsY:b,svgUnitsV:w,svgGroups:E}),"transforms"in l){let e=null,t=null,r=null;for(let n=0;n<l.transforms.length;n++){var u=l.transforms[n];"rotate"in u&&(e=u),"scale"in u&&(t=u),"translate"in u&&(r=u)}null!==t&&(i+=n+c+" = "+c+".scale(["+t.scale[0]+","+t.scale[1]+"]);\n"),null!==e&&(console.log("tr",e),i+=n+c+" = "+c+".rotateZ("+(0-e.rotate)+");\n"),null!==r&&(i+=n+c+" = "+c+".translate(["+s(r.translate[0],A,x)+","+(0-o(r.translate[1],A,b))+"]);\n")}i+=n+a+" = "+a+".union("+c+");\n"}return 0===t&&(i+=n+"return "+a+";\n",i+="}\n"),E.pop(),i};function _(e,t){const n=r.parser(!1,{trim:!0,lowercase:!1,position:!0});return void 0!==t&&t>n.pxPmm&&(n.pxPmm=t),n.onerror=e=>console.log("error: line "+e.line+", column "+e.column+", bad character ["+e.c+"]"),n.onopentag=function(e){const n={SVG:a,G:c,RECT:u,CIRCLE:l,ELLIPSE:f,LINE:h,POLYLINE:m,POLYGON:d,PATH:p,USE:g,DEFS:()=>(C=!0,null),DESC:()=>{},TITLE:()=>{},STYLE:()=>{},undefined:()=>console.log("Warning: Unsupported SVG element: "+e.name)};let r=n[e.name]?n[e.name](e.attributes,{svgObjects:D,customPxPmm:t}):null;if(null!==r)if("id"in r&&(D[r.id]=r),"svg"===r.type)E.push(r),A=r.unitsPmm,x=r.viewW,b=r.viewH,w=r.viewP;else{if(E.length>0&&!1===C){var i=E.pop();"objects"in i&&i.objects.push(r),E.push(i)}"group"===r.type&&E.push(r)}},n.onclosetag=function(e){const t=()=>E.pop(),n={SVG:t,DEFS:()=>{C=!1},USE:t,G:t,undefined:()=>{}},r=n[e]?n[e]():void 0;0===E.length&&(S=r)},n.onend=function(){},n.write(e).close(),n}t.exports={deserialize:function(t,n,r){return"jscad"===(r=Object.assign({},{output:"jscad"},r)).output?function(t,n,r){r&&r.statusCallback&&r.statusCallback({progress:0}),n=n||"svg";const i={pxPmm:e("./constants").pxPmm,version:"0.0.0",addMetaData:!0};r=Object.assign({},i,r);const{version:s,pxPmm:o,addMetaData:a}=r;_(t,o);let u=a?`//\n  // producer: OpenJSCAD.org ${s} SVG Importer\n  // date: ${new Date}\n  // source: ${n}\n  //\n  `:"";if(!S)throw new Error("SVG parsing failed, no valid svg data retrieved");r&&r.statusCallback&&r.statusCallback({progress:50});return u+=k(S),r&&r.statusCallback&&r.statusCallback({progress:100}),u}(t,n,r):function(t,n,r){r&&r.statusCallback&&r.statusCallback({progress:0}),n=n||"svg";const i={pxPmm:e("./constants").pxPmm,version:"0.0.0",addMetaData:!0};r=Object.assign({},i,r);const{pxPmm:s}=r;if(_(t,s),!S)throw new Error("SVG parsing failed, no valid svg data retrieved");r&&r.statusCallback&&r.statusCallback({progress:50});const o=T(S);return r&&r.statusCallback&&r.statusCallback({progress:100}),o}(t,n,r)}}},{"./constants":104,"./helpers":105,"./shapesMapCsg":107,"./shapesMapJscad":108,"./svgElementHelpers":109,"@jscad/csg":22,sax:217}],107:[function(e,t,n){const{CSG:r,CAG:i}=e("@jscad/csg"),{svg2cagX:s,svg2cagY:o,cagLengthX:a,cagLengthY:u,cagLengthP:l,reflect:c,groupValue:h}=e("./helpers"),{cssPxUnit:p}=e("./constants");function f(e,t,n,a,u,f){let d=new i,m={},g=p;if("strokeWidth"in e)g=l(e.strokeWidth,t,u)/2;else{const e=h(f,"strokeWidth");null!==e&&(g=l(e,t,u)/2)}let y=0,v=0,x=0,b=0,w=0,D=""+w,E=!1,C=0,S=0,A=0,T=0;for(let n=0;n<e.commands.length;n++){let i=e.commands[n],a=i.p;switch(i.c){case"m":for(0===n&&(x=0,b=0),w>0&&!1===E&&(m[D]=m[D].expandToCAG(r.defaultResolution2D)),a.length>=2&&(x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),w++,D=""+w,E=!1,m[D]=new r.Path2D([[s(x,t),o(b,t)]],!1),y=x,v=b);a.length>=2;)x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"M":for(w>0&&!1===E&&(m[D]=m[D].expandToCAG(r.defaultResolution2D)),a.length>=2&&(x=parseFloat(a.shift()),b=parseFloat(a.shift()),w++,D=""+w,E=!1,m[D]=new r.Path2D([[s(x,t),o(b,t)]],!1),y=x,v=b);a.length>=2;)x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"a":for(;a.length>=7;){let e=parseFloat(a.shift()),n=parseFloat(a.shift()),r=0-parseFloat(a.shift()),i="1"===a.shift(),u="1"===a.shift();x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendArc([s(x,t),o(b,t)],{xradius:s(e,t),yradius:o(n,t),xaxisrotation:r,clockwise:u,large:i})}break;case"A":for(;a.length>=7;){let e=parseFloat(a.shift()),n=parseFloat(a.shift()),r=0-parseFloat(a.shift()),i="1"===a.shift(),u="1"===a.shift();x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendArc([s(x,t),o(b,t)],{xradius:s(e,t),yradius:o(n,t),xaxisrotation:r,clockwise:u,large:i})}break;case"c":for(;a.length>=6;){let e=x+parseFloat(a.shift()),n=b+parseFloat(a.shift());C=x+parseFloat(a.shift()),S=b+parseFloat(a.shift()),x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(e,t),o(n,t)],[s(C,t),o(S,t)],[s(x,t),o(b,t)]]);let r=c(C,S,x,b);C=r[0],S=r[1]}break;case"C":for(;a.length>=6;){let e=parseFloat(a.shift()),n=parseFloat(a.shift());C=parseFloat(a.shift()),S=parseFloat(a.shift()),x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(e,t),o(n,t)],[s(C,t),o(S,t)],[s(x,t),o(b,t)]]);let r=c(C,S,x,b);C=r[0],S=r[1]}break;case"q":for(;a.length>=4;){A=x+parseFloat(a.shift()),T=b+parseFloat(a.shift()),x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(A,t),o(T,t)],[s(A,t),o(T,t)],[s(x,t),o(b,t)]]);let e=c(A,T,x,b);A=e[0],T=e[1]}break;case"Q":for(;a.length>=4;){A=parseFloat(a.shift()),T=parseFloat(a.shift()),x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(A,t),o(T,t)],[s(A,t),o(T,t)],[s(x,t),o(b,t)]]);let e=c(A,T,x,b);A=e[0],T=e[1]}break;case"t":for(;a.length>=2;){x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(A,t),o(T,t)],[s(A,t),o(T,t)],[x,b]]);let e=c(A,T,x,b);A=e[0],T=e[1]}break;case"T":for(;a.length>=2;){x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(A,t),o(T,t)],[s(A,t),o(T,t)],[s(x,t),o(b,t)]]);let e=c(A,T,x,b);A=e[0],T=e[1]}break;case"s":for(;a.length>=4;){let e=C,n=S;C=x+parseFloat(a.shift()),S=b+parseFloat(a.shift()),x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(e,t),o(n,t)],[s(C,t),o(S,t)],[s(x,t),o(b,t)]]);let r=c(C,S,x,b);C=r[0],S=r[1]}break;case"S":for(;a.length>=4;){let e=C,n=S;C=parseFloat(a.shift()),S=parseFloat(a.shift()),x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendBezier([[s(e,t),o(n,t)],[s(C,t),o(S,t)],[s(x,t),o(b,t)]]);let r=c(C,S,x,b);C=r[0],S=r[1]}break;case"h":for(;a.length>=1;)x+=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"H":for(;a.length>=1;)x=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"l":for(;a.length>=2;)x+=parseFloat(a.shift()),b+=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"L":for(;a.length>=2;)x=parseFloat(a.shift()),b=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"v":for(;a.length>=1;)b+=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"V":for(;a.length>=1;)b=parseFloat(a.shift()),m[D]=m[D].appendPoint([s(x,t),o(b,t)]);break;case"z":case"Z":let e=m[D].close();switch(m[D]=e.innerToCAG(),e.getTurn()){default:case"clockwise":d=d.union(m[D]);break;case"counter-clockwise":d=d.subtract(m[D])}x=y,b=v,E=!0;break;default:console.log("Warning: Unknow PATH command ["+i.c+"]")}}return w>0&&!1===E&&(m[D]=m[D].expandToCAG(g,r.defaultResolution2D),d=d.union(m[D])),d}t.exports=function(e,t,n){const{svgUnitsPmm:s,svgUnitsX:o,svgUnitsY:c,svgUnitsV:d,svgGroups:m}=n,g={group:e=>t(e),rect:(e,t,n,r)=>{let s=a(e.x,t,n),o=0-u(e.y,t,r);const l=a(e.width,t,n),c=u(e.height,t,r),h=a(e.rx,t,n);if(l>0&&c>0)return s=(s+l/2).toFixed(4),o=(o-c/2).toFixed(4),0===h?i.rectangle({center:[s,o],radius:[l/2,c/2]}):i.roundedRectangle({center:[s,o],radius:[l/2,c/2],roundradius:h})},circle:(e,t,n,r,s)=>{const o=a(e.x,t,n),c=0-u(e.y,t,r),h=l(e.radius,t,s);if(h>0)return i.circle({center:[o,c],radius:h})},ellipse:(e,t,n,r,s)=>{const o=a(e.rx,t,n),l=u(e.ry,t,r),c=a(e.cx,t,n),h=0-u(e.cy,t,r);if(o>0&&l>0)return i.ellipse({center:[c,h],radius:[o,l]})},line:(e,t,n,i,s)=>{const o=a(e.x1,t,n),c=0-u(e.y1,t,i),f=a(e.x2,t,n),d=0-u(e.y2,t,i);let g=p;if("strokeWidth"in e)g=l(e.strokeWidth,t,s)/2;else{const e=h(m,"strokeWidth");null!==e&&(g=l(e,t,s)/2)}return new r.Path2D([[o,c],[f,d]],!1).expandToCAG(g,r.defaultResolution2D)},polygon:(e,t,n,i)=>{let s=[];for(let r=0;r<e.points.length;r++){const o=e.points[r];if("x"in o&&"y"in o){const e=a(o.x,t,n),r=0-u(o.y,t,i);s.push([e,r])}}return new r.Path2D(s,!0).innerToCAG()},polyline:(e,t,n,i,s)=>{let o=[],c=p;if("strokeWidth"in e)c=l(e.strokeWidth,t,s)/2;else{const e=h(m,"strokeWidth");null!==e&&(c=l(e,t,s)/2)}for(let r=0;r<e.points.length;r++){const s=e.points[r];if("x"in s&&"y"in s){let e=a(s.x,t,n),r=0-u(s.y,t,i);o.push([e,r])}}return new r.Path2D(o,!1).expandToCAG(c,r.defaultResolution2D)},path:f};return g[e.type](e,s,o,c,d,m)}},{"./constants":104,"./helpers":105,"@jscad/csg":22}],108:[function(e,t,n){const{svg2cagX:r,svg2cagY:i,cagLengthX:s,cagLengthY:o,cagLengthP:a,reflect:u,groupValue:l}=e("./helpers"),{cssPxUnit:c}=e("./constants");function h(e,t,n,s,o,h,p){const{indent:f,on:d}=h;let m=f+"var "+d+" = new CAG();\n",g=c;if("strokeWidth"in e)g=a(e.strokeWidth,t,o)/2;else{const e=l(p,"strokeWidth");null!==e&&(g=a(e,t,o)/2)}let y=0,v=0,x=0,b=0,w=0,D=d+w,E=!1,C=0,S=0,A=0,T=0;for(let n=0;n<e.commands.length;n++){let s=e.commands[n],o=s.p;switch(s.c){case"m":for(0===n&&(x=0,b=0),w>0&&!1===E&&(m+=f+D+" = "+D+".expandToCAG("+g+",CSG.defaultResolution2D);\n"),o.length>=2&&(x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),w++,D=d+w,E=!1,m+=f+"var "+D+" = new CSG.Path2D([["+r(x,t)+","+i(b,t)+"]],false);\n",y=x,v=b);o.length>=2;)x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"M":for(w>0&&!1===E&&(m+=f+D+" = "+D+".expandToCAG("+g+",CSG.defaultResolution2D);\n"),o.length>=2&&(x=parseFloat(o.shift()),b=parseFloat(o.shift()),w++,D=d+w,E=!1,m+=f+"var "+D+" = new CSG.Path2D([["+r(x,t)+","+i(b,t)+"]],false);\n",y=x,v=b);o.length>=2;)x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"a":for(;o.length>=7;){let e=parseFloat(o.shift()),n=parseFloat(o.shift()),s=0-parseFloat(o.shift()),a="1"===o.shift(),u="1"===o.shift();x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendArc(["+r(x,t)+","+i(b,t)+"],{xradius: "+r(e,t)+",yradius: "+i(n,t)+",xaxisrotation: "+s+",clockwise: "+u+",large: "+a+"});\n"}break;case"A":for(;o.length>=7;){let e=parseFloat(o.shift()),n=parseFloat(o.shift()),s=0-parseFloat(o.shift()),a="1"===o.shift(),u="1"===o.shift();x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendArc(["+r(x,t)+","+i(b,t)+"],{xradius: "+r(e,t)+",yradius: "+i(n,t)+",xaxisrotation: "+s+",clockwise: "+u+",large: "+a+"});\n"}break;case"c":for(;o.length>=6;){let e=x+parseFloat(o.shift()),n=b+parseFloat(o.shift());C=x+parseFloat(o.shift()),S=b+parseFloat(o.shift()),x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(e,t)+","+i(n,t)+"],["+r(C,t)+","+i(S,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let s=u(C,S,x,b);C=s[0],S=s[1]}break;case"C":for(;o.length>=6;){let e=parseFloat(o.shift()),n=parseFloat(o.shift());C=parseFloat(o.shift()),S=parseFloat(o.shift()),x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(e,t)+","+i(n,t)+"],["+r(C,t)+","+i(S,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let s=u(C,S,x,b);C=s[0],S=s[1]}break;case"q":for(;o.length>=4;){A=x+parseFloat(o.shift()),T=b+parseFloat(o.shift()),x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(A,t)+","+i(T,t)+"],["+r(A,t)+","+i(T,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let e=u(A,T,x,b);A=e[0],T=e[1]}break;case"Q":for(;o.length>=4;){A=parseFloat(o.shift()),T=parseFloat(o.shift()),x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(A,t)+","+i(T,t)+"],["+r(A,t)+","+i(T,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let e=u(A,T,x,b);A=e[0],T=e[1]}break;case"t":for(;o.length>=2;){x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(A,t)+","+i(T,t)+"],["+r(A,t)+","+i(T,t)+"],["+x+","+b+"]]);\n";let e=u(A,T,x,b);A=e[0],T=e[1]}break;case"T":for(;o.length>=2;){x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(A,t)+","+i(T,t)+"],["+r(A,t)+","+i(T,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let e=u(A,T,x,b);A=e[0],T=e[1]}break;case"s":for(;o.length>=4;){let e=C,n=S;C=x+parseFloat(o.shift()),S=b+parseFloat(o.shift()),x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(e,t)+","+i(n,t)+"],["+r(C,t)+","+i(S,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let s=u(C,S,x,b);C=s[0],S=s[1]}break;case"S":for(;o.length>=4;){let e=C,n=S;C=parseFloat(o.shift()),S=parseFloat(o.shift()),x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendBezier([["+r(e,t)+","+i(n,t)+"],["+r(C,t)+","+i(S,t)+"],["+r(x,t)+","+i(b,t)+"]]);\n";let s=u(C,S,x,b);C=s[0],S=s[1]}break;case"h":for(;o.length>=1;)x+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"H":for(;o.length>=1;)x=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"l":for(;o.length>=2;)x+=parseFloat(o.shift()),b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"L":for(;o.length>=2;)x=parseFloat(o.shift()),b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"v":for(;o.length>=1;)b+=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"V":for(;o.length>=1;)b=parseFloat(o.shift()),m+=f+D+" = "+D+".appendPoint(["+r(x,t)+","+i(b,t)+"]);\n";break;case"z":case"Z":m+=f+D+" = "+D+".close();\n",m+=f+"switch ("+D+".getTurn()) {\n",m+=f+"  default:\n",m+=f+'  case "clockwise":\n',m+=f+"  "+D+" = "+D+".innerToCAG();\n",m+=f+"  "+d+" = "+d+".union("+D+");\n",m+=f+"  break;\n",m+=f+'  case "counter-clockwise":\n',m+=f+"  "+D+" = "+D+".innerToCAG();\n",m+=f+"  "+d+" = "+d+".subtract("+D+");\n",m+=f+"  break;\n",m+=f+"}\n",x=y,b=v,E=!0;break;default:console.log("Warning: Unknow PATH command ["+s.c+"]")}}return w>0&&!1===E&&(m+=f+D+" = "+D+".expandToCAG("+g+",CSG.defaultResolution2D);\n",m+=f+d+" = "+d+".union("+D+");\n"),m}t.exports=function(e,t,n){const{level:r,indent:i,on:u,svgUnitsPmm:p,svgUnitsX:f,svgUnitsY:d,svgUnitsV:m,svgGroups:g}=n,y={group:e=>{let n=t(e);return n+=i+"var "+u+" = cag"+(r+1)+";\n",n},rect:(e,t,n,r)=>{let a=s(e.x,t,n),l=0-o(e.y,t,r);const c=s(e.width,t,n),h=o(e.height,t,r),p=s(e.rx,t,n);if(c>0&&h>0)return a=(a+c/2).toFixed(4),l=(l-h/2).toFixed(4),0===p?i+"var "+u+" = CAG.rectangle({center: ["+a+","+l+"], radius: ["+c/2+","+h/2+"]});\n":i+"var "+u+" = CAG.roundedRectangle({center: ["+a+","+l+"], radius: ["+c/2+","+h/2+"], roundradius: "+p+"});\n"},circle:(e,t,n,r,l)=>{const c=s(e.x,t,n),h=0-o(e.y,t,r),p=a(e.radius,t,l);if(p>0)return i+"var "+u+" = CAG.circle({center: ["+c+","+h+"], radius: "+p+"});\n"},ellipse:(e,t,n,r,a)=>{const l=s(e.rx,t,n),c=o(e.ry,t,r),h=s(e.cx,t,n),p=0-o(e.cy,t,r);if(l>0&&c>0)return i+"var "+u+" = CAG.ellipse({center: ["+h+","+p+"], radius: ["+l+","+c+"]});\n"},line:(e,t,n,r,h)=>{const p=s(e.x1,t,n),f=0-o(e.y1,t,r),d=s(e.x2,t,n),m=0-o(e.y2,t,r);let y=c;if("strokeWidth"in e)y=a(e.strokeWidth,t,h)/2;else{const e=l(g,"strokeWidth");null!==e&&(y=a(e,t,h)/2)}let v=i+"var "+u+" = new CSG.Path2D([["+p+","+f+"],["+d+","+m+"]],false);\n";return v+=i+u+" = "+u+".expandToCAG("+y+",CSG.defaultResolution2D);\n",v},polygon:(e,t,n,r)=>{let a=i+"var "+u+" = new CSG.Path2D([\n";for(let u=0;u<e.points.length;u++){const l=e.points[u];if("x"in l&&"y"in l){const e=s(l.x,t,n),u=0-o(l.y,t,r);a+=i+"  ["+e+","+u+"],\n"}}return a+=i+"],true);\n",a+=i+u+" = "+u+".innerToCAG();\n",a},polyline:(e,t,n,r,h)=>{let p=c;if("strokeWidth"in e)p=a(e.strokeWidth,t,h)/2;else{const e=l(g,"strokeWidth");null!==e&&(p=a(e,t,h)/2)}let f=i+"var "+u+" = new CSG.Path2D([\n";for(let a=0;a<e.points.length;a++){const u=e.points[a];if("x"in u&&"y"in u){var d=s(u.x,t,n),m=0-o(u.y,t,r);f+=i+"  ["+d+","+m+"],\n"}}return f+=i+"],false);\n",f+=i+u+" = "+u+".expandToCAG("+p+",CSG.defaultResolution2D);\n",f},path:h};return y[e.type](e,p,f,d,m,n,g)}},{"./constants":104,"./helpers":105}],109:[function(e,t,n){const{cagColor:r,cssStyle:i,css2cag:s}=e("./helpers"),{pxPmm:o}=e("./constants"),a=function(e,t){"ID"in t&&(e.id=t.ID)},u=function(e,t){if("DISPLAY"in t&&(e.visible=t.DISPLAY),"COLOR"in t&&(e.fill=r(t.COLOR)),"OPACITY"in t&&(e.opacity=t.OPACITY),"FILL"in t)e.fill=r(t.FILL);else{var n=i(t,"fill");null!==n&&(e.fill=r(n))}if("FILL-OPACITY"in t&&(e.opacity=t["FILL-OPACITY"]),"STROKE-WIDTH"in t)e.strokeWidth=t["STROKE-WIDTH"];else{var s=i(t,"stroke-width");null!==s&&(e.strokeWidth=s)}if("STROKE"in t)e.stroke=r(t.STROKE);else{let n=i(t,"stroke");null!==n&&(e.stroke=r(n))}"STROKE-OPACITY"in t&&(e.strokeOpacity=t["STROKE-OPACITY"])},l=function(e,t){var n=null;if("TRANSFORM"in t)n=t.TRANSFORM;else{var r=i(t,"transform");null!==r&&(n=r)}if(null!==n){e.transforms=[];let t=new RegExp("\\w+\\(.+\\)","i");for(var s=t.exec(n);null!==s;){let r=t.lastIndex;var o=n.indexOf(")")+1,a=n.slice(r,o),u=(a=a.trim()).slice(0,a.indexOf("(")),l=a.slice(a.indexOf("(")+1,a.indexOf(")")).trim();let i;switch(l=l.indexOf(",")>0?l.split(","):l.split(" "),u){case"translate":i={translate:[l[0],l[1]]},e.transforms.push(i);break;case"scale":1===l.length&&l.push(l[0]),i={scale:[l[0],l[1]]},e.transforms.push(i);break;case"rotate":i={rotate:l},e.transforms.push(i)}n=n.slice(o,n.length),s=t.exec(n)}}},c=function(e){var t=[],n=new RegExp("([\\d\\-\\+\\.]+)[\\s,]+([\\d\\-\\+\\.]+)[\\s,]*","i");e=e.trim();for(var r=n.exec(e);null!==r;){var i=r[0],s=n.lastIndex+i.length;i={x:r[1],y:r[2]},t.push(i),e=e.slice(s,e.length),r=n.exec(e)}return t};t.exports={svgCore:a,svgPresentation:u,svgSvg:function(e,{customPxPmm:t}){var n={type:"svg",x:0,y:0,width:"100%",height:"100%",strokeWidth:"1"};if(n.unitsPmm=[o,o],"PXPMM"in e&&(n.pxPmm=e.PXPMM,n.unitsPmm=[n.pxPmm,n.pxPmm]),"WIDTH"in e&&(n.width=e.WIDTH),"HEIGHT"in e&&(n.height=e.HEIGHT),"VIEWBOX"in e){var r=e.VIEWBOX.trim(),i=new RegExp("([\\d\\.\\-]+)[\\s,]+([\\d\\.\\-]+)[\\s,]+([\\d\\.\\-]+)[\\s,]+([\\d\\.\\-]+)","i").exec(r);if(null!==i&&(n.viewX=parseFloat(i[1]),n.viewY=parseFloat(i[2]),n.viewW=parseFloat(i[3]),n.viewH=parseFloat(i[4])),n.width.indexOf("%")<0){var l=s(n.width,t);l=n.viewW/l,n.unitsPmm[0]=l}else{const e=n.unitsPmm[0]*(parseFloat(n.width)/100);n.unitsPmm[0]=e}if(n.height.indexOf("%")<0){let e=s(n.height,o);e=n.viewH/e,n.unitsPmm[1]=e}else{const e=n.unitsPmm[1]*(parseFloat(n.height)/100);n.unitsPmm[1]=e}}else n.viewX=0,n.viewY=0,n.viewW=1920/n.unitsPmm[0],n.viewH=1080/n.unitsPmm[1];return n.viewP=Math.sqrt(n.viewW*n.viewW+n.viewH*n.viewH)/Math.SQRT2,a(n,e),u(n,e),n.objects=[],n},svgRect:function(e){var t={type:"rect",x:"0",y:"0",rx:"0",ry:"0",width:"0",height:"0"};return"X"in e&&(t.x=e.X),"Y"in e&&(t.y=e.Y),"RX"in e&&(t.rx=e.RX,"RY"in e||(t.ry=t.rx)),"RY"in e&&(t.ry=e.RY,"RX"in e||(t.rx=t.ry)),t.rx!==t.ry&&console.log("Warning: Unsupported RECT with RX and RY radius"),"WIDTH"in e&&(t.width=e.WIDTH),"HEIGHT"in e&&(t.height=e.HEIGHT),l(t,e),a(t,e),u(t,e),t},svgCircle:function(e){let t={type:"circle",x:"0",y:"0",radius:"0"};return"CX"in e&&(t.x=e.CX),"CY"in e&&(t.y=e.CY),"R"in e&&(t.radius=e.R),l(t,e),a(t,e),u(t,e),t},svgEllipse:function(e){const t={type:"ellipse",cx:"0",cy:"0",rx:"0",ry:"0"};return"CX"in e&&(t.cx=e.CX),"CY"in e&&(t.cy=e.CY),"RX"in e&&(t.rx=e.RX),"RY"in e&&(t.ry=e.RY),l(t,e),a(t,e),u(t,e),t},svgLine:function(e){var t={type:"line",x1:"0",y1:"0",x2:"0",y2:"0"};return"X1"in e&&(t.x1=e.X1),"Y1"in e&&(t.y1=e.Y1),"X2"in e&&(t.x2=e.X2),"Y2"in e&&(t.y2=e.Y2),l(t,e),a(t,e),u(t,e),t},svgPolyline:function(e){const t={type:"polyline"};return l(t,e),a(t,e),u(t,e),"POINTS"in e&&(t.points=c(e.POINTS)),t},svgPolygon:function(e){const t={type:"polygon"};return l(t,e),a(t,e),u(t,e),"POINTS"in e&&(t.points=c(e.POINTS)),t},svgGroup:function(e){let t={type:"group"};return l(t,e),a(t,e),u(t,e),t.objects=[],t},svgPath:function(e){var t={type:"path"};if(l(t,e),a(t,e),t.commands=[],"D"in e){for(var n=null,r="",i=0,s=e.D.length;i<s;){var o=e.D[i];switch(o){case"-":r.length>0&&(n.p.push(r),r=""),r+=o;break;case".":r.length>0&&r.indexOf(".")>=0&&(n.p.push(r),r=""),r+=o;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r+=o;break;case"a":case"A":case"c":case"C":case"h":case"H":case"l":case"L":case"v":case"V":case"m":case"M":case"q":case"Q":case"s":case"S":case"t":case"T":case"z":case"Z":null!==n&&(r.length>0&&(n.p.push(r),r=""),t.commands.push(n)),n={c:o,p:[]};break;case",":case" ":case"\n":null!==n&&r.length>0&&(n.p.push(r),r="")}i++}i===s&&null!==n&&(r.length>0&&n.p.push(r),t.commands.push(n))}return t},svgUse:function(e,{svgObjects:t}){var n={type:"group"};if(l(n,e),a(n,e),u(n,e),"X"in e&&"Y"in e){"transforms"in n||(n.transforms=[]);var r={translate:[e.X,e.Y]};n.transforms.push(r)}if(n.objects=[],"XLINK:HREF"in e){var i=e["XLINK:HREF"];"#"===i[0]&&(i=i.slice(1,i.length)),void 0!==t[i]&&(i=t[i],i=JSON.parse(JSON.stringify(i)),n.objects.push(i))}return n}}},{"./constants":104,"./helpers":105}],110:[function(e,t,n){const{CSG:r}=e("@jscad/csg"),i=e("onml/lib/stringify"),s=function(e,t,n){var r=0-t[0].x,i=0-t[0].y;return e.reduce((function(t,s,a){return n&&n.statusCallback&&n.statusCallback({progress:100*a/e.length}),t.concat([["path",{d:o(s,r,i)}]])}),["g"])},o=function(e,t,n){var r,i="",s=e.points.length+(e.closed?1:0);for(r=0;r<s;r++){var o=r;o>=e.points.length&&(o-=e.points.length);var a=e.points[o];i+=r>0?`L${a.x+t} ${a.y+n}`:`M${a.x+t} ${a.y+n}`}return i};t.exports={serialize:function(e,t){t&&t.statusCallback&&t.statusCallback({progress:0});var n=1e3,o=new r.Plane(r.Vector3D.Create(0,1,0),0),a=e.transform(r.Matrix4x4.mirroring(o)),u=a.getBounds(),l=a.getOutlinePaths(),c=Math.round((u[1].x-u[0].x)*n)/n,h=Math.round((u[1].y-u[0].y)*n)/n,p=["svg",{width:c+"mm",height:h+"mm",viewBox:"0 0 "+c+" "+h,version:"1.1",baseProfile:"tiny",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},s(l,u)],f=`<?xml version="1.0" encoding="UTF-8"?>\n\x3c!-- Generated by OpenJSCAD.org --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1 Tiny//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-tiny.dtd">\n${i(p)}`;return t&&t.statusCallback&&t.statusCallback({progress:100}),[f]},mimeType:"image/svg+xml"}},{"@jscad/csg":22,"onml/lib/stringify":200}],111:[function(e,t,n){const r=e("xmldom"),{ensureManifoldness:i}=e("@jscad/io-utils"),s=r.XMLSerializer;t.exports={serialize:function(e,t){t&&t.statusCallback&&t.statusCallback({progress:0}),e=i(e);const n="undefined"!=typeof document?document.implementation:new r.DOMImplementation;var o={},a=[],u={};e.polygons.map((function(n,r){var i=0,s=0,l=1;n.shared&&n.shared.color&&(i=n.shared.color[0],s=n.shared.color[1],l=n.shared.color[2]);var c,h=[],p=n.vertices.length;for(r=0;r<p;r++)(c=n.vertices[r]).getTag()in u||(a.push(c.pos._x.toString()+" "+c.pos._y.toString()+" "+c.pos._z.toString()),u[c.getTag()]=a.length-1),h.push(u[c.getTag()]);var f=h.join(" "),d=i.toString()+" "+s.toString()+" "+l.toString();d in o||(o[d]=[]),o[d].push(f),t&&t.statusCallback&&t.statusCallback({progress:100*r/e.polygons.length})}));var l=n.createDocumentType("X3D","ISO//Web3D//DTD X3D 3.1//EN","http://www.web3d.org/specifications/x3d-3.1.dtd"),c=n.createDocument(null,"X3D",l);c.insertBefore(c.createProcessingInstruction("xml",'version="1.0" encoding="UTF-8"'),c.doctype);var h=c.getElementsByTagName("X3D")[0];h.setAttribute("profile","Interchange"),h.setAttribute("version","3.1"),h.setAttribute("xsd:noNamespaceSchemaLocation","http://www.web3d.org/specifications/x3d-3.1.xsd"),h.setAttribute("xmlns:xsd","http://www.w3.org/2001/XMLSchema-instance");var p=c.createElement("Scene");h.appendChild(p);var f=!1;for(var d in o){var m=o[d],g=c.createElement("Shape");p.appendChild(g);var y=c.createElement("Appearance");g.appendChild(y);var v=c.createElement("Material");y.appendChild(v),v.setAttribute("diffuseColor",d),v.setAttribute("ambientIntensity","1.0");var x=c.createElement("IndexedFaceSet");g.appendChild(x),x.setAttribute("solid","true"),x.setAttribute("coordIndex",m.join(" -1 ")+" -1");var b=c.createElement("Coordinate");x.appendChild(b),f?b.setAttribute("USE","coords_mesh"):(b.setAttribute("DEF","coords_mesh"),b.setAttribute("point",a.join(" ")),f=!0)}const w=(new s).serializeToString(c);return t&&t.statusCallback&&t.statusCallback({progress:100}),[w]},mimeType:"model/x3d+xml"}},{"@jscad/io-utils":92,xmldom:226}],112:[function(e,t,n){!function(r,i){"object"==typeof n&&void 0!==t?i(n,e("@most/prelude")):i(r.mostMulticast=r.mostMulticast||{},r.mostPrelude)}(this,(function(e,t){"use strict";var n=function(e,t){this.source=e,this.sink=t,this.disposed=!1};function r(e,t,n){try{n.event(e,t)}catch(t){n.error(e,t)}}function i(e,t,n){try{n.end(e,t)}catch(t){n.error(e,t)}}n.prototype.dispose=function(){if(!this.disposed)return this.disposed=!0,0===this.source.remove(this.sink)&&this.source._dispose()};var s=function(e){return e.dispose()},o={dispose:function(){}},a=function(e){this.source=e,this.sinks=[],this._disposable=o};a.prototype.run=function(e,t){return 1===this.add(e)&&(this._disposable=this.source.run(this,t)),new n(this,e)},a.prototype._dispose=function(){var e=this._disposable;return this._disposable=o,Promise.resolve(e).then(s)},a.prototype.add=function(e){return this.sinks=t.append(e,this.sinks),this.sinks.length},a.prototype.remove=function(e){var n=t.findIndex(e,this.sinks);return n>=0&&(this.sinks=t.remove(n,this.sinks)),this.sinks.length},a.prototype.event=function(e,t){var n=this.sinks;if(1===n.length)return n[0].event(e,t);for(var i=0;i<n.length;++i)r(e,t,n[i])},a.prototype.end=function(e,t){for(var n=this.sinks,r=0;r<n.length;++r)i(e,t,n[r])},a.prototype.error=function(e,t){for(var n=this.sinks,r=0;r<n.length;++r)n[r].error(e,t)},e.default=function(e){var t=e.source;return t instanceof a?e:new e.constructor(new a(t))},e.MulticastSource=a,Object.defineProperty(e,"__esModule",{value:!0})}))},{"@most/prelude":113}],113:[function(e,t,n){!function(e,r){!function(e){"use strict";function t(e,t){if(e<0)throw new TypeError("n must be >= 0");var n=t.length;return 0===e||0===n?t:e>=n?[]:function(e,t,n){for(var r=new Array(n),i=0;i<n;++i)r[i]=t[e+i];return r}(e,t,n-e)}function n(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return function(t){return e(n,t)};default:return e(n,r)}}}function r(e){return function t(r,i,s){switch(arguments.length){case 0:return t;case 1:return n((function(t,n){return e(r,t,n)}));case 2:return function(t){return e(r,i,t)};default:return e(r,i,s)}}}e.cons=function(e,t){var n=t.length,r=new Array(n+1);r[0]=e;for(var i=0;i<n;++i)r[i+1]=t[i];return r},e.append=function(e,t){for(var n=t.length,r=new Array(n+1),i=0;i<n;++i)r[i]=t[i];return r[n]=e,r},e.drop=t,e.tail=function(e){return t(1,e)},e.copy=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n},e.map=function(e,t){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=e(t[i]);return r},e.reduce=function(e,t,n){for(var r=t,i=0,s=n.length;i<s;++i)r=e(r,n[i],i);return r},e.replace=function(e,t,n){if(t<0)throw new TypeError("i must be >= 0");for(var r=n.length,i=new Array(r),s=0;s<r;++s)i[s]=t===s?e:n[s];return i},e.remove=function(e,t){if(e<0)throw new TypeError("i must be >= 0");var n=t.length;return 0===n||e>=n?t:1===n?[]:function(e,t,n){var r=new Array(n),i=void 0;for(i=0;i<e;++i)r[i]=t[i];for(i=e;i<n;++i)r[i]=t[i+1];return r}(e,t,n-1)},e.removeAll=function(e,t){for(var n,r=t.length,i=new Array(r),s=0,o=0;o<r;++o)e(n=t[o])||(i[s]=n,++s);return i.length=s,i},e.findIndex=function(e,t){for(var n=0,r=t.length;n<r;++n)if(e===t[n])return n;return-1},e.isArrayLike=function(e){return null!=e&&"number"==typeof e.length&&"function"!=typeof e},e.id=function(e){return e},e.compose=function(e,t){return function(n){return e(t(n))}},e.apply=function(e,t){return e(t)},e.curry2=n,e.curry3=r,e.curry4=function(e){return function t(i,s,o,a){switch(arguments.length){case 0:return t;case 1:return r((function(t,n,r){return e(i,t,n,r)}));case 2:return n((function(t,n){return e(i,s,t,n)}));case 3:return function(t){return e(i,s,o,t)};default:return e(i,s,o,a)}}},Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof n&&void 0!==t?n:e.mostPrelude={})}(this)},{}],114:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.generate=function(e,t){var n=new w(t);return n.generator[e.type](e,n),n.output},n.baseGenerator=void 0;var i=JSON.stringify;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");var s,o,a,u,l,c,h={"||":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},p=17,f={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:p,ClassExpression:p,FunctionExpression:p,ObjectExpression:p,UpdateExpression:16,UnaryExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,AwaitExpression:2,YieldExpression:2,RestElement:1};function d(e,t){var n=e.generator;if(e.write("("),null!=t&&t.length>0){n[t[0].type](t[0],e);for(var r=t.length,i=1;i<r;i++){var s=t[i];e.write(", "),n[s.type](s,e)}}e.write(")")}function m(e,t,n,r){var i=e.generator;!function(e,t,n){var r=f[e.type];if(r===p)return!0;var i=f[t.type];return r!==i?!n&&15===r&&14===i&&"**"===t.operator||r<i:(13===r||14===r)&&("**"===e.operator&&"**"===t.operator?!n:n?h[e.operator]<=h[t.operator]:h[e.operator]<h[t.operator])}(t,n,r)?i[t.type](t,e):(e.write("("),i[t.type](t,e),e.write(")"))}function g(e,t,n,r){var i=t.split("\n"),s=i.length-1;if(e.write(i[0].trim()),s>0){e.write(r);for(var o=1;o<s;o++)e.write(n+i[o].trim()+r);e.write(n+i[s].trim())}}function y(e,t,n,r){for(var i=t.length,s=0;s<i;s++){var o=t[s];e.write(n),"L"===o.type[0]?e.write("// "+o.value.trim()+"\n"):(e.write("/*"),g(e,o.value,n,r),e.write("*/"+r))}}function v(e,t){var n=e.generator,r=t.declarations;e.write(t.kind+" ");var i=r.length;if(i>0){n.VariableDeclarator(r[0],e);for(var s=1;s<i;s++)e.write(", "),n.VariableDeclarator(r[s],e)}}var x={Program:function(e,t){var n=t.indent.repeat(t.indentLevel),r=t.lineEnd,i=t.writeComments;i&&null!=e.comments&&y(t,e.comments,n,r);for(var s=e.body,o=s.length,a=0;a<o;a++){var u=s[a];i&&null!=u.comments&&y(t,u.comments,n,r),t.write(n),this[u.type](u,t),t.write(r)}i&&null!=e.trailingComments&&y(t,e.trailingComments,n,r)},BlockStatement:c=function(e,t){var n=t.indent.repeat(t.indentLevel++),r=t.lineEnd,i=t.writeComments,s=n+t.indent;t.write("{");var o=e.body;if(null!=o&&o.length>0){t.write(r),i&&null!=e.comments&&y(t,e.comments,s,r);for(var a=o.length,u=0;u<a;u++){var l=o[u];i&&null!=l.comments&&y(t,l.comments,s,r),t.write(s),this[l.type](l,t),t.write(r)}t.write(n)}else i&&null!=e.comments&&(t.write(r),y(t,e.comments,s,r),t.write(n));i&&null!=e.trailingComments&&y(t,e.trailingComments,s,r),t.write("}"),t.indentLevel--},ClassBody:c,EmptyStatement:function(e,t){t.write(";")},ExpressionStatement:function(e,t){var n=f[e.expression.type];n===p||3===n&&"O"===e.expression.left.type[0]?(t.write("("),this[e.expression.type](e.expression,t),t.write(")")):this[e.expression.type](e.expression,t),t.write(";")},IfStatement:function(e,t){t.write("if ("),this[e.test.type](e.test,t),t.write(") "),this[e.consequent.type](e.consequent,t),null!=e.alternate&&(t.write(" else "),this[e.alternate.type](e.alternate,t))},LabeledStatement:function(e,t){this[e.label.type](e.label,t),t.write(": "),this[e.body.type](e.body,t)},BreakStatement:function(e,t){t.write("break"),null!=e.label&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},ContinueStatement:function(e,t){t.write("continue"),null!=e.label&&(t.write(" "),this[e.label.type](e.label,t)),t.write(";")},WithStatement:function(e,t){t.write("with ("),this[e.object.type](e.object,t),t.write(") "),this[e.body.type](e.body,t)},SwitchStatement:function(e,t){var n=t.indent.repeat(t.indentLevel++),r=t.lineEnd,i=t.writeComments;t.indentLevel++;var s=n+t.indent,o=s+t.indent;t.write("switch ("),this[e.discriminant.type](e.discriminant,t),t.write(") {"+r);for(var a=e.cases,u=a.length,l=0;l<u;l++){var c=a[l];i&&null!=c.comments&&y(t,c.comments,s,r),c.test?(t.write(s+"case "),this[c.test.type](c.test,t),t.write(":"+r)):t.write(s+"default:"+r);for(var h=c.consequent,p=h.length,f=0;f<p;f++){var d=h[f];i&&null!=d.comments&&y(t,d.comments,o,r),t.write(o),this[d.type](d,t),t.write(r)}}t.indentLevel-=2,t.write(n+"}")},ReturnStatement:function(e,t){t.write("return"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t)),t.write(";")},ThrowStatement:function(e,t){t.write("throw "),this[e.argument.type](e.argument,t),t.write(";")},TryStatement:function(e,t){if(t.write("try "),this[e.block.type](e.block,t),e.handler){var n=e.handler;null==n.param?t.write(" catch "):(t.write(" catch ("),this[n.param.type](n.param,t),t.write(") ")),this[n.body.type](n.body,t)}e.finalizer&&(t.write(" finally "),this[e.finalizer.type](e.finalizer,t))},WhileStatement:function(e,t){t.write("while ("),this[e.test.type](e.test,t),t.write(") "),this[e.body.type](e.body,t)},DoWhileStatement:function(e,t){t.write("do "),this[e.body.type](e.body,t),t.write(" while ("),this[e.test.type](e.test,t),t.write(");")},ForStatement:function(e,t){if(t.write("for ("),null!=e.init){var n=e.init;"V"===n.type[0]?v(t,n):this[n.type](n,t)}t.write("; "),e.test&&this[e.test.type](e.test,t),t.write("; "),e.update&&this[e.update.type](e.update,t),t.write(") "),this[e.body.type](e.body,t)},ForInStatement:s=function(e,t){t.write("for ".concat(e.await?"await ":"","("));var n=e.left;"V"===n.type[0]?v(t,n):this[n.type](n,t),t.write("I"===e.type[3]?" in ":" of "),this[e.right.type](e.right,t),t.write(") "),this[e.body.type](e.body,t)},ForOfStatement:s,DebuggerStatement:function(e,t){t.write("debugger;"+t.lineEnd)},FunctionDeclaration:o=function(e,t){t.write((e.async?"async ":"")+(e.generator?"function* ":"function ")+(e.id?e.id.name:""),e),d(t,e.params),t.write(" "),this[e.body.type](e.body,t)},FunctionExpression:o,VariableDeclaration:function(e,t){v(t,e),t.write(";")},VariableDeclarator:function(e,t){this[e.id.type](e.id,t),null!=e.init&&(t.write(" = "),this[e.init.type](e.init,t))},ClassDeclaration:function(e,t){t.write("class "+(e.id?"".concat(e.id.name," "):""),e),e.superClass&&(t.write("extends "),this[e.superClass.type](e.superClass,t),t.write(" ")),this.ClassBody(e.body,t)},ImportDeclaration:function(e,t){t.write("import ");var n=e.specifiers,r=n.length,i=0;if(r>0){for(;i<r;){i>0&&t.write(", ");var s=n[i],o=s.type[6];if("D"===o)t.write(s.local.name,s),i++;else{if("N"!==o)break;t.write("* as "+s.local.name,s),i++}}if(i<r){for(t.write("{");;){var a=n[i],u=a.imported.name;if(t.write(u,a),u!==a.local.name&&t.write(" as "+a.local.name),!(++i<r))break;t.write(", ")}t.write("}")}t.write(" from ")}this.Literal(e.source,t),t.write(";")},ExportDefaultDeclaration:function(e,t){t.write("export default "),this[e.declaration.type](e.declaration,t),f[e.declaration.type]&&"F"!==e.declaration.type[0]&&t.write(";")},ExportNamedDeclaration:function(e,t){if(t.write("export "),e.declaration)this[e.declaration.type](e.declaration,t);else{t.write("{");var n=e.specifiers,r=n.length;if(r>0)for(var i=0;;){var s=n[i],o=s.local.name;if(t.write(o,s),o!==s.exported.name&&t.write(" as "+s.exported.name),!(++i<r))break;t.write(", ")}t.write("}"),e.source&&(t.write(" from "),this.Literal(e.source,t)),t.write(";")}},ExportAllDeclaration:function(e,t){t.write("export * from "),this.Literal(e.source,t),t.write(";")},MethodDefinition:function(e,t){e.static&&t.write("static ");var n=e.kind[0];"g"!==n&&"s"!==n||t.write(e.kind+" "),e.value.async&&t.write("async "),e.value.generator&&t.write("*"),e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),d(t,e.value.params),t.write(" "),this[e.value.body.type](e.value.body,t)},ClassExpression:function(e,t){this.ClassDeclaration(e,t)},ArrowFunctionExpression:function(e,t){t.write(e.async?"async ":"",e);var n=e.params;null!=n&&(1===n.length&&"I"===n[0].type[0]?t.write(n[0].name,n[0]):d(t,e.params)),t.write(" => "),"O"===e.body.type[0]?(t.write("("),this.ObjectExpression(e.body,t),t.write(")")):this[e.body.type](e.body,t)},ThisExpression:function(e,t){t.write("this",e)},Super:function(e,t){t.write("super",e)},RestElement:a=function(e,t){t.write("..."),this[e.argument.type](e.argument,t)},SpreadElement:a,YieldExpression:function(e,t){t.write(e.delegate?"yield*":"yield"),e.argument&&(t.write(" "),this[e.argument.type](e.argument,t))},AwaitExpression:function(e,t){t.write("await "),e.argument&&this[e.argument.type](e.argument,t)},TemplateLiteral:function(e,t){var n=e.quasis,r=e.expressions;t.write("`");for(var i=r.length,s=0;s<i;s++){var o=r[s];this.TemplateElement(n[s],t),t.write("${"),this[o.type](o,t),t.write("}")}t.write(n[n.length-1].value.raw),t.write("`")},TemplateElement:function(e,t){t.write(e.value.raw)},TaggedTemplateExpression:function(e,t){this[e.tag.type](e.tag,t),this[e.quasi.type](e.quasi,t)},ArrayExpression:l=function(e,t){if(t.write("["),e.elements.length>0)for(var n=e.elements,r=n.length,i=0;;){var s=n[i];if(null!=s&&this[s.type](s,t),!(++i<r)){null==s&&t.write(", ");break}t.write(", ")}t.write("]")},ArrayPattern:l,ObjectExpression:function(e,t){var n=t.indent.repeat(t.indentLevel++),r=t.lineEnd,i=t.writeComments,s=n+t.indent;if(t.write("{"),e.properties.length>0){t.write(r),i&&null!=e.comments&&y(t,e.comments,s,r);for(var o=","+r,a=e.properties,u=a.length,l=0;;){var c=a[l];if(i&&null!=c.comments&&y(t,c.comments,s,r),t.write(s),this[c.type](c,t),!(++l<u))break;t.write(o)}t.write(r),i&&null!=e.trailingComments&&y(t,e.trailingComments,s,r),t.write(n+"}")}else i?null!=e.comments?(t.write(r),y(t,e.comments,s,r),null!=e.trailingComments&&y(t,e.trailingComments,s,r),t.write(n+"}")):null!=e.trailingComments?(t.write(r),y(t,e.trailingComments,s,r),t.write(n+"}")):t.write("}"):t.write("}");t.indentLevel--},Property:function(e,t){e.method||"i"!==e.kind[0]?this.MethodDefinition(e,t):(e.shorthand||(e.computed?(t.write("["),this[e.key.type](e.key,t),t.write("]")):this[e.key.type](e.key,t),t.write(": ")),this[e.value.type](e.value,t))},ObjectPattern:function(e,t){if(t.write("{"),e.properties.length>0)for(var n=e.properties,r=n.length,i=0;this[n[i].type](n[i],t),++i<r;)t.write(", ");t.write("}")},SequenceExpression:function(e,t){d(t,e.expressions)},UnaryExpression:function(e,t){e.prefix?(t.write(e.operator),e.operator.length>1&&t.write(" "),f[e.argument.type]<f.UnaryExpression?(t.write("("),this[e.argument.type](e.argument,t),t.write(")")):this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},UpdateExpression:function(e,t){e.prefix?(t.write(e.operator),this[e.argument.type](e.argument,t)):(this[e.argument.type](e.argument,t),t.write(e.operator))},AssignmentExpression:function(e,t){this[e.left.type](e.left,t),t.write(" "+e.operator+" "),this[e.right.type](e.right,t)},AssignmentPattern:function(e,t){this[e.left.type](e.left,t),t.write(" = "),this[e.right.type](e.right,t)},BinaryExpression:u=function(e,t){var n="in"===e.operator;n&&t.write("("),m(t,e.left,e,!1),t.write(" "+e.operator+" "),m(t,e.right,e,!0),n&&t.write(")")},LogicalExpression:u,ConditionalExpression:function(e,t){f[e.test.type]>f.ConditionalExpression?this[e.test.type](e.test,t):(t.write("("),this[e.test.type](e.test,t),t.write(")")),t.write(" ? "),this[e.consequent.type](e.consequent,t),t.write(" : "),this[e.alternate.type](e.alternate,t)},NewExpression:function(e,t){t.write("new "),f[e.callee.type]<f.CallExpression||function(e){for(var t=e;null!=t;){var n=t.type;if("C"===n[0]&&"a"===n[1])return!0;if("M"!==n[0]||"e"!==n[1]||"m"!==n[2])return!1;t=t.object}}(e.callee)?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),d(t,e.arguments)},CallExpression:function(e,t){f[e.callee.type]<f.CallExpression?(t.write("("),this[e.callee.type](e.callee,t),t.write(")")):this[e.callee.type](e.callee,t),d(t,e.arguments)},MemberExpression:function(e,t){f[e.object.type]<f.MemberExpression?(t.write("("),this[e.object.type](e.object,t),t.write(")")):this[e.object.type](e.object,t),e.computed?(t.write("["),this[e.property.type](e.property,t),t.write("]")):(t.write("."),this[e.property.type](e.property,t))},MetaProperty:function(e,t){t.write(e.meta.name+"."+e.property.name,e)},Identifier:function(e,t){t.write(e.name,e)},Literal:function(e,t){null!=e.raw?t.write(e.raw,e):null!=e.regex?this.RegExpLiteral(e,t):t.write(i(e.value),e)},RegExpLiteral:function(e,t){var n=e.regex;t.write("/".concat(n.pattern,"/").concat(n.flags),e)}};n.baseGenerator=x;var b={},w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=null==t?b:t;this.output="",null!=n.output?(this.output=n.output,this.write=this.writeToStream):this.output="",this.generator=null!=n.generator?n.generator:x,this.indent=null!=n.indent?n.indent:"  ",this.lineEnd=null!=n.lineEnd?n.lineEnd:"\n",this.indentLevel=null!=n.startingIndentLevel?n.startingIndentLevel:0,this.writeComments=!!n.comments&&n.comments,null!=n.sourceMap&&(this.write=null==n.output?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=n.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split("\n").length-1,this.mapping={original:null,generated:this,name:void 0,source:n.sourceMap.file||n.sourceMap._file})}var t,n;return t=e,(n=[{key:"write",value:function(e){this.output+=e}},{key:"writeToStream",value:function(e){this.output.write(e)}},{key:"writeAndMap",value:function(e,t){this.output+=e,this.map(e,t)}},{key:"writeToStreamAndMap",value:function(e,t){this.output.write(e),this.map(e,t)}},{key:"map",value:function(e,t){if(null!=t&&null!=t.loc){var n=this.mapping;n.original=t.loc.start,n.name=t.name,this.sourceMap.addMapping(n)}e.length>0&&(this.lineEndSize>0&&e.endsWith(this.lineEnd)?(this.line+=this.lineEndSize,this.column=0):"\n"===e[e.length-1]?(this.line++,this.column=0):this.column+=e.length)}},{key:"toString",value:function(){return this.output}}])&&r(t.prototype,n),e}()},{}],115:[function(e,t,n){"use strict";n.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=l(e),o=r[0],a=r[1],u=new s(function(e,t,n){return 3*(t+n)/4-n}(0,o,a)),c=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,u=n-i;a<u;a+=o)s.push(c(e,a,a+o>u?u:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],116:[function(e,t,n){},{}],117:[function(e,t,n){var r=e("buffer").Buffer,i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},s=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=a;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=o)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function o(e){return e.toString(this.encoding)}function a(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}s.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(r=t.charCodeAt(i))>=55296&&r<=56319){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),e.copy(this.charBuffer,0,0,s),t.substring(0,i)}return t},s.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},s.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:118}],118:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),i=e("ieee754"),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,n)}function u(e,n,r){if("string"==typeof e)return function(e,n){if("string"==typeof n&&""!==n||(n="utf8"),!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|f(e,n),i=a(r),s=i.write(e,n);return s!==r&&(i=i.slice(0,s)),i}(e,n);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),Object.setPrototypeOf(i,t.prototype),i}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,n,r);var s=function(e){if(t.isBuffer(e)){var n=0|p(e.length),r=a(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||U(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),a(e<0?0:0|p(e))}function h(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function f(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return R(e).length;default:if(s)return i?-1:L(e).length;n=(""+n).toLowerCase(),s=!0}}function d(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,n,r,i,s){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),U(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:y(e,n,r,i,s);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):y(e,[n],r,i,s);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var s,o=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(s=n;s<a;s++)if(l(e,s)===l(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===u)return c*o}else-1!==c&&(s-=s-c),c=-1}else for(n+u>a&&(n=a-u),s=n;s>=0;s--){for(var h=!0,p=0;p<u;p++)if(l(e,s+p)!==l(t,p)){h=!1;break}if(h)return s}return-1}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(U(a))return o;e[n+o]=a}return o}function x(e,t,n,r){return j(L(t,e.length-n),e,n,r)}function b(e,t,n,r){return j(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return b(e,t,n,r)}function D(e,t,n,r){return j(R(t),e,n,r)}function E(e,t,n,r){return j(function(e,t){for(var n,r,i,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,o,a,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&l)<<6|63&s)>127&&(c=u);break;case 3:s=e[i+1],o=e[i+2],128==(192&s)&&128==(192&o)&&(u=(15&l)<<12|(63&s)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(u=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=h}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}n.kMaxLength=o,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(z(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),z(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,s=0,o=Math.min(r,i);s<o;++s)if(e[s]!==n[s]){r=e[s],i=n[s];break}return r<i?-1:i<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),s=0;for(r=0;r<e.length;++r){var o=e[r];if(z(o,Uint8Array)&&(o=t.from(o)),!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i},t.byteLength=f,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):d.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s&&(t.prototype[s]=t.prototype.inspect),t.prototype.compare=function(e,n,r,i,s){if(z(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),n<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&n>=r)return 0;if(i>=s)return-1;if(n>=r)return 1;if(this===e)return 0;for(var o=(s>>>=0)-(i>>>=0),a=(r>>>=0)-(n>>>=0),u=Math.min(o,a),l=this.slice(i,s),c=e.slice(n,r),h=0;h<u;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return D(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function _(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=V[e[s]];return i}function F(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,n,r,i,s,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>s||n<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,s){return t=+t,n>>>=0,s||I(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,s){return t=+t,n>>>=0,s||I(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return Object.setPrototypeOf(i,t.prototype),i},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||P(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},t.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,s=0;for(this[t]=255&e;++s<n&&(i*=256);)this[t+s]=e/i&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<n&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var s=n-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var o=s-1;o>=0;--o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return s},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var s=e.charCodeAt(0);("utf8"===i&&s<128||"latin1"===i)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var o;if(n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=n;o<r;++o)this[o]=e;else{var a=t.isBuffer(e)?e:t.from(e,i),u=a.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=a[o%u]}return this};var O=/[^+/0-9A-Za-z-_]/g;function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function R(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var V=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":115,buffer:118,ieee754:124}],119:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":126}],120:[function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=n(1),i=n(3),s=n(11),o=n(15);t.parse=function(e,t,n){var o,a=null,u=function(e,t){n&&n(e,t),a&&a.visit(e,t)},l="function"==typeof n?u:null,c=!1;if(t){c="boolean"==typeof t.comment&&t.comment;var h="boolean"==typeof t.attachComment&&t.attachComment;(c||h)&&((a=new r.CommentHandler).attach=h,t.comment=!0,l=u)}var p=(o=t&&"boolean"==typeof t.jsx&&t.jsx?new s.JSXParser(e,t,l):new i.Parser(e,t,l)).parseProgram();return c&&(p.comments=a.comments),o.config.tokens&&(p.tokens=o.tokens),o.config.tolerant&&(p.errors=o.errorHandler.errors),p},t.tokenize=function(e,t,n){var r,i=new o.Tokenizer(e,t);r=[];try{for(;;){var s=i.getNextToken();if(!s)break;n&&(s=n(s)),r.push(s)}}catch(e){i.errorHandler.tolerate(e)}return i.errorHandler.tolerant&&(r.errors=i.errors()),r};var a=n(2);t.Syntax=a.Syntax,t.version="3.1.3"},function(e,t,n){"use strict";var r=n(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===r.Syntax.BlockStatement&&0===e.body.length){for(var n=[],i=this.leading.length-1;i>=0;--i){var s=this.leading[i];t.end.offset>=s.start&&(n.unshift(s.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e,t){var n=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var i=this.trailing[r];i.start>=t.end.offset&&n.unshift(i.comment)}return this.trailing.length=0,n}var s=this.stack[this.stack.length-1];if(s&&s.node.trailingComments){var o=s.node.trailingComments[0];o&&o.range[0]>=t.end.offset&&(n=s.node.trailingComments,delete s.node.trailingComments)}return n},e.prototype.findLeadingComments=function(e,t){for(var n,r=[];this.stack.length>0&&(o=this.stack[this.stack.length-1])&&o.start>=t.start.offset;)n=this.stack.pop().node;if(n){for(var i=(n.leadingComments?n.leadingComments.length:0)-1;i>=0;--i){var s=n.leadingComments[i];s.range[1]<=t.start.offset&&(r.unshift(s),n.leadingComments.splice(i,1))}return n.leadingComments&&0===n.leadingComments.length&&delete n.leadingComments,r}for(i=this.leading.length-1;i>=0;--i){var o;(o=this.leading[i]).start<=t.start.offset&&(r.unshift(o.comment),this.leading.splice(i,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===r.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(e,t),i=this.findLeadingComments(e,t);i.length>0&&(e.leadingComments=i),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",r={type:n,value:e.value};if(e.range&&(r.range=e.range),e.loc&&(r.loc=e.loc),this.comments.push(r),this.attach){var i={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=n,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){"use strict";t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var r=n(4),i=n(5),s=n(6),o=n(7),a=n(8),u=n(2),l=n(10),c="ArrowParameterPlaceHolder",h=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new s.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.sourceType=t&&"module"===t.sourceType?"module":"script",this.lookahead=null,this.hasLineTerminator=!1,this.context={allowIn:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:"module"===this.sourceType},this.tokens=[],this.startMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0},this.lastMarker={index:0,lineNumber:this.scanner.lineNumber,lineStart:0},this.nextToken(),this.lastMarker={index:this.scanner.index,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]})),o=this.lastMarker.index,a=this.lastMarker.lineNumber,u=this.lastMarker.index-this.lastMarker.lineStart+1;throw this.errorHandler.createError(o,a,u,s)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,(function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]})),o=this.lastMarker.index,a=this.scanner.lineNumber,u=this.lastMarker.index-this.lastMarker.lineStart+1;this.errorHandler.tolerateError(o,a,u,s)},e.prototype.unexpectedTokenError=function(e,t){var n,r=t||i.Messages.UnexpectedToken;if(e?(t||(r=e.type===o.Token.EOF?i.Messages.UnexpectedEOS:e.type===o.Token.Identifier?i.Messages.UnexpectedIdentifier:e.type===o.Token.NumericLiteral?i.Messages.UnexpectedNumber:e.type===o.Token.StringLiteral?i.Messages.UnexpectedString:e.type===o.Token.Template?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,e.type===o.Token.Keyword&&(this.scanner.isFutureReservedWord(e.value)?r=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(r=i.Messages.StrictReservedWord))),n=e.type===o.Token.Template?e.value.raw:e.value):n="ILLEGAL",r=r.replace("%0",n),e&&"number"==typeof e.lineNumber){var s=e.start,a=e.lineNumber,u=e.start-this.lastMarker.lineStart+1;return this.errorHandler.createError(s,a,u,r)}return s=this.lastMarker.index,a=this.lastMarker.lineNumber,u=s-this.lastMarker.lineStart+1,this.errorHandler.createError(s,a,u,r)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],r=void 0;r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(r.range=n.range),this.config.loc&&(r.loc=n.loc);var i={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(r,i)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t;return t={type:o.TokenName[e.type],value:this.getTokenRaw(e)},this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),e.regex&&(t.regex=e.regex),t},e.prototype.nextToken=function(){var e,t=this.lookahead;return this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart,e=this.scanner.lex(),this.hasLineTerminator=!(!t||!e)&&t.lineNumber!==e.lineNumber,e&&this.context.strict&&e.type===o.Token.Identifier&&this.scanner.isStrictModeReservedWord(e.value)&&(e.type=o.Token.Keyword),this.lookahead=e,this.config.tokens&&e.type!==o.Token.EOF&&this.tokens.push(this.convertToken(e)),t},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.lineNumber,column:this.startMarker.index-this.startMarker.lineStart}},e.prototype.startNode=function(e){return{index:e.start,line:e.lineNumber,column:e.start-e.lineStart}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.lineNumber,column:this.lastMarker.index-this.lastMarker.lineStart,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();t.type===o.Token.Punctuator&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;e.type===o.Token.Punctuator&&","===e.value?this.nextToken():e.type===o.Token.Punctuator&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();t.type===o.Token.Keyword&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return this.lookahead.type===o.Token.Punctuator&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return this.lookahead.type===o.Token.Keyword&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return this.lookahead.type===o.Token.Identifier&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(this.lookahead.type!==o.Token.Punctuator)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=r,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===o.Token.EOF||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.lineNumber=this.startMarker.lineNumber,this.lastMarker.lineStart=this.startMarker.lineStart)},e.prototype.parsePrimaryExpression=function(){var e,t,n,r=this.createNode();switch(this.lookahead.type){case o.Token.Identifier:"module"===this.sourceType&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.finalize(r,new l.Identifier(this.nextToken().value));break;case o.Token.NumericLiteral:case o.Token.StringLiteral:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(r,new l.Literal(t.value,n));break;case o.Token.BooleanLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,(t=this.nextToken()).value="true"===t.value,n=this.getTokenRaw(t),e=this.finalize(r,new l.Literal(t.value,n));break;case o.Token.NullLiteral:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,(t=this.nextToken()).value=null,n=this.getTokenRaw(t),e=this.finalize(r,new l.Literal(t.value,n));break;case o.Token.Template:e=this.parseTemplateLiteral();break;case o.Token.Punctuator:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(r,new l.RegexLiteral(t.value,n,t.regex));break;default:this.throwUnexpectedToken(this.nextToken())}break;case o.Token.Keyword:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(r,new l.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(r,new l.ThisExpression)):this.matchKeyword("class")?e=this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new l.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new l.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!1;var n=this.parseFormalParameters(),r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new l.FunctionExpression(null,n.params,r,!1))},e.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),t=this.nextToken(),n=null;switch(t.type){case o.Token.StringLiteral:case o.Token.NumericLiteral:this.context.strict&&t.octal&&this.tolerateUnexpectedToken(t,i.Messages.StrictOctalLiteral);var r=this.getTokenRaw(t);n=this.finalize(e,new l.Literal(t.value,r));break;case o.Token.Identifier:case o.Token.BooleanLiteral:case o.Token.NullLiteral:case o.Token.Keyword:n=this.finalize(e,new l.Identifier(t.value));break;case o.Token.Punctuator:"["===t.value?(n=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):this.throwUnexpectedToken(t);break;default:this.throwUnexpectedToken(t)}return n},e.prototype.isPropertyKey=function(e,t){return e.type===u.Syntax.Identifier&&e.name===t||e.type===u.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n,r,s=this.createNode(),a=this.lookahead,u=!1,c=!1,h=!1;a.type===o.Token.Identifier?(this.nextToken(),n=this.finalize(s,new l.Identifier(a.value))):this.match("*")?this.nextToken():(u=this.match("["),n=this.parseObjectPropertyKey());var p=this.qualifiedPropertyName(this.lookahead);if(a.type===o.Token.Identifier&&"get"===a.value&&p)t="get",u=this.match("["),n=this.parseObjectPropertyKey(),this.context.allowYield=!1,r=this.parseGetterMethod();else if(a.type===o.Token.Identifier&&"set"===a.value&&p)t="set",u=this.match("["),n=this.parseObjectPropertyKey(),r=this.parseSetterMethod();else if(a.type===o.Token.Punctuator&&"*"===a.value&&p)t="init",u=this.match("["),n=this.parseObjectPropertyKey(),r=this.parseGeneratorMethod(),c=!0;else if(n||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":"))!u&&this.isPropertyKey(n,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),r=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))r=this.parsePropertyMethodFunction(),c=!0;else if(a.type===o.Token.Identifier){var f=this.finalize(s,new l.Identifier(a.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),h=!0;var d=this.isolateCoverGrammar(this.parseAssignmentExpression);r=this.finalize(s,new l.AssignmentPattern(f,d))}else h=!0,r=f}else this.throwUnexpectedToken(this.nextToken());return this.finalize(s,new l.Property(t,n,u,r,c,h))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new l.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){r.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n={raw:t.value.raw,cooked:t.value.cooked};return this.finalize(e,new l.TemplateElement(n,t.tail))},e.prototype.parseTemplateElement=function(){this.lookahead.type!==o.Token.Template&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n={raw:t.value.raw,cooked:t.value.cooked};return this.finalize(e,new l.TemplateElement(n,t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],r=this.parseTemplateHead();for(n.push(r);!r.tail;)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new l.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case u.Syntax.Identifier:case u.Syntax.MemberExpression:case u.Syntax.RestElement:case u.Syntax.AssignmentPattern:break;case u.Syntax.SpreadElement:e.type=u.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case u.Syntax.ArrayExpression:e.type=u.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case u.Syntax.ObjectExpression:for(e.type=u.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case u.Syntax.AssignmentExpression:e.type=u.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:c,params:[]};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:c,params:[e]};else{var r=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var i=[];for(this.context.isAssignmentTarget=!1,i.push(e);this.startMarker.index<this.scanner.length&&this.match(",");){if(this.nextToken(),this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var s=0;s<i.length;s++)this.reinterpretExpressionAsPattern(i[s]);r=!0,e={type:c,params:i}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(r)break}r||(e=this.finalize(this.startNode(t),new l.SequenceExpression(i)))}if(!r){if(this.expect(")"),this.match("=>")&&(e.type===u.Syntax.Identifier&&"yield"===e.name&&(r=!0,e={type:c,params:[e]}),!r)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===u.Syntax.SequenceExpression)for(s=0;s<e.expressions.length;s++)this.reinterpretExpressionAsPattern(e.expressions[s]);else this.reinterpretExpressionAsPattern(e);var o=e.type===u.Syntax.SequenceExpression?e.expressions:[e];e={type:c,params:o}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;this.expectCommaSeparator()}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return e.type===o.Token.Identifier||e.type===o.Token.Keyword||e.type===o.Token.BooleanLiteral||e.type===o.Token.NullLiteral},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new l.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(r.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===o.Token.Identifier&&this.context.inFunctionBody&&"target"===this.lookahead.value){var i=this.parseIdentifierName();e=new l.MetaProperty(n,i)}else this.throwUnexpectedToken(this.lookahead);else{var s=this.isolateCoverGrammar(this.parseLeftHandSideExpression),a=this.match("(")?this.parseArguments():[];e=new l.NewExpression(s,a),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new l.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var r=this.parseIdentifierName();e=this.finalize(this.startNode(t),new l.StaticMemberExpression(e,r))}else if(this.match("(")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var i=this.parseArguments();e=this.finalize(this.startNode(t),new l.CallExpression(e,i))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),r=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new l.ComputedMemberExpression(e,r));else{if(this.lookahead.type!==o.Token.Template||!this.lookahead.head)break;var s=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new l.TaggedTemplateExpression(e,s))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new l.Super)},e.prototype.parseLeftHandSideExpression=function(){r.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new l.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new l.StaticMemberExpression(t,n));else{if(this.lookahead.type!==o.Token.Template||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new l.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var s=!0;e=this.finalize(n,new l.UpdateExpression(r.value,e,s)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===o.Token.Punctuator&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=this.nextToken().value;s=!1,e=this.finalize(this.startNode(t),new l.UpdateExpression(a,e,s))}return e},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new l.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===u.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==u.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,r=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new l.BinaryExpression("**",n,r))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return e.type===o.Token.Punctuator?this.operatorPrecedence[t]||0:e.type===o.Token.Keyword&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,r=this.binaryPrecedence(n);if(r>0){this.nextToken(),n.prec=r,this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],s=t,o=this.isolateCoverGrammar(this.parseExponentiationExpression),a=[s,n,o];!((r=this.binaryPrecedence(this.lookahead))<=0);){for(;a.length>2&&r<=a[a.length-2].prec;){o=a.pop();var u=a.pop().value;s=a.pop(),i.pop();var c=this.startNode(i[i.length-1]);a.push(this.finalize(c,new l.BinaryExpression(u,s,o)))}(n=this.nextToken()).prec=r,a.push(n),i.push(this.lookahead),a.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var h=a.length-1;for(t=a[h],i.pop();h>1;)c=this.startNode(i.pop()),t=this.finalize(c,new l.BinaryExpression(a[h-1].value,a[h-2],t)),h-=2}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new l.ConditionalExpression(t,r,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case u.Syntax.Identifier:this.validateParam(e,t,t.name);break;case u.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case u.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case u.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case u.Syntax.YieldExpression:break;default:for(r.assert(t.type===u.Syntax.ObjectPattern,"Invalid type"),n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n=[e];switch(e.type){case u.Syntax.Identifier:break;case c:n=e.params;break;default:return null}t={paramSet:{}};for(var r=0;r<n.length;++r)(s=n[r]).type===u.Syntax.AssignmentPattern&&s.right.type===u.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=u.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate),this.checkPatternParam(t,s),n[r]=s;if(this.context.strict||!this.context.allowYield)for(r=0;r<n.length;++r){var s;(s=n[r]).type===u.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var o=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(o,t.message)}return{params:n,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if((e=this.parseConditionalExpression()).type===c||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=this.reinterpretAsCoverFormalsList(e);if(r){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var s=this.context.strict,o=this.context.allowYield;this.context.allowYield=!0;var a=this.startNode(t);this.expect("=>");var h=this.match("{")?this.parseFunctionSourceElements():this.isolateCoverGrammar(this.parseAssignmentExpression),p=h.type!==u.Syntax.BlockStatement;this.context.strict&&r.firstRestricted&&this.throwUnexpectedToken(r.firstRestricted,r.message),this.context.strict&&r.stricted&&this.tolerateUnexpectedToken(r.stricted,r.message),e=this.finalize(a,new l.ArrowFunctionExpression(r.params,h,p)),this.context.strict=s,this.context.allowYield=o}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===u.Syntax.Identifier){var f=e;this.scanner.isRestrictedWord(f.name)&&this.tolerateUnexpectedToken(n,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(f.name)&&this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),n=this.nextToken();var d=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new l.AssignmentExpression(n.value,e,d)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);this.startMarker.index<this.scanner.length&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new l.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e=null;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===o.Token.Keyword)switch(this.lookahead.value){case"export":"module"!==this.sourceType&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":"module"!==this.sourceType&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new l.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),r=this.parsePattern([],e);this.context.strict&&r.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var s=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.expect("="),s=this.isolateCoverGrammar(this.parseAssignmentExpression)):(!t.inFor&&r.type!==u.Syntax.Identifier||this.match("="))&&(this.expect("="),s=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new l.VariableDeclarator(r,s))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.index,t=this.scanner.lineNumber,n=this.scanner.lineStart;this.collectComments();var r=this.scanner.lex();return this.scanner.index=e,this.scanner.lineNumber=t,this.scanner.lineStart=n,r.type===o.Token.Identifier||r.type===o.Token.Punctuator&&"["===r.value||r.type===o.Token.Punctuator&&"{"===r.value||r.type===o.Token.Keyword&&"let"===r.value||r.type===o.Token.Keyword&&"yield"===r.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;r.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var i=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new l.VariableDeclaration(i,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var r=this.parsePattern(e,t);return this.finalize(n,new l.RestElement(r))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var r=[];!this.match("]");)if(this.match(","))this.nextToken(),r.push(null);else{if(this.match("...")){r.push(this.parseBindingRestElement(e,t));break}r.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new l.ArrayPattern(r))},e.prototype.parsePropertyPattern=function(e,t){var n,r,i=this.createNode(),s=!1,a=!1;if(this.lookahead.type===o.Token.Identifier){var u=this.lookahead;n=this.parseVariableIdentifier();var c=this.finalize(i,new l.Identifier(u.value));if(this.match("=")){e.push(u),a=!0,this.nextToken();var h=this.parseAssignmentExpression();r=this.finalize(this.startNode(u),new l.AssignmentPattern(c,h))}else this.match(":")?(this.expect(":"),r=this.parsePatternWithDefault(e,t)):(e.push(u),a=!0,r=c)}else s=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),r=this.parsePatternWithDefault(e,t);return this.finalize(i,new l.Property("init",n,s,r,!1,a))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new l.ObjectPattern(r))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.UnexpectedToken),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,r=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var s=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,r=this.finalize(this.startNode(n),new l.AssignmentPattern(r,s))}return r},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return n.type===o.Token.Keyword&&"yield"===n.value?(this.context.strict&&this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord),this.context.allowYield||this.throwUnexpectedToken(n)):n.type!==o.Token.Identifier?this.context.strict&&n.type===o.Token.Keyword&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,i.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):"module"===this.sourceType&&n.type===o.Token.Identifier&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new l.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var r=null;return this.match("=")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===u.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new l.VariableDeclarator(n,r))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new l.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new l.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new l.ExpressionStatement(t))},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),e=this.parseStatement(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseStatement())),this.finalize(t,new l.IfStatement(r,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();return this.expect(")"),this.match(";")&&this.nextToken(),this.finalize(e,new l.DoWhileStatement(n,r))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var r=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=r}return this.finalize(t,new l.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,r=null,s=null,o=null,a=!0,c=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){r=this.createNode(),this.nextToken();var h=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=h,1===p.length&&this.matchKeyword("in")){var f=p[0];f.init&&(f.id.type===u.Syntax.ArrayPattern||f.id.type===u.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),r=this.finalize(r,new l.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseExpression(),r=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new l.VariableDeclaration(p,"var")),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,a=!1):(r=this.finalize(r,new l.VariableDeclaration(p,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){r=this.createNode();var d=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(h=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(d,{inFor:!0}),this.context.allowIn=h,1===p.length&&null===p[0].init&&this.matchKeyword("in")?(r=this.finalize(r,new l.VariableDeclaration(p,d)),this.nextToken(),e=r,t=this.parseExpression(),r=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(r=this.finalize(r,new l.VariableDeclaration(p,d)),this.nextToken(),e=r,t=this.parseAssignmentExpression(),r=null,a=!1):(this.consumeSemicolon(),r=this.finalize(r,new l.VariableDeclaration(p,d)))):(r=this.finalize(r,new l.Identifier(d)),this.nextToken(),e=r,t=this.parseExpression(),r=null)}else{var m=this.lookahead;if(h=this.context.allowIn,this.context.allowIn=!1,r=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=h,this.matchKeyword("in"))this.context.isAssignmentTarget&&r.type!==u.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseExpression(),r=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&r.type!==u.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(r),e=r,t=this.parseAssignmentExpression(),r=null,a=!1;else{if(this.match(",")){for(var g=[r];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));r=this.finalize(this.startNode(m),new l.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(s=this.parseExpression()),this.expect(";"),this.match(")")||(o=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(c,new l.ForStatement(r,s,o,n)):a?this.finalize(c,new l.ForInStatement(e,t,n)):this.finalize(c,new l.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(this.lookahead.type===o.Token.Identifier&&!this.hasLineTerminator){var n="$"+(t=this.parseVariableIdentifier()).name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,t.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new l.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(this.lookahead.type===o.Token.Identifier&&!this.hasLineTerminator){var n="$"+(t=this.parseVariableIdentifier()).name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,t.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new l.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===o.Token.EOF?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new l.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e=this.createNode();this.expectKeyword("with"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.parseStatement();return this.finalize(e,new l.WithStatement(t,n))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new l.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var r=[],s=!1;for(this.expect("{");!this.match("}");){var o=this.parseSwitchCase();null===o.test&&(s&&this.throwError(i.Messages.MultipleDefaultsInSwitch),s=!0),r.push(o)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new l.SwitchStatement(t,r))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===u.Syntax.Identifier&&this.match(":")){this.nextToken();var r=n,s="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,s)&&this.throwError(i.Messages.Redeclaration,"Label",r.name),this.context.labelSet[s]=!0;var o=this.parseStatement();delete this.context.labelSet[s],e=new l.LabeledStatement(r,o)}else this.consumeSemicolon(),e=new l.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new l.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),r={},s=0;s<t.length;s++){var o="$"+t[s].value;Object.prototype.hasOwnProperty.call(r,o)&&this.tolerateError(i.Messages.DuplicateBinding,t[s].value),r[o]=!0}this.context.strict&&n.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var a=this.parseBlock();return this.finalize(e,new l.CatchClause(n,a))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,r=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||r||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new l.TryStatement(t,n,r))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new l.DebuggerStatement)},e.prototype.parseStatement=function(){var e=null;switch(this.lookahead.type){case o.Token.BooleanLiteral:case o.Token.NullLiteral:case o.Token.NumericLiteral:case o.Token.StringLiteral:case o.Token.Template:case o.Token.RegularExpression:e=this.parseExpressionStatement();break;case o.Token.Punctuator:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case o.Token.Identifier:e=this.parseLabelledStatement();break;case o.Token.Keyword:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,r=this.context.inIteration,i=this.context.inSwitch,s=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.startMarker.index<this.scanner.length&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=r,this.context.inSwitch=i,this.context.inFunctionBody=s,this.finalize(e,new l.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new l.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),r=0;r<t.length;r++)this.validateParam(e,t[r],t[r].value);return e.params.push(n),!this.match(")")},e.prototype.parseFormalParameters=function(e){var t;if(t={params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};this.startMarker.index<this.scanner.length&&this.parseFormalParameter(t);)this.expect(",");return this.expect(")"),{params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode();this.expectKeyword("function");var n,r=this.match("*");r&&this.nextToken();var s=null,o=null;if(!e||!this.match("(")){var a=this.lookahead;s=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(a.value)&&this.tolerateUnexpectedToken(a,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(a.value)?(o=a,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(a.value)&&(o=a,n=i.Messages.StrictReservedWord)}var u=this.context.allowYield;this.context.allowYield=!r;var c=this.parseFormalParameters(o),h=c.params,p=c.stricted;o=c.firstRestricted,c.message&&(n=c.message);var f=this.context.strict,d=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,n),this.context.strict&&p&&this.tolerateUnexpectedToken(p,n),this.context.strict=f,this.context.allowYield=u,this.finalize(t,new l.FunctionDeclaration(s,h,d,r))},e.prototype.parseFunctionExpression=function(){var e=this.createNode();this.expectKeyword("function");var t,n=this.match("*");n&&this.nextToken();var r,s=null,o=this.context.allowYield;if(this.context.allowYield=!n,!this.match("(")){var a=this.lookahead;s=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(a.value)&&this.tolerateUnexpectedToken(a,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(a.value)?(r=a,t=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(a.value)&&(r=a,t=i.Messages.StrictReservedWord)}var u=this.parseFormalParameters(r),c=u.params,h=u.stricted;r=u.firstRestricted,u.message&&(t=u.message);var p=this.context.strict,f=this.parseFunctionSourceElements();return this.context.strict&&r&&this.throwUnexpectedToken(r,t),this.context.strict&&h&&this.tolerateUnexpectedToken(h,t),this.context.strict=p,this.context.allowYield=o,this.finalize(e,new l.FunctionExpression(s,c,f,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=null,n=this.createNode(),r=this.parseExpression();return r.type===u.Syntax.Literal&&(t=this.getTokenRaw(e).slice(1,-1)),this.consumeSemicolon(),this.finalize(n,t?new l.Directive(r,t):new l.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(n.type!==o.Token.StringLiteral)break;var r=this.parseDirective();t.push(r);var s=r.directive;if("string"!=typeof s)break;"use strict"===s?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case o.Token.Identifier:case o.Token.StringLiteral:case o.Token.BooleanLiteral:case o.Token.NullLiteral:case o.Token.NumericLiteral:case o.Token.Keyword:return!0;case o.Token.Punctuator:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode();this.expect("("),this.expect(")");var t={params:[],stricted:null,firstRestricted:null,message:null},n=this.context.allowYield;this.context.allowYield=!1;var r=this.parsePropertyMethod(t);return this.context.allowYield=n,this.finalize(e,new l.FunctionExpression(null,t.params,r,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t={params:[],firstRestricted:null,paramSet:{}},n=this.context.allowYield;this.context.allowYield=!1,this.expect("("),this.match(")")?this.tolerateUnexpectedToken(this.lookahead):this.parseFormalParameter(t),this.expect(")");var r=this.parsePropertyMethod(t);return this.context.allowYield=n,this.finalize(e,new l.FunctionExpression(null,t.params,r,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var r=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new l.FunctionExpression(null,n.params,r,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case o.Token.Punctuator:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case o.Token.Keyword:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var r=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=r}return this.finalize(e,new l.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t,n,r,s=this.lookahead,a=this.createNode(),u=!1,c=!1,h=!1;this.match("*")?this.nextToken():(u=this.match("["),"static"===(n=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(s=this.lookahead,h=!0,u=this.match("["),this.match("*")?this.nextToken():n=this.parseObjectPropertyKey()));var p=this.qualifiedPropertyName(this.lookahead);return s.type===o.Token.Identifier?"get"===s.value&&p?(t="get",u=this.match("["),n=this.parseObjectPropertyKey(),this.context.allowYield=!1,r=this.parseGetterMethod()):"set"===s.value&&p&&(t="set",u=this.match("["),n=this.parseObjectPropertyKey(),r=this.parseSetterMethod()):s.type===o.Token.Punctuator&&"*"===s.value&&p&&(t="init",u=this.match("["),n=this.parseObjectPropertyKey(),r=this.parseGeneratorMethod(),c=!0),!t&&n&&this.match("(")&&(t="init",r=this.parsePropertyMethodFunction(),c=!0),t||this.throwUnexpectedToken(this.lookahead),"init"===t&&(t="method"),u||(h&&this.isPropertyKey(n,"prototype")&&this.throwUnexpectedToken(s,i.Messages.StaticPrototype),!h&&this.isPropertyKey(n,"constructor")&&("method"===t&&c&&!r.generator||this.throwUnexpectedToken(s,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(s,i.Messages.DuplicateConstructor):e.value=!0,t="constructor")),this.finalize(a,new l.MethodDefinition(n,u,r,t,h))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new l.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=e&&this.lookahead.type!==o.Token.Identifier?null:this.parseVariableIdentifier(),i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var s=this.parseClassBody();return this.context.strict=n,this.finalize(t,new l.ClassDeclaration(r,i,s))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=this.lookahead.type===o.Token.Identifier?this.parseVariableIdentifier():null,r=null;this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new l.ClassExpression(n,r,i))},e.prototype.parseProgram=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();this.startMarker.index<this.scanner.length;)t.push(this.parseStatementListItem());return this.finalize(e,new l.Program(t,this.sourceType))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();this.lookahead.type!==o.Token.StringLiteral&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return this.lookahead.type===o.Token.Identifier?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new l.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new l.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new l.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(this.lookahead.type===o.Token.StringLiteral)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new l.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new l.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new l.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?(n=this.parseClassDeclaration(!0),e=this.finalize(t,new l.ExportDefaultDeclaration(n))):(this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new l.ExportDefaultDeclaration(n)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken();var s=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new l.ExportAllDeclaration(s))}else if(this.lookahead.type===o.Token.Keyword){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new l.ExportNamedDeclaration(n,[],null))}else{var a=[],u=null,c=!1;for(this.expect("{");!this.match("}");)c=c||this.matchKeyword("default"),a.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),u=this.parseModuleSpecifier(),this.consumeSemicolon()):c?(r=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause,this.throwError(r,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new l.ExportNamedDeclaration(null,a,u))}return e},e}();t.Parser=h},function(e,t){"use strict";t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";t.Messages={UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer"}},function(e,t){"use strict";var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&(n=Object.create(e),Object.defineProperty(n,"column",{value:t}))}finally{return n}},e.prototype.createError=function(e,t,n,r){var i="Line "+t+": "+r,s=this.constructError(i,n);return s.index=e,s.lineNumber=t,s.description=r,s},e.prototype.throwError=function(e,t,n,r){throw this.createError(e,t,n,r)},e.prototype.tolerateError=function(e,t,n,r){var i=this.createError(e,t,n,r);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=n},function(e,t){"use strict";!function(e){e[e.BooleanLiteral=1]="BooleanLiteral",e[e.EOF=2]="EOF",e[e.Identifier=3]="Identifier",e[e.Keyword=4]="Keyword",e[e.NullLiteral=5]="NullLiteral",e[e.NumericLiteral=6]="NumericLiteral",e[e.Punctuator=7]="Punctuator",e[e.StringLiteral=8]="StringLiteral",e[e.RegularExpression=9]="RegularExpression",e[e.Template=10]="Template"}(t.Token||(t.Token={}));var n=t.Token;t.TokenName={},t.TokenName[n.BooleanLiteral]="Boolean",t.TokenName[n.EOF]="<end>",t.TokenName[n.Identifier]="Identifier",t.TokenName[n.Keyword]="Keyword",t.TokenName[n.NullLiteral]="Null",t.TokenName[n.NumericLiteral]="Numeric",t.TokenName[n.Punctuator]="Punctuator",t.TokenName[n.StringLiteral]="String",t.TokenName[n.RegularExpression]="RegularExpression",t.TokenName[n.Template]="Template"},function(e,t,n){"use strict";var r=n(4),i=n(5),s=n(9),o=n(7);function a(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function u(e){return"01234567".indexOf(e)}var l=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(){this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,i.Messages.UnexpectedTokenIllegal)},e.prototype.skipSingleLineComment=function(e){var t,n,r;for(this.trackComment&&(t=[],n=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,s.Character.isLineTerminator(i)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var o={multiLine:!1,slice:[n+e,this.index-1],range:[n,this.index-1],loc:r};t.push(o)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t}}return this.trackComment&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},o={multiLine:!1,slice:[n+e,this.index],range:[n,this.index],loc:r},t.push(o)),t},e.prototype.skipMultiLineComment=function(){var e,t,n;for(this.trackComment&&(e=[],t=this.index-2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var r=this.source.charCodeAt(this.index);if(s.Character.isLineTerminator(r))13===r&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===r){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[t+2,this.index-2],range:[t,this.index],loc:n};e.push(i)}return e}++this.index}else++this.index}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},i={multiLine:!0,slice:[t+2,this.index],range:[t,this.index],loc:n},e.push(i)),this.tolerateUnexpectedToken(),e},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(s.Character.isWhiteSpace(n))++this.index;else if(s.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var r=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(r)),t=!0}else{if(42!==n)break;this.index+=2,r=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(r))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,r=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(r))}else{if(60!==n)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,r=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(r))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,r=0;r<t;++r){if(this.eof()||!s.Character.isHexDigit(this.source.charCodeAt(this.index)))return"";n=16*n+a(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],s.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+a(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),s.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!s.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=s.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):(t=(e=this.scanHexEscape("u")).charCodeAt(0),e&&"\\"!==e&&s.Character.isIdentifierStart(t)||this.throwUnexpectedToken()),n=e);!this.eof()&&(t=this.codePointAt(this.index),s.Character.isIdentifierPart(t));)n+=e=s.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):(t=(e=this.scanHexEscape("u")).charCodeAt(0),e&&"\\"!==e&&s.Character.isIdentifierPart(t)||this.throwUnexpectedToken()),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=u(e);return!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+u(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+u(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e=this.index,t=92===this.source.charCodeAt(e)?this.getComplexIdentifier():this.getIdentifier();return{type:1===t.length?o.Token.Identifier:this.isKeyword(t)?o.Token.Keyword:"null"===t?o.Token.NullLiteral:"true"===t||"false"===t?o.Token.BooleanLiteral:o.Token.Identifier,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanPunctuator=function(){var e={type:o.Token.Punctuator,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index},t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e.start&&this.throwUnexpectedToken(),e.end=this.index,e.value=t,e},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&s.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:o.Token.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(s.Character.isIdentifierStart(t)||s.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:o.Token.NumericLiteral,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",r=!1;for(s.Character.isOctalDigit(e.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&s.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return r||0!==n.length||this.throwUnexpectedToken(),(s.Character.isIdentifierStart(this.source.charCodeAt(this.index))||s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:o.Token.NumericLiteral,value:parseInt(n,8),octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!s.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];r.assert(s.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&s.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),s.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;s.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return s.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:o.Token.NumericLiteral,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];r.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,i="";!this.eof();){var a=this.source[this.index++];if(a===t){t="";break}if("\\"===a)if((a=this.source[this.index++])&&s.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(a){case"u":case"x":if("{"===this.source[this.index])++this.index,i+=this.scanUnicodeCodePointEscape();else{var u=this.scanHexEscape(a);u||this.throwUnexpectedToken(),i+=u}break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;case"8":case"9":i+=a,this.tolerateUnexpectedToken();break;default:if(a&&s.Character.isOctalDigit(a.charCodeAt(0))){var l=this.octalToDecimal(a);n=l.octal||n,i+=String.fromCharCode(l.code)}else i+=a}else{if(s.Character.isLineTerminator(a.charCodeAt(0)))break;i+=a}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:o.Token.StringLiteral,value:i,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,r="`"===this.source[n],a=!1,u=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){u=1,a=!0,t=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],s.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":case"x":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var c=this.index,h=this.scanHexEscape(l);h?e+=h:(this.index=c,e+=l)}break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===l?(s.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):s.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=l}else s.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:o.Token.Template,value:{cooked:e,raw:this.source.slice(n+1,this.index-u)},head:r,tail:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,r=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,n){var s=parseInt(t||n,16);return s>1114111&&r.throwUnexpectedToken(i.Messages.InvalidRegExp),s<=65535?String.fromCharCode(s):"￿"})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(n)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];r.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,o=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],s.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(s.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){o=!0;break}"["===e&&(n=!0)}return o||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}},e.prototype.scanRegExpFlags=function(){for(var e="",t="";!this.eof();){var n=this.source[this.index];if(!s.Character.isIdentifierPart(n.charCodeAt(0)))break;if(++this.index,"\\"!==n||this.eof())t+=n,e+=n;else if("u"===(n=this.source[this.index])){++this.index;var r=this.index;if(n=this.scanHexEscape("u"))for(t+=n,e+="\\u";r<this.index;++r)e+=this.source[r];else this.index=r,t+="u",e+="\\u";this.tolerateUnexpectedToken()}else e+="\\",this.tolerateUnexpectedToken()}return{value:t,literal:e}},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags(),r=this.testRegExp(t.value,n.value);return{type:o.Token.RegularExpression,value:r,literal:t.literal+n.literal,regex:{pattern:t.value,flags:n.value},lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:o.Token.EOF,lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return s.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?s.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():s.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&s.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=l},function(e,t){"use strict";var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";var r=n(2);t.ArrayExpression=function(e){this.type=r.Syntax.ArrayExpression,this.elements=e};t.ArrayPattern=function(e){this.type=r.Syntax.ArrayPattern,this.elements=e};t.ArrowFunctionExpression=function(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n};t.AssignmentExpression=function(e,t,n){this.type=r.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n};t.AssignmentPattern=function(e,t){this.type=r.Syntax.AssignmentPattern,this.left=e,this.right=t};t.BinaryExpression=function(e,t,n){var i="||"===e||"&&"===e;this.type=i?r.Syntax.LogicalExpression:r.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n};t.BlockStatement=function(e){this.type=r.Syntax.BlockStatement,this.body=e};t.BreakStatement=function(e){this.type=r.Syntax.BreakStatement,this.label=e};t.CallExpression=function(e,t){this.type=r.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CatchClause=function(e,t){this.type=r.Syntax.CatchClause,this.param=e,this.body=t};t.ClassBody=function(e){this.type=r.Syntax.ClassBody,this.body=e};t.ClassDeclaration=function(e,t,n){this.type=r.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n};t.ClassExpression=function(e,t,n){this.type=r.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n};t.ComputedMemberExpression=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ConditionalExpression=function(e,t,n){this.type=r.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n};t.ContinueStatement=function(e){this.type=r.Syntax.ContinueStatement,this.label=e};t.DebuggerStatement=function(){this.type=r.Syntax.DebuggerStatement};t.Directive=function(e,t){this.type=r.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.DoWhileStatement=function(e,t){this.type=r.Syntax.DoWhileStatement,this.body=e,this.test=t};t.EmptyStatement=function(){this.type=r.Syntax.EmptyStatement};t.ExportAllDeclaration=function(e){this.type=r.Syntax.ExportAllDeclaration,this.source=e};t.ExportDefaultDeclaration=function(e){this.type=r.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportNamedDeclaration=function(e,t,n){this.type=r.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n};t.ExportSpecifier=function(e,t){this.type=r.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExpressionStatement=function(e){this.type=r.Syntax.ExpressionStatement,this.expression=e};t.ForInStatement=function(e,t,n){this.type=r.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1};t.ForOfStatement=function(e,t,n){this.type=r.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n};t.ForStatement=function(e,t,n,i){this.type=r.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i};t.FunctionDeclaration=function(e,t,n,i){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1};t.FunctionExpression=function(e,t,n,i){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1};t.Identifier=function(e){this.type=r.Syntax.Identifier,this.name=e};t.IfStatement=function(e,t,n){this.type=r.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n};t.ImportDeclaration=function(e,t){this.type=r.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDefaultSpecifier=function(e){this.type=r.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportNamespaceSpecifier=function(e){this.type=r.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportSpecifier=function(e,t){this.type=r.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.LabeledStatement=function(e,t){this.type=r.Syntax.LabeledStatement,this.label=e,this.body=t};t.Literal=function(e,t){this.type=r.Syntax.Literal,this.value=e,this.raw=t};t.MetaProperty=function(e,t){this.type=r.Syntax.MetaProperty,this.meta=e,this.property=t};t.MethodDefinition=function(e,t,n,i,s){this.type=r.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=i,this.static=s};t.NewExpression=function(e,t){this.type=r.Syntax.NewExpression,this.callee=e,this.arguments=t};t.ObjectExpression=function(e){this.type=r.Syntax.ObjectExpression,this.properties=e};t.ObjectPattern=function(e){this.type=r.Syntax.ObjectPattern,this.properties=e};t.Program=function(e,t){this.type=r.Syntax.Program,this.body=e,this.sourceType=t};t.Property=function(e,t,n,i,s,o){this.type=r.Syntax.Property,this.key=t,this.computed=n,this.value=i,this.kind=e,this.method=s,this.shorthand=o};t.RegexLiteral=function(e,t,n){this.type=r.Syntax.Literal,this.value=e,this.raw=t,this.regex=n};t.RestElement=function(e){this.type=r.Syntax.RestElement,this.argument=e};t.ReturnStatement=function(e){this.type=r.Syntax.ReturnStatement,this.argument=e};t.SequenceExpression=function(e){this.type=r.Syntax.SequenceExpression,this.expressions=e};t.SpreadElement=function(e){this.type=r.Syntax.SpreadElement,this.argument=e};t.StaticMemberExpression=function(e,t){this.type=r.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.Super=function(){this.type=r.Syntax.Super};t.SwitchCase=function(e,t){this.type=r.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchStatement=function(e,t){this.type=r.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.TaggedTemplateExpression=function(e,t){this.type=r.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TemplateElement=function(e,t){this.type=r.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateLiteral=function(e,t){this.type=r.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.ThisExpression=function(){this.type=r.Syntax.ThisExpression};t.ThrowStatement=function(e){this.type=r.Syntax.ThrowStatement,this.argument=e};t.TryStatement=function(e,t,n){this.type=r.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n};t.UnaryExpression=function(e,t){this.type=r.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UpdateExpression=function(e,t,n){this.type=r.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n};t.VariableDeclaration=function(e,t){this.type=r.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclarator=function(e,t){this.type=r.Syntax.VariableDeclarator,this.id=e,this.init=t};t.WhileStatement=function(e,t){this.type=r.Syntax.WhileStatement,this.test=e,this.body=t};t.WithStatement=function(e,t){this.type=r.Syntax.WithStatement,this.object=e,this.body=t};t.YieldExpression=function(e,t){this.type=r.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,n){"use strict";var r,i=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},s=n(9),o=n(7),a=n(3),u=n(12),l=n(13),c=n(10),h=n(14);function p(e){var t;switch(e.type){case l.JSXSyntax.JSXIdentifier:t=e.name;break;case l.JSXSyntax.JSXNamespacedName:var n=e;t=p(n.namespace)+":"+p(n.name);break;case l.JSXSyntax.JSXMemberExpression:var r=e;t=p(r.object)+"."+p(r.property)}return t}!function(e){e[e.Identifier=100]="Identifier",e[e.Text=101]="Text"}(r||(r={})),o.TokenName[r.Identifier]="JSXIdentifier",o.TokenName[r.Text]="JSXText";var f=function(e){function t(t,n,r){e.call(this,t,n,r)}return i(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.lineNumber,this.scanner.lineStart=this.startMarker.lineStart},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,r=!1,i=!1,o=!1;!this.scanner.eof()&&n&&!r;){var a=this.scanner.source[this.scanner.index];if(a===e)break;if(r=";"===a,t+=a,++this.scanner.index,!r)switch(t.length){case 2:i="#"===a;break;case 3:i&&(n=(o="x"===a)||s.Character.isDecimalDigit(a.charCodeAt(0)),i=i&&!o);break;default:n=(n=n&&!(i&&!s.Character.isDecimalDigit(a.charCodeAt(0))))&&!(o&&!s.Character.isHexDigit(a.charCodeAt(0)))}}if(n&&r&&t.length>2){var l=t.substr(1,t.length-2);i&&l.length>1?t=String.fromCharCode(parseInt(l.substr(1),10)):o&&l.length>2?t=String.fromCharCode(parseInt("0"+l.substr(1),16)):i||o||!u.XHTMLEntities[l]||(t=u.XHTMLEntities[l])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e){var t=this.scanner.source[this.scanner.index++];return{type:o.Token.Punctuator,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(34===e||39===e){for(var n=this.scanner.index,i=this.scanner.source[this.scanner.index++],a="";!this.scanner.eof()&&(c=this.scanner.source[this.scanner.index++])!==i;)a+="&"===c?this.scanXHTMLEntity(i):c;return{type:o.Token.StringLiteral,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}if(46===e){var u=this.scanner.source.charCodeAt(this.scanner.index+1),l=this.scanner.source.charCodeAt(this.scanner.index+2);return t=46===u&&46===l?"...":".",n=this.scanner.index,this.scanner.index+=t.length,{type:o.Token.Punctuator,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}if(96===e)return{type:o.Token.Template,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(s.Character.isIdentifierStart(e)&&92!==e){for(n=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var c=this.scanner.source.charCodeAt(this.scanner.index);if(s.Character.isIdentifierPart(c)&&92!==c)++this.scanner.index;else{if(45!==c)break;++this.scanner.index}}var h=this.scanner.source.slice(n,this.scanner.index);return{type:r.Identifier,value:h,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}this.scanner.throwUnexpectedToken()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.lineNumber=this.scanner.lineNumber,this.startMarker.lineStart=this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,s.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart;var i={type:r.Text,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(i)),i},t.prototype.peekJSXToken=function(){var e=this.scanner.index,t=this.scanner.lineNumber,n=this.scanner.lineStart;this.scanner.scanComments();var r=this.lexJSX();return this.scanner.index=e,this.scanner.lineNumber=t,this.scanner.lineStart=n,r},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();t.type===o.Token.Punctuator&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return t.type===o.Token.Punctuator&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return t.type!==r.Identifier&&this.throwUnexpectedToken(t),this.finalize(e,new h.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var r=this.parseJSXIdentifier();t=this.finalize(e,new h.JSXNamespacedName(n,r))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t;this.expectJSX(".");var s=this.parseJSXIdentifier();t=this.finalize(e,new h.JSXMemberExpression(i,s))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=n;this.expectJSX(":");var i=this.parseJSXIdentifier();e=this.finalize(t,new h.JSXNamespacedName(r,i))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();t.type!==o.Token.StringLiteral&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new h.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new h.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new h.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),r=this.matchJSX("/");return r&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new h.JSXOpeningElement(t,r,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new h.JSXClosingElement(t))}var n=this.parseJSXElementName(),r=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new h.JSXOpeningElement(n,i,r))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.lineNumber=this.scanner.lineNumber,this.lastMarker.lineStart=this.scanner.lineStart,this.finalize(e,new h.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new h.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var r=this.getTokenRaw(n),i=this.finalize(t,new h.JSXText(n.value,r));e.push(i)}if("{"!==this.scanner.source[this.scanner.index])break;var s=this.parseJSXExpressionContainer();e.push(s)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),r=this.parseJSXBoundaryElement();if(r.type===l.JSXSyntax.JSXOpeningElement){var i=r;if(i.selfClosing){var s=this.finalize(n,new h.JSXElement(i,[],null));e.children.push(s)}else t.push(e),e={node:n,opening:i,closing:null,children:[]}}if(r.type===l.JSXSyntax.JSXClosingElement){e.closing=r;var o=p(e.opening.name);if(o!==p(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",o),!(t.length>0))break;s=this.finalize(e.node,new h.JSXElement(e.opening,e.children,e.closing)),(e=t.pop()).children.push(s)}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],r=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:r,children:n});n=i.children,r=i.closing}return this.finalize(e,new h.JSXElement(t,n,r))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t}(a.Parser);t.JSXParser=f},function(e,t){"use strict";t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t){"use strict";t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";var r=n(13);t.JSXClosingElement=function(e){this.type=r.JSXSyntax.JSXClosingElement,this.name=e};t.JSXElement=function(e,t,n){this.type=r.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n};t.JSXEmptyExpression=function(){this.type=r.JSXSyntax.JSXEmptyExpression};t.JSXExpressionContainer=function(e){this.type=r.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXIdentifier=function(e){this.type=r.JSXSyntax.JSXIdentifier,this.name=e};t.JSXMemberExpression=function(e,t){this.type=r.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXAttribute=function(e,t){this.type=r.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXNamespacedName=function(e,t){this.type=r.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXOpeningElement=function(e,t,n){this.type=r.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n};t.JSXSpreadAttribute=function(e){this.type=r.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXText=function(e,t){this.type=r.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t,n){"use strict";var r=n(8),i=n(6),s=n(7),o=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":if(t=!1,"function"===this.values[this.curly-3]){var r=this.values[this.curly-4];t=!!r&&!this.beforeFunctionExpression(r)}else if("function"===this.values[this.curly-4]){var i=this.values[this.curly-5];t=!i||!this.beforeFunctionExpression(i)}}return t},e.prototype.push=function(e){e.type===s.Token.Punctuator||e.type===s.Token.Keyword?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),a=function(){function e(e,t){this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new r.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new o}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],r=void 0,i=this.scanner.source.slice(n.slice[0],n.slice[1]);r={type:n.multiLine?"BlockComment":"LineComment",value:i},this.trackRange&&(r.range=n.range),this.trackLoc&&(r.loc=n.loc),this.buffer.push(r)}if(!this.scanner.eof()){var o=void 0;this.trackLoc&&(o={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var a;a="/"===this.scanner.source[this.scanner.index]?this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.scanPunctuator():this.scanner.lex(),this.reader.push(a);var u=void 0;u={type:s.TokenName[a.type],value:this.scanner.source.slice(a.start,a.end)},this.trackRange&&(u.range=[a.start,a.end]),this.trackLoc&&(o.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},u.loc=o),a.regex&&(u.regex=a.regex),this.buffer.push(u)}}return this.buffer.shift()},e}();t.Tokenizer=a}])},"object"==typeof n&&"object"==typeof t?t.exports=r():"object"==typeof n?n.esprima=r():this.esprima=r()},{}],121:[function(e,t,n){!function t(n){"use strict";var r,i,s,o,a,u;function l(e){var t,n,r={};for(t in e)e.hasOwnProperty(t)&&(n=e[t],r[t]="object"==typeof n&&null!==n?l(n):n);return r}function c(e,t){this.parent=e,this.key=t}function h(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function f(e){return null!=e&&"object"==typeof e&&"string"==typeof e.type}function d(e,t){return(e===r.ObjectExpression||e===r.ObjectPattern)&&"properties"===t}function m(e,t){return(new p).traverse(e,t)}function g(e,t){var n;return n=function(t,n){var r,i,s,o;for(i=t.length,s=0;i;)t[o=s+(r=i>>>1)].range[0]>e.range[0]?i=r:(s=o+1,i-=r+1);return s}(t),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),(n-=1)>=0&&(e.extendedRange[0]=t[n].range[1]),e}return r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={Break:o={},Skip:a={},Remove:u={}},c.prototype.replace=function(e){this.parent[this.key]=e},c.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){var e,t,n,r,i;function s(e,t){if(Array.isArray(t))for(n=0,r=t.length;n<r;++n)e.push(t[n]);else e.push(t)}if(!this.__current.path)return null;for(i=[],e=2,t=this.__leavelist.length;e<t;++e)s(i,this.__leavelist[e].path);return s(i,this.__current.path),i},p.prototype.type=function(){return this.current().type||this.__current.wrap},p.prototype.parents=function(){var e,t,n;for(n=[],e=1,t=this.__leavelist.length;e<t;++e)n.push(this.__leavelist[e].node);return n},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(e,t){var n,r;return r=void 0,n=this.__current,this.__current=t,this.__state=null,e&&(r=e.call(this,t.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=n,r},p.prototype.notify=function(e){this.__state=e},p.prototype.skip=function(){this.notify(a)},p.prototype.break=function(){this.notify(o)},p.prototype.remove=function(){this.notify(u)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,"iteration"===t.fallback?this.__fallback=Object.keys:"function"==typeof t.fallback&&(this.__fallback=t.fallback),this.__keys=s,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},p.prototype.traverse=function(e,t){var n,r,i,s,u,l,c,p,m,g,y,v;for(this.__initialize(e,t),v={},n=this.__worklist,r=this.__leavelist,n.push(new h(e,null,null,null)),r.push(new h(null,null,null,null));n.length;)if((i=n.pop())!==v){if(i.node){if(l=this.__execute(t.enter,i),this.__state===o||l===o)return;if(n.push(v),r.push(i),this.__state===a||l===a)continue;if(u=(s=i.node).type||i.wrap,!(g=this.__keys[u])){if(!this.__fallback)throw new Error("Unknown node type "+u+".");g=this.__fallback(s)}for(p=g.length;(p-=1)>=0;)if(y=s[c=g[p]])if(Array.isArray(y)){for(m=y.length;(m-=1)>=0;)if(y[m]){if(d(u,g[p]))i=new h(y[m],[c,m],"Property",null);else{if(!f(y[m]))continue;i=new h(y[m],[c,m],null,null)}n.push(i)}}else f(y)&&n.push(new h(y,c,null,null))}}else if(i=r.pop(),l=this.__execute(t.leave,i),this.__state===o||l===o)return},p.prototype.replace=function(e,t){var n,r,i,s,l,p,m,g,y,v,x,b,w;function D(e){var t,r,i,s;if(e.ref.remove())for(r=e.ref.key,s=e.ref.parent,t=n.length;t--;)if((i=n[t]).ref&&i.ref.parent===s){if(i.ref.key<r)break;--i.ref.key}}for(this.__initialize(e,t),x={},n=this.__worklist,r=this.__leavelist,p=new h(e,null,null,new c(b={root:e},"root")),n.push(p),r.push(p);n.length;)if((p=n.pop())!==x){if(void 0!==(l=this.__execute(t.enter,p))&&l!==o&&l!==a&&l!==u&&(p.ref.replace(l),p.node=l),this.__state!==u&&l!==u||(D(p),p.node=null),this.__state===o||l===o)return b.root;if((i=p.node)&&(n.push(x),r.push(p),this.__state!==a&&l!==a)){if(s=i.type||p.wrap,!(y=this.__keys[s])){if(!this.__fallback)throw new Error("Unknown node type "+s+".");y=this.__fallback(i)}for(m=y.length;(m-=1)>=0;)if(v=i[w=y[m]])if(Array.isArray(v)){for(g=v.length;(g-=1)>=0;)if(v[g]){if(d(s,y[m]))p=new h(v[g],[w,g],"Property",new c(v,g));else{if(!f(v[g]))continue;p=new h(v[g],[w,g],null,new c(v,g))}n.push(p)}}else f(v)&&n.push(new h(v,w,null,new c(i,w)))}}else if(p=r.pop(),void 0!==(l=this.__execute(t.leave,p))&&l!==o&&l!==a&&l!==u&&p.ref.replace(l),this.__state!==u&&l!==u||D(p),this.__state===o||l===o)return b.root;return b.root},n.version=e("./package.json").version,n.Syntax=r,n.traverse=m,n.replace=function(e,t){return(new p).replace(e,t)},n.attachComments=function(e,t,n){var r,s,o,a,u=[];if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(o=0,s=t.length;o<s;o+=1)(r=l(t[o])).extendedRange=[0,e.range[0]],u.push(r);e.leadingComments=u}return e}for(o=0,s=t.length;o<s;o+=1)u.push(g(l(t[o]),n));return a=0,m(e,{enter:function(e){for(var t;a<u.length&&!((t=u[a]).extendedRange[1]>e.range[0]);)t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),u.splice(a,1)):a+=1;return a===u.length?i.Break:u[a].extendedRange[0]>e.range[1]?i.Skip:void 0}}),a=0,m(e,{leave:function(e){for(var t;a<u.length&&(t=u[a],!(e.range[1]<t.extendedRange[0]));)e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),u.splice(a,1)):a+=1;return a===u.length?i.Break:u[a].extendedRange[0]>e.range[1]?i.Skip:void 0}}),e},n.VisitorKeys=s,n.VisitorOption=i,n.Controller=p,n.cloneEnvironment=function(){return t({})},n}(n)},{"./package.json":122}],122:[function(e,t,n){t.exports={_from:"estraverse@^4.2.0",_id:"estraverse@4.3.0",_inBundle:!1,_integrity:"sha512-39nnKffWz8xN1BU/2c79n9nB9HDzo0niYUqx6xyqUnyoAnQyyWpOTdZEeiCch8BBu515t4wp9ZmgVfVhn9EBpw==",_location:"/estraverse",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"estraverse@^4.2.0",name:"estraverse",escapedName:"estraverse",rawSpec:"^4.2.0",saveSpec:null,fetchSpec:"^4.2.0"},_requiredBy:["/","/@jscad/core","/babel-plugin-espower","/call-matcher"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.3.0.tgz",_shasum:"398ad3f3c5a24948be7725e83d11a7de28cdbd1d",_spec:"estraverse@^4.2.0",_where:"/Users/bud/DoctorBud/OpenJSCAD.org/packages/web",bugs:{url:"https://github.com/estools/estraverse/issues"},bundleDependencies:!1,deprecated:!1,description:"ECMAScript JS AST traversal functions",devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=4.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers js:babel-register"},version:"4.3.0"}},{}],123:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(s(n))for(a=Array.prototype.slice.call(arguments,1),r=(l=n.slice()).length,u=0;u<r;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],124:[function(e,t,n){n.read=function(e,t,n,r,i){var s,o,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,s=f&(1<<-c)-1,f>>=-c,c+=a;c>0;s=256*s+e[t+h],h+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=p,c-=8);if(0===s)s=1-l;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=l}return(f?-1:1)*o*Math.pow(2,s-r)},n.write=function(e,t,n,r,i,s){var o,a,u,l=8*s-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(t*u-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&a,f+=d,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[n+f]=255&o,f+=d,o/=256,l-=8);e[n+f-d]|=128*m}},{}],125:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],126:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],127:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],128:[function(e,t,n){const{merge:r}=e("most");function i(e,t,n,r){const{pixelRatio:i}=r;return e.flatMap((function(e){let r=e.pageX*i,s=e.pageY*i,o=r,a=s;return n.map((function(e){let t=e.pageX*i,n=e.pageY*i,u={left:t-r,top:n-s,x:o-t,y:n-a};return o=t,a=n,{originalEvents:[e],delta:u,normalized:{x:t,y:n},type:"mouse"}})).takeUntil(t)}))}function s(e,t,n,r){const{pixelRatio:i}=r;return e.flatMap((function(e){let r=e.touches[0].pageX*i,s=e.touches[0].pageY*i,o=r,a=s;return n.map((function(e){let t=e.touches[0].pageX*i,n=e.touches[0].pageY*i,u={left:t-r,top:n-s,x:o-t,y:n-a};return o=t,a=n,{originalEvents:[e],delta:u,normalized:{x:t,y:n},type:"touch"}})).takeUntil(t)}))}t.exports={mouseDrags:i,touchDrags:s,drags:function({mouseDowns$:e,mouseUps$:t,mouseMoves$:n,touchStarts$:o,touchEnds$:a,longTaps$:u,touchMoves$:l},c){return l=l.filter((e=>1===e.touches.length)),r(i(e,t,n,c),s(o,a,l,c))}}},{most:170}],129:[function(e,t,n){const{fromEvent:r,merge:i}=e("most"),{normalizeWheel:s,preventDefault:o}=e("./utils"),{presses:a}=e("./presses"),{taps:u}=e("./taps"),{drags:l}=e("./drags"),{zooms:c}=e("./zooms");function h(e,t){t=Object.assign({},{preventScroll:!0},t);const n=r("mousedown",e),a=r("mouseup",e),u=r("mousemove",e),l=r("contextmenu",e).tap(o),c=r("touchstart",e),h=r("touchmove",e),p=r("touchend",e),f=i(n,c),d=i(a,p),m=i(u,h.filter((e=>1===e.touches.length)));return t.preventScroll&&function(e){r("mousewheel",e).forEach(o),r("DOMMouseScroll",e).forEach(o),r("wheel",e).forEach(o),r("touchmove",e).forEach(o)}(e),{mouseDowns$:n,mouseUps$:a,mouseMoves$:u,rightClicks$:l,wheel$:i(r("wheel",e),r("DOMMouseScroll",e),r("mousewheel",e)).map(s),touchStarts$:c,touchMoves$:h,touchEnds$:p,pointerDowns$:f,pointerUps$:d,pointerMoves$:m}}t.exports={baseInteractionsFromEvents:h,pointerGestures:function(e,t){let n="addEventListener"in e?h(e,t):e;const r={multiTapDelay:250,longPressDelay:250,maxStaticDeltaSqr:100,zoomMultiplier:200,pinchThreshold:4e3,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio?window.devicePixelRatio:1},i=Object.assign({},r,t),s=a(n,i),o=s.filter((e=>e.timeDelta>i.longPressDelay)).filter((e=>e.moveDelta.sqrd<i.maxStaticDeltaSqr));return{press:s,holds:o,taps:u(s,i),drags:l(n,i),zooms:c(n,i)}}}},{"./drags":128,"./presses":130,"./taps":131,"./utils":132,"./zooms":133,most:170}],130:[function(e,t,n){const{just:r,merge:i,empty:s}=e("most"),{exists:o,isMoving:a}=e("./utils");t.exports={presses:function(e,t){return function({mouseDowns$:e,mouseUps$:t,mouseMoves$:n,touchStarts$:s,touchEnds$:a,touchMoves$:u},l){u=u.filter((e=>1===e.touches.length));const c=i(e,s),h=i(t,a);return i(n,u),c.timestamp().flatMap((function(e){return i(r(e),h.take(1).timestamp())})).loop((function(e,t){let n;if(1===e.length){const r=t.time-e[0].time,i="touches"in t.value?t.value.changedTouches[0].pageX:t.value.pageX,s="touches"in t.value?t.value.changedTouches[0].pageY:t.value.pageY,o="touches"in e[0].value?e[0].value.touches[0].pageX:e[0].value.pageX,a="touches"in e[0].value?e[0].value.touches[0].pageY:e[0].value.pageY;let u=[i-o,s-a];u=u[0]*u[0]+u[1]*u[1];let l={x:o-i,y:s-a,sqrd:u};n={value:t.value,originalEvent:t.value,timeDelta:r,moveDelta:l,x:i,y:s},e=[]}else e.push(t);return{seed:e,value:n}}),[]).filter(o).filter((e=>void 0!==e.value)).multicast()}(e)}}},{"./utils":132,most:170}],131:[function(e,t,n){const{exists:r}=e("./utils");t.exports={taps:function(e,t){const{longPressDelay:n,maxStaticDeltaSqr:i,multiTapDelay:s}=t;return e.filter((e=>e.timeDelta<=n)).filter((e=>e.moveDelta.sqrd<i)).map((e=>({type:"data",data:e}))).merge(e.debounce(s).map((e=>({type:"reset"})))).loop((function(e,{type:t,data:n}){let r;return"data"===t?e.push(n):(r=e,e=[]),{seed:e,value:r}}),[]).filter(r).map((e=>({list:e,nb:e.length}))).multicast()}}},{"./utils":132}],132:[function(e,t,n){const{empty:r,continueWith:i}=e("most"),s=(e,t)=>0===e?r():1===e?t:i((()=>s(e-1,t)),t);t.exports={repeat:s,preventDefault:function(e){return e.preventDefault(),e},isMoving:function(e,t){return!0},normalizeWheel:function(e){let t={x:0,y:0};return e.wheelDelta?t=e.wheelDelta:e.detail?t=-e.detail:e.deltaY&&(t=-e.deltaY),t=t>=0?1:-1,t},exists:function(e){return null!=e}}},{most:170}],133:[function(e,t,n){const{merge:r}=e("most");function i({touchStarts$:e,touchMoves$:t,touchEnds$:n},r){const{pixelRatio:i,pinchThreshold:s}=r;return e.filter((e=>2===e.touches.length)).flatMap((function(e){let r=e.touches[0].pageX*i,o=e.touches[0].pageY*i,a=e.touches[1].pageX*i,u=e.touches[1].pageY*i;const l=(r-a)*(r-a)+(o-u)*(o-u);return t.tap((e=>e.preventDefault())).filter((e=>2===e.touches.length)).map((function(e){let t=e.touches[0].pageX*i,n=e.touches[0].pageY*i,r=e.touches[1].pageX*i,s=e.touches[1].pageY*i;return(t-r)*(t-r)+(n-s)*(n-s)})).loop((function(e,t){return e?Math.abs(t-e)<s?{seed:t,value:void 0}:{seed:t,value:t-e}:{seed:t,value:t-l}}),void 0).filter((e=>void 0!==e)).map((e=>3e-6*e)).takeUntil(n)}))}t.exports={pinchZooms:i,zooms:function({touchStarts$:e,touchMoves$:t,touchEnds$:n,wheel$:s},o){return r(i({touchStarts$:e,touchMoves$:t,touchEnds$:n},o),s).map((e=>e*o.zoomMultiplier))}}},{most:170}],134:[function(e,t,n){"use strict";function r(){this.head=null,this.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.add=function(e){null!==this.head&&(this.head.prev=e,e.next=this.head),this.head=e,++this.length},r.prototype.remove=function(e){--this.length,e===this.head&&(this.head=this.head.next),null!==e.next&&(e.next.prev=e.prev,e.next=null),null!==e.prev&&(e.prev.next=e.next,e.prev=null)},r.prototype.isEmpty=function(){return 0===this.length},r.prototype.dispose=function(){if(this.isEmpty())return Promise.resolve();var e=[],t=this.head;for(this.head=null,this.length=0;null!==t;)e.push(t.dispose()),t=t.next;return Promise.all(e)}},{}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isPromise=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}},{}],136:[function(e,t,n){"use strict";function r(e){this._capacity=e||32,this._length=0,this._head=0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.push=function(e){var t=this._length;this._checkCapacity(t+1),this[this._head+t&this._capacity-1]=e,this._length=t+1},r.prototype.shift=function(){var e=this._head,t=this[e];return this[e]=void 0,this._head=e+1&this._capacity-1,this._length--,t},r.prototype.isEmpty=function(){return 0===this._length},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._ensureCapacity(this._capacity<<1)},r.prototype._ensureCapacity=function(e){var t=this._capacity;this._capacity=e;var n=this._head+this._length;n>t&&function(e,t,n,r,i){for(var s=0;s<i;++s)n[s+r]=e[s+0],e[s+0]=void 0}(this,0,this,t,n&t-1)}},{}],137:[function(e,t,n){"use strict";function r(e){this.source=e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.run=function(e,t){return this.source.run(e,t)}},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.scan=function(e,t,n){return new r.default(new l(e,t,n.source))},n.reduce=function(e,t,n){return(0,s.withDefaultScheduler)(new h(e,t,n.source))};var r=u(e("../Stream")),i=u(e("../sink/Pipe")),s=e("../runSource"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),a=u(e("../scheduler/PropagateTask"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){this.source=n,this.f=e,this.value=t}function c(e,t,n){this.f=e,this.value=t,this.sink=n}function h(e,t,n){this.source=n,this.f=e,this.value=t}function p(e,t,n){this.f=e,this.value=t,this.sink=n}l.prototype.run=function(e,t){var n=t.asap(a.default.event(this.value,e)),r=this.source.run(new c(this.f,this.value,e),t);return o.all([n,r])},c.prototype.event=function(e,t){var n=this.f;this.value=n(this.value,t),this.sink.event(e,this.value)},c.prototype.error=i.default.prototype.error,c.prototype.end=i.default.prototype.end,h.prototype.run=function(e,t){return this.source.run(new p(this.f,this.value,e),t)},p.prototype.event=function(e,t){var n=this.f;this.value=n(this.value,t),this.sink.event(e,this.value)},p.prototype.error=i.default.prototype.error,p.prototype.end=function(e){this.sink.end(e,this.value)}},{"../Stream":137,"../disposable/dispose":165,"../runSource":176,"../scheduler/PropagateTask":178,"../sink/Pipe":185}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ap=function(e,t){return(0,r.combine)(i.apply,e,t)};var r=e("./combine"),i=e("@most/prelude")},{"./combine":141,"@most/prelude":113}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cons=function(e,t){return s((0,r.of)(e),t)},n.concat=s;var r=e("../source/core"),i=e("./continueWith");function s(e,t){return(0,i.continueWith)((function(){return t}),e)}},{"../source/core":189,"./continueWith":143}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.combine=function(e){return m(e,d(arguments))},n.combineArray=m;var r=p(e("../Stream")),i=h(e("./transform")),s=h(e("../source/core")),o=p(e("../sink/Pipe")),a=p(e("../sink/IndexSink")),u=h(e("../disposable/dispose")),l=h(e("@most/prelude")),c=p(e("../invoke"));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var f=l.map,d=l.tail;function m(e,t){var n=t.length;return 0===n?s.empty():1===n?i.map(e,t[0]):new r.default(function(e,t){return new y(e,f(g,t))}(e,t))}function g(e){return e.source}function y(e,t){this.f=e,this.sources=t}function v(e,t,n,r){this.sink=n,this.disposables=e,this.sinks=t,this.f=r;var i=t.length;this.awaiting=i,this.values=new Array(i),this.hasValue=new Array(i);for(var s=0;s<i;++s)this.hasValue[s]=!1;this.activeCount=t.length}y.prototype.run=function(e,t){for(var n,r=this.sources.length,i=new Array(r),s=new Array(r),o=new v(i,s,e,this.f),l=0;l<r;++l)n=s[l]=new a.default(l,o),i[l]=this.sources[l].run(n,t);return u.all(i)},v.prototype.error=o.default.prototype.error,v.prototype.event=function(e,t){var n=t.index,r=this._updateReady(n);this.values[n]=t.value,0===r&&this.sink.event(e,(0,c.default)(this.f,this.values))},v.prototype._updateReady=function(e){return this.awaiting>0&&(this.hasValue[e]||(this.hasValue[e]=!0,this.awaiting-=1)),this.awaiting},v.prototype.end=function(e,t){u.tryDispose(e,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(e,t.value)}},{"../Stream":137,"../disposable/dispose":165,"../invoke":171,"../sink/IndexSink":184,"../sink/Pipe":185,"../source/core":189,"./transform":161,"@most/prelude":113}],142:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.concatMap=function(e,t){return(0,r.mergeMapConcurrently)(e,1,t)};var r=e("./mergeConcurrently")},{"./mergeConcurrently":151}],143:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.continueWith=function(e,t){return new r.default(new a(e,t.source))};var r=o(e("../Stream")),i=o(e("../sink/Pipe")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.f=e,this.source=t}function u(e,t,n,r){this.f=e,this.sink=n,this.scheduler=r,this.active=!0,this.disposable=s.once(t.run(this,r))}a.prototype.run=function(e,t){return new u(this.f,this.source,e,t)},u.prototype.error=i.default.prototype.error,u.prototype.event=function(e,t){this.active&&this.sink.event(e,t)},u.prototype.end=function(e,t){this.active&&(s.tryDispose(e,this.disposable,this.sink),this._startNext(e,t,this.sink))},u.prototype._startNext=function(e,t,n){try{this.disposable=this._continue(this.f,t,n)}catch(t){n.error(e,t)}},u.prototype._continue=function(e,t,n){return e(t).source.run(n,this.scheduler)},u.prototype.dispose=function(){return this.active=!1,this.disposable.dispose()}},{"../Stream":137,"../disposable/dispose":165,"../sink/Pipe":185}],144:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.delay=function(e,t){return e<=0?t:new r.default(new u(e,t.source))};var r=a(e("../Stream")),i=a(e("../sink/Pipe")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),o=a(e("../scheduler/PropagateTask"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){this.dt=e,this.source=t}function l(e,t,n){this.dt=e,this.sink=t,this.scheduler=n}u.prototype.run=function(e,t){var n=new l(this.dt,e,t);return s.all([n,this.source.run(n,t)])},l.prototype.dispose=function(){var e=this;this.scheduler.cancelAll((function(t){return t.task.sink===e.sink}))},l.prototype.event=function(e,t){this.scheduler.delay(this.dt,o.default.event(t,this.sink))},l.prototype.end=function(e,t){this.scheduler.delay(this.dt,o.default.end(t,this.sink))},l.prototype.error=i.default.prototype.error},{"../Stream":137,"../disposable/dispose":165,"../scheduler/PropagateTask":178,"../sink/Pipe":185}],145:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.flatMapError=void 0,n.recoverWith=c,n.throwError=function(e){return new r.default(new h(e))};var r=l(e("../Stream")),i=l(e("../sink/SafeSink")),s=u(e("../disposable/dispose")),o=u(e("../source/tryEvent")),a=l(e("../scheduler/PropagateTask"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return new r.default(new f(e,t.source))}function h(e){this.value=e}function p(e,t,n){n.error(e,t)}function f(e,t){this.f=e,this.source=t}function d(e,t,n,r){this.f=e,this.sink=new i.default(n),this.scheduler=r,this.disposable=t.run(this,r)}n.flatMapError=c,h.prototype.run=function(e,t){return t.asap(new a.default(p,this.value,e))},f.prototype.run=function(e,t){return new d(this.f,this.source,e,t)},d.prototype.event=function(e,t){o.tryEvent(e,t,this.sink)},d.prototype.end=function(e,t){o.tryEnd(e,t,this.sink)},d.prototype.error=function(e,t){var n=this.sink.disable();s.tryDispose(e,this.disposable,this.sink),this._startNext(e,t,n)},d.prototype._startNext=function(e,t,n){try{this.disposable=this._continue(this.f,t,n)}catch(t){n.error(e,t)}},d.prototype._continue=function(e,t,n){return e(t).source.run(n,this.scheduler)},d.prototype.dispose=function(){return this.disposable.dispose()}},{"../Stream":137,"../disposable/dispose":165,"../scheduler/PropagateTask":178,"../sink/SafeSink":186,"../source/tryEvent":197}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.filter=function(e,t){return new r.default(s.default.create(e,t.source))},n.skipRepeats=function(e){return a(c,e)},n.skipRepeatsWith=a;var r=o(e("../Stream")),i=o(e("../sink/Pipe")),s=o(e("../fusion/Filter"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return new r.default(new u(e,t.source))}function u(e,t){this.equals=e,this.source=t}function l(e,t){this.equals=e,this.sink=t,this.value=void 0,this.init=!0}function c(e,t){return e===t}u.prototype.run=function(e,t){return this.source.run(new l(this.equals,e),t)},l.prototype.end=i.default.prototype.end,l.prototype.error=i.default.prototype.error,l.prototype.event=function(e,t){this.init?(this.init=!1,this.value=t,this.sink.event(e,t)):this.equals(this.value,t)||(this.value=t,this.sink.event(e,t))}},{"../Stream":137,"../fusion/Filter":167,"../sink/Pipe":185}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.flatMap=function(e,t){return(0,r.mergeMapConcurrently)(e,1/0,t)},n.join=function(e){return(0,r.mergeConcurrently)(1/0,e)};var r=e("./mergeConcurrently")},{"./mergeConcurrently":151}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.throttle=function(e,t){return new r.default(a(e,t.source))},n.debounce=function(e,t){return new r.default(new c(e,t.source))};var r=o(e("../Stream")),i=o(e("../sink/Pipe")),s=o(e("../fusion/Map"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return t instanceof s.default?function(e,t){return s.default.create(t.f,a(e,t.source))}(e,t):t instanceof u?function(e,t){return new u(Math.max(e,t.period),t.source)}(e,t):new u(e,t)}function u(e,t){this.period=e,this.source=t}function l(e,t){this.time=0,this.period=e,this.sink=t}function c(e,t){this.dt=e,this.source=t}function h(e,t,n,r){this.dt=e,this.sink=n,this.scheduler=r,this.value=void 0,this.timer=null,this.disposable=t.run(this,r)}function p(e,t){this.debounce=e,this.value=t}u.prototype.run=function(e,t){return this.source.run(new l(this.period,e),t)},l.prototype.event=function(e,t){e>=this.time&&(this.time=e+this.period,this.sink.event(e,t))},l.prototype.end=i.default.prototype.end,l.prototype.error=i.default.prototype.error,c.prototype.run=function(e,t){return new h(this.dt,this.source,e,t)},h.prototype.event=function(e,t){this._clearTimer(),this.value=t,this.timer=this.scheduler.delay(this.dt,new p(this,t))},h.prototype._event=function(e,t){this._clearTimer(),this.sink.event(e,t)},h.prototype.end=function(e,t){this._clearTimer()&&(this.sink.event(e,this.value),this.value=void 0),this.sink.end(e,t)},h.prototype.error=function(e,t){this._clearTimer(),this.sink.error(e,t)},h.prototype.dispose=function(){return this._clearTimer(),this.disposable.dispose()},h.prototype._clearTimer=function(){return null!==this.timer&&(this.timer.dispose(),this.timer=null,!0)},p.prototype.run=function(e){this.debounce._event(e,this.value)},p.prototype.error=function(e,t){this.debounce.error(e,t)},p.prototype.dispose=function(){}},{"../Stream":137,"../fusion/Map":169,"../sink/Pipe":185}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.loop=function(e,t,n){return new r.default(new o(e,t,n.source))};var r=s(e("../Stream")),i=s(e("../sink/Pipe"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){this.step=e,this.seed=t,this.source=n}function a(e,t,n){this.step=e,this.seed=t,this.sink=n}o.prototype.run=function(e,t){return this.source.run(new a(this.step,this.seed,e),t)},a.prototype.error=i.default.prototype.error,a.prototype.event=function(e,t){var n=this.step(this.seed,t);this.seed=n.seed,this.sink.event(e,n.value)},a.prototype.end=function(e){this.sink.end(e,this.seed)}},{"../Stream":137,"../sink/Pipe":185}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.merge=function(){return f(h(arguments))},n.mergeArray=f;var r=c(e("../Stream")),i=c(e("../sink/Pipe")),s=c(e("../sink/IndexSink")),o=e("../source/core"),a=l(e("../disposable/dispose")),u=l(e("@most/prelude"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var h=u.copy,p=u.reduce;function f(e){var t=e.length;return 0===t?(0,o.empty)():1===t?e[0]:new r.default(function(e){return new m(p(d,[],e))}(e))}function d(e,t){var n=t.source;return n instanceof m?e.concat(n.sources):e.concat(n)}function m(e){this.sources=e}function g(e,t,n){this.sink=n,this.disposables=e,this.activeCount=t.length}m.prototype.run=function(e,t){for(var n,r=this.sources.length,i=new Array(r),o=new Array(r),u=new g(i,o,e),l=0;l<r;++l)n=o[l]=new s.default(l,u),i[l]=this.sources[l].run(n,t);return a.all(i)},g.prototype.error=i.default.prototype.error,g.prototype.event=function(e,t){this.sink.event(e,t.value)},g.prototype.end=function(e,t){a.tryDispose(e,this.disposables[t.index],this.sink),0==--this.activeCount&&this.sink.end(e,t.value)}},{"../Stream":137,"../disposable/dispose":165,"../sink/IndexSink":184,"../sink/Pipe":185,"../source/core":189,"@most/prelude":113}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mergeConcurrently=function(e,t){return u(o.id,e,t)},n.mergeMapConcurrently=u;var r=a(e("../Stream")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),s=a(e("../LinkedList")),o=e("@most/prelude");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return new r.default(new l(e,t,n.source))}function l(e,t,n){this.f=e,this.concurrency=t,this.source=n}function c(e,t,n,r,o){this.f=e,this.concurrency=t,this.sink=r,this.scheduler=o,this.pending=[],this.current=new s.default,this.disposable=i.once(n.run(this,o)),this.active=!0}function h(e,t,n){this.prev=this.next=null,this.time=e,this.outer=t,this.sink=n,this.disposable=void 0}l.prototype.run=function(e,t){return new c(this.f,this.concurrency,this.source,e,t)},c.prototype.event=function(e,t){this._addInner(e,t)},c.prototype._addInner=function(e,t){this.current.length<this.concurrency?this._startInner(e,t):this.pending.push(t)},c.prototype._startInner=function(e,t){try{this._initInner(e,t)}catch(t){this.error(e,t)}},c.prototype._initInner=function(e,t){var n=new h(e,this,this.sink);n.disposable=function(e,t,n,r){return e(t).source.run(n,r)}(this.f,t,n,this.scheduler),this.current.add(n)},c.prototype.end=function(e,t){this.active=!1,i.tryDispose(e,this.disposable,this.sink),this._checkEnd(e,t)},c.prototype.error=function(e,t){this.active=!1,this.sink.error(e,t)},c.prototype.dispose=function(){return this.active=!1,this.pending.length=0,Promise.all([this.disposable.dispose(),this.current.dispose()])},c.prototype._endInner=function(e,t,n){this.current.remove(n),i.tryDispose(e,n,this),0===this.pending.length?this._checkEnd(e,t):this._startInner(e,this.pending.shift())},c.prototype._checkEnd=function(e,t){!this.active&&this.current.isEmpty()&&this.sink.end(e,t)},h.prototype.event=function(e,t){this.sink.event(Math.max(e,this.time),t)},h.prototype.end=function(e,t){this.outer._endInner(Math.max(e,this.time),t,this)},h.prototype.error=function(e,t){this.outer.error(Math.max(e,this.time),t)},h.prototype.dispose=function(){return this.disposable.dispose()}},{"../LinkedList":134,"../Stream":137,"../disposable/dispose":165,"@most/prelude":113}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.observe=function(e,t){return s((0,i.tap)(e,t))},n.drain=s;var r=e("../runSource"),i=e("./transform");function s(e){return(0,r.withDefaultScheduler)(e.source)}},{"../runSource":176,"./transform":161}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromPromise=function(e){return a((0,s.of)(e))},n.awaitPromises=a;var r=o(e("../Stream")),i=o(e("../fatalError")),s=e("../source/core");function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return new r.default(new u(e.source))}function u(e){this.source=e}function l(e,t){this.sink=e,this.scheduler=t,this.queue=Promise.resolve();var n=this;this._eventBound=function(e){n.sink.event(n.scheduler.now(),e)},this._endBound=function(e){n.sink.end(n.scheduler.now(),e)},this._errorBound=function(e){n.sink.error(n.scheduler.now(),e)}}u.prototype.run=function(e,t){return this.source.run(new l(e,t),t)},l.prototype.event=function(e,t){var n=this;this.queue=this.queue.then((function(){return n._event(t)})).catch(this._errorBound)},l.prototype.end=function(e,t){var n=this;this.queue=this.queue.then((function(){return n._end(t)})).catch(this._errorBound)},l.prototype.error=function(e,t){var n=this;this.queue=this.queue.then((function(){return n._errorBound(t)})).catch(i.default)},l.prototype._event=function(e){return e.then(this._eventBound)},l.prototype._end=function(e){return Promise.resolve(e).then(this._endBound)}},{"../Stream":137,"../fatalError":166,"../source/core":189}],154:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sample=function(e,t){return c(e,t,o.drop(2,arguments))},n.sampleWith=function(e,t){return new r.default(new p(o.id,e.source,[t.source]))},n.sampleArray=c;var r=l(e("../Stream")),i=l(e("../sink/Pipe")),s=u(e("../disposable/dispose")),o=u(e("@most/prelude")),a=l(e("../invoke"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return new r.default(new p(e,t.source,o.map(h,n)))}function h(e){return e.source}function p(e,t,n){this.f=e,this.sampler=t,this.sources=n}function f(e){this.sink=e,this.hasValue=!1}function d(e,t,n){this.f=e,this.sinks=t,this.sink=n,this.active=!1}function m(e){return e.hasValue}function g(e){return e.value}p.prototype.run=function(e,t){for(var n,r=this.sources.length,i=new Array(r+1),o=new Array(r),a=new d(this.f,o,e),u=0;u<r;++u)n=o[u]=new f(a),i[u]=this.sources[u].run(n,t);return i[u]=this.sampler.run(a,t),s.all(i)},f.prototype.event=function(e,t){this.value=t,this.hasValue=!0,this.sink._notify(this)},f.prototype.end=function(){},f.prototype.error=i.default.prototype.error,d.prototype._notify=function(){this.active||(this.active=this.sinks.every(m))},d.prototype.event=function(e){this.active&&this.sink.event(e,(0,a.default)(this.f,o.map(g,this.sinks)))},d.prototype.end=i.default.prototype.end,d.prototype.error=i.default.prototype.error},{"../Stream":137,"../disposable/dispose":165,"../invoke":171,"../sink/Pipe":185,"@most/prelude":113}],155:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.take=function(e,t){return c(0,e,t)},n.skip=function(e,t){return c(e,1/0,t)},n.slice=c,n.takeWhile=function(e,t){return new r.default(new d(e,t.source))},n.skipWhile=function(e,t){return new r.default(new g(e,t.source))},n.skipAfter=function(e,t){return new r.default(new v(e,t.source))};var r=l(e("../Stream")),i=l(e("../sink/Pipe")),s=u(e("../source/core")),o=u(e("../disposable/dispose")),a=l(e("../fusion/Map"));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t<=e?s.empty():new r.default(h(e,t,n.source))}function h(e,t,n){return n instanceof a.default?function(e,t,n){return a.default.create(n.f,h(e,t,n.source))}(e,t,n):n instanceof p?function(e,t,n){return new p(e+=n.min,t=Math.min(t+n.min,n.max),n.source)}(e,t,n):new p(e,t,n)}function p(e,t,n){this.source=n,this.min=e,this.max=t}function f(e,t,n,r){this.sink=n,this.skip=e,this.take=t,this.disposable=r}function d(e,t){this.p=e,this.source=t}function m(e,t,n){this.p=e,this.sink=t,this.active=!0,this.disposable=n}function g(e,t){this.p=e,this.source=t}function y(e,t){this.p=e,this.sink=t,this.skipping=!0}function v(e,t){this.p=e,this.source=t}function x(e,t){this.p=e,this.sink=t,this.skipping=!1}p.prototype.run=function(e,t){var n=o.settable(),r=new f(this.min,this.max-this.min,e,n);return n.setDisposable(this.source.run(r,t)),n},f.prototype.end=i.default.prototype.end,f.prototype.error=i.default.prototype.error,f.prototype.event=function(e,t){this.skip>0?this.skip-=1:0!==this.take&&(this.take-=1,this.sink.event(e,t),0===this.take&&(this.disposable.dispose(),this.sink.end(e,t)))},d.prototype.run=function(e,t){var n=o.settable(),r=new m(this.p,e,n);return n.setDisposable(this.source.run(r,t)),n},m.prototype.end=i.default.prototype.end,m.prototype.error=i.default.prototype.error,m.prototype.event=function(e,t){if(this.active){var n=this.p;this.active=n(t),this.active?this.sink.event(e,t):(this.disposable.dispose(),this.sink.end(e,t))}},g.prototype.run=function(e,t){return this.source.run(new y(this.p,e),t)},y.prototype.end=i.default.prototype.end,y.prototype.error=i.default.prototype.error,y.prototype.event=function(e,t){if(this.skipping){var n=this.p;if(this.skipping=n(t),this.skipping)return}this.sink.event(e,t)},v.prototype.run=function(e,t){return this.source.run(new x(this.p,e),t)},x.prototype.event=function(e,t){if(!this.skipping){var n=this.p;this.skipping=n(t),this.sink.event(e,t),this.skipping&&this.sink.end(e,t)}},x.prototype.end=i.default.prototype.end,x.prototype.error=i.default.prototype.error},{"../Stream":137,"../disposable/dispose":165,"../fusion/Map":169,"../sink/Pipe":185,"../source/core":189}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.switch=void 0,n.switchLatest=o;var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose"));function o(e){return new i.default(new a(e.source))}function a(e){this.source=e}function u(e,t){this.sink=e,this.scheduler=t,this.current=null,this.ended=!1}function l(e,t,n,r){this.min=e,this.max=t,this.outer=n,this.sink=r,this.disposable=s.empty()}n.switch=o,a.prototype.run=function(e,t){var n=new u(e,t);return s.all([n,this.source.run(n,t)])},u.prototype.event=function(e,t){this._disposeCurrent(e),this.current=new l(e,1/0,this,this.sink),this.current.disposable=t.source.run(this.current,this.scheduler)},u.prototype.end=function(e,t){this.ended=!0,this._checkEnd(e,t)},u.prototype.error=function(e,t){this.ended=!0,this.sink.error(e,t)},u.prototype.dispose=function(){return this._disposeCurrent(this.scheduler.now())},u.prototype._disposeCurrent=function(e){if(null!==this.current)return this.current._dispose(e)},u.prototype._disposeInner=function(e,t){t._dispose(e),t===this.current&&(this.current=null)},u.prototype._checkEnd=function(e,t){this.ended&&null===this.current&&this.sink.end(e,t)},u.prototype._endInner=function(e,t,n){this._disposeInner(e,n),this._checkEnd(e,t)},u.prototype._errorInner=function(e,t,n){this._disposeInner(e,n),this.sink.error(e,t)},l.prototype.event=function(e,t){e<this.max&&this.sink.event(Math.max(e,this.min),t)},l.prototype.end=function(e,t){this.outer._endInner(Math.max(e,this.min),t,this)},l.prototype.error=function(e,t){this.outer._errorInner(Math.max(e,this.min),t,this)},l.prototype._dispose=function(e){this.max=e,s.tryDispose(e,this.disposable,this.sink)}},{"../Stream":137,"../disposable/dispose":165}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.thru=function(e,t){return e(t)}},{}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.takeUntil=u,n.skipUntil=l,n.during=function(e,t){return u((0,o.join)(e),l(e,t))};var r=a(e("../Stream")),i=a(e("../sink/Pipe")),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),o=e("../combinator/flatMap");function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return new r.default(new c(e.source,t.source))}function l(e,t){return new r.default(new h(e.source,t.source))}function c(e,t){this.maxSignal=e,this.source=t}function h(e,t){this.minSignal=e,this.source=t}function p(e,t){this.value=e,this.sink=t}function f(e,t,n){this.min=e,this.max=t,this.sink=n}function d(e,t,n){this.value=1/0,this.sink=t,this.disposable=e.run(this,n)}function m(e,t,n){this.value=1/0,this.sink=t,this.disposable=e.run(this,n)}function g(){}c.prototype.run=function(e,t){var n=new p(-1/0,e),r=new m(this.maxSignal,e,t),i=this.source.run(new f(n,r,e),t);return s.all([n,r,i])},h.prototype.run=function(e,t){var n=new d(this.minSignal,e,t),r=new p(1/0,e),i=this.source.run(new f(n,r,e),t);return s.all([n,r,i])},p.prototype.error=i.default.prototype.error,p.prototype.event=g,p.prototype.end=g,p.prototype.dispose=g,f.prototype.event=function(e,t){e>=this.min.value&&e<this.max.value&&this.sink.event(e,t)},f.prototype.error=i.default.prototype.error,f.prototype.end=i.default.prototype.end,d.prototype.event=function(e){e<this.value&&(this.value=e)},d.prototype.end=g,d.prototype.error=i.default.prototype.error,d.prototype.dispose=function(){return this.disposable.dispose()},m.prototype.event=function(e,t){e<this.value&&(this.value=e,this.sink.end(e,t))},m.prototype.end=g,m.prototype.error=i.default.prototype.error,m.prototype.dispose=function(){return this.disposable.dispose()}},{"../Stream":137,"../combinator/flatMap":147,"../disposable/dispose":165,"../sink/Pipe":185}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.timestamp=function(e){return new r.default(new o(e.source))};var r=s(e("../Stream")),i=s(e("../sink/Pipe"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){this.source=e}function a(e){this.sink=e}o.prototype.run=function(e,t){return this.source.run(new a(e),t)},a.prototype.end=i.default.prototype.end,a.prototype.error=i.default.prototype.error,a.prototype.event=function(e,t){this.sink.event(e,{time:e,value:t})}},{"../Stream":137,"../sink/Pipe":185}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.transduce=function(e,t){return new i.default(new s(e,t.source))};var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r};function s(e,t){this.transducer=e,this.source=t}function o(e,t){this.xf=e,this.sink=t}function a(e){this.time=-1/0,this.sink=e}function u(e){this.tx=e}function l(e){this.tx=e}s.prototype.run=function(e,t){var n,r=this.transducer(new a(e));return this.source.run(new o("function"==typeof(n=r)["@@transducer/step"]?new u(n):new l(n),e),t)},o.prototype.event=function(e,t){var n=this.xf.step(e,t);return this.xf.isReduced(n)?this.sink.end(e,this.xf.getResult(n)):n},o.prototype.end=function(e,t){return this.xf.result(t)},o.prototype.error=function(e,t){return this.sink.error(e,t)},a.prototype["@@transducer/init"]=a.prototype.init=function(){},a.prototype["@@transducer/step"]=a.prototype.step=function(e,t){return isNaN(e)||(this.time=Math.max(e,this.time)),this.sink.event(this.time,t)},a.prototype["@@transducer/result"]=a.prototype.result=function(e){return this.sink.end(this.time,e)},u.prototype.step=function(e,t){return this.tx["@@transducer/step"](e,t)},u.prototype.result=function(e){return this.tx["@@transducer/result"](e)},u.prototype.isReduced=function(e){return null!=e&&e["@@transducer/reduced"]},u.prototype.getResult=function(e){return e["@@transducer/value"]},l.prototype.step=function(e,t){return this.tx.step(e,t)},l.prototype.result=function(e){return this.tx.result(e)},l.prototype.isReduced=function(e){return null!=e&&e.__transducers_reduced__},l.prototype.getResult=function(e){return e.value}},{"../Stream":137}],161:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.map=a,n.constant=function(e,t){return a((function(){return e}),t)},n.tap=function(e,t){return new r.default(new u(e,t.source))};var r=o(e("../Stream")),i=o(e("../fusion/Map")),s=o(e("../sink/Pipe"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return new r.default(i.default.create(e,t.source))}function u(e,t){this.source=t,this.f=e}function l(e,t){this.sink=t,this.f=e}u.prototype.run=function(e,t){return this.source.run(new l(this.f,e),t)},l.prototype.end=s.default.prototype.end,l.prototype.error=s.default.prototype.error,l.prototype.event=function(e,t){(0,this.f)(t),this.sink.event(e,t)}},{"../Stream":137,"../fusion/Map":169,"../sink/Pipe":185}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.zip=function(e){return g(e,m(arguments))},n.zipArray=g;var r=f(e("../Stream")),i=p(e("./transform")),s=p(e("../source/core")),o=f(e("../sink/Pipe")),a=f(e("../sink/IndexSink")),u=p(e("../disposable/dispose")),l=p(e("@most/prelude")),c=f(e("../invoke")),h=f(e("../Queue"));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var d=l.map,m=l.tail;function g(e,t){return 0===t.length?s.empty():1===t.length?i.map(e,t[0]):new r.default(new v(e,d(y,t)))}function y(e){return e.source}function v(e,t){this.f=e,this.sources=t}function x(e,t,n,r){this.f=e,this.sinks=n,this.sink=r,this.buffers=t}function b(e){return e.shift()}v.prototype.run=function(e,t){for(var n,r=this.sources.length,i=new Array(r),s=new Array(r),o=new Array(r),l=new x(this.f,o,s,e),c=0;c<r;++c)o[c]=new h.default,n=s[c]=new a.default(c,l),i[c]=this.sources[c].run(n,t);return u.all(i)},x.prototype.event=function(e,t){var n=this.buffers,r=n[t.index];if(r.push(t.value),1===r.length()){if(!function(e){for(var t=0,n=e.length;t<n;++t)if(e[t].isEmpty())return!1;return!0}(this.buffers))return;!function(e,t,n,r){r.event(t,(0,c.default)(e,d(b,n)))}(this.f,e,n,this.sink),function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n].isEmpty()&&!t[n].active)return!0;return!1}(this.buffers,this.sinks)&&this.sink.end(e,void 0)}},x.prototype.end=function(e,t){this.buffers[t.index].isEmpty()&&this.sink.end(e,t.value)},x.prototype.error=o.default.prototype.error},{"../Queue":136,"../Stream":137,"../disposable/dispose":165,"../invoke":171,"../sink/IndexSink":184,"../sink/Pipe":185,"../source/core":189,"./transform":161,"@most/prelude":113}],163:[function(e,t,n){"use strict";function r(e,t){this._dispose=e,this._data=t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.dispose=function(){return this._dispose(this._data)}},{}],164:[function(e,t,n){"use strict";function r(){this.disposable=void 0,this.disposed=!1,this._resolve=void 0;var e=this;this.result=new Promise((function(t){e._resolve=t}))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.setDisposable=function(e){if(void 0!==this.disposable)throw new Error("setDisposable called more than once");this.disposable=e,this.disposed&&this._resolve(e.dispose())},r.prototype.dispose=function(){return this.disposed||(this.disposed=!0,void 0!==this.disposable&&(this.result=this.disposable.dispose())),this.result}},{}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tryDispose=function(e,t,n){var r=p(t);return(0,s.isPromise)(r)?r.catch((function(t){n.error(e,t)})):r},n.create=c,n.empty=function(){return new r.default(l,void 0)},n.all=function(e){return c(h,e)},n.promised=function(e){return c(f,e)},n.settable=function(){return new i.default},n.once=m;var r=a(e("./Disposable")),i=a(e("./SettableDisposable")),s=e("../Promise"),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("@most/prelude"));function a(e){return e&&e.__esModule?e:{default:e}}var u=o.map,l=o.id;function c(e,t){return m(new r.default(e,t))}function h(e){return Promise.all(u(p,e))}function p(e){try{return e.dispose()}catch(e){return Promise.reject(e)}}function f(e){return e.then(d)}function d(e){return e.dispose()}function m(e){return new r.default(g,function(e){return{disposed:!1,disposable:e,value:void 0}}(e))}function g(e){return e.disposed||(e.disposed=!0,e.value=p(e.disposable),e.disposable=void 0),e.value}},{"../Promise":135,"./Disposable":163,"./SettableDisposable":164,"@most/prelude":113}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){setTimeout((function(){throw e}),0)}},{}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r,i=(r=e("../sink/Pipe"))&&r.__esModule?r:{default:r};function s(e,t){this.p=e,this.source=t}function o(e,t){this.p=e,this.sink=t}s.create=function(e,t){return t instanceof s?new s(function(e,t){return function(n){return e(n)&&t(n)}}(t.p,e),t.source):new s(e,t)},s.prototype.run=function(e,t){return this.source.run(new o(this.p,e),t)},o.prototype.end=i.default.prototype.end,o.prototype.error=i.default.prototype.error,o.prototype.event=function(e,t){(0,this.p)(t)&&this.sink.event(e,t)}},{"../sink/Pipe":185}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r,i=(r=e("../sink/Pipe"))&&r.__esModule?r:{default:r};function s(e,t,n){this.p=e,this.f=t,this.source=n}function o(e,t,n){this.p=e,this.f=t,this.sink=n}s.prototype.run=function(e,t){return this.source.run(new o(this.p,this.f,e),t)},o.prototype.event=function(e,t){var n=this.f;(0,this.p)(t)&&this.sink.event(e,n(t))},o.prototype.end=i.default.prototype.end,o.prototype.error=i.default.prototype.error},{"../sink/Pipe":185}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=a(e("../sink/Pipe")),i=a(e("./Filter")),s=a(e("./FilterMap")),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("@most/prelude"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){this.f=e,this.source=t}function l(e,t){this.f=e,this.sink=t}u.create=function(e,t){return t instanceof u?new u(o.compose(e,t.f),t.source):t instanceof i.default?new s.default(t.p,e,t.source):new u(e,t)},u.prototype.run=function(e,t){return this.source.run(new l(this.f,e),t)},l.prototype.end=r.default.prototype.end,l.prototype.error=r.default.prototype.error,l.prototype.event=function(e,t){var n=this.f;this.sink.event(e,n(t))}},{"../sink/Pipe":185,"./Filter":167,"./FilterMap":168,"@most/prelude":113}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PropagateTask=n.defaultScheduler=n.multicast=n.throwError=n.flatMapError=n.recoverWith=n.await=n.awaitPromises=n.fromPromise=n.debounce=n.throttle=n.timestamp=n.delay=n.during=n.since=n.skipUntil=n.until=n.takeUntil=n.skipAfter=n.skipWhile=n.takeWhile=n.slice=n.skip=n.take=n.distinctBy=n.skipRepeatsWith=n.distinct=n.skipRepeats=n.filter=n.switch=n.switchLatest=n.zipArray=n.zip=n.sampleWith=n.sampleArray=n.sample=n.combineArray=n.combine=n.mergeArray=n.merge=n.mergeConcurrently=n.concatMap=n.flatMapEnd=n.continueWith=n.join=n.chain=n.flatMap=n.transduce=n.ap=n.tap=n.constant=n.map=n.startWith=n.concat=n.generate=n.iterate=n.unfold=n.reduce=n.scan=n.loop=n.drain=n.forEach=n.observe=n.fromEvent=n.periodic=n.from=n.never=n.empty=n.just=n.of=n.Stream=void 0;var r=e("./source/fromEvent");Object.defineProperty(n,"fromEvent",{enumerable:!0,get:function(){return r.fromEvent}});var i=e("./source/unfold");Object.defineProperty(n,"unfold",{enumerable:!0,get:function(){return i.unfold}});var s=e("./source/iterate");Object.defineProperty(n,"iterate",{enumerable:!0,get:function(){return s.iterate}});var o=e("./source/generate");Object.defineProperty(n,"generate",{enumerable:!0,get:function(){return o.generate}});var a=V(e("./Stream")),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("@most/prelude")),l=e("./source/core"),c=e("./source/from"),h=e("./source/periodic"),p=V(e("symbol-observable")),f=e("./observable/subscribe"),d=e("./combinator/thru"),m=e("./combinator/observe"),g=e("./combinator/loop"),y=e("./combinator/accumulate"),v=e("./combinator/build"),x=e("./combinator/transform"),b=e("./combinator/applicative"),w=e("./combinator/transduce"),D=e("./combinator/flatMap"),E=e("./combinator/continueWith"),C=e("./combinator/concatMap"),S=e("./combinator/mergeConcurrently"),A=e("./combinator/merge"),T=e("./combinator/combine"),k=e("./combinator/sample"),_=e("./combinator/zip"),F=e("./combinator/switch"),P=e("./combinator/filter"),M=e("./combinator/slice"),I=e("./combinator/timeslice"),N=e("./combinator/delay"),B=e("./combinator/timestamp"),O=e("./combinator/limit"),L=e("./combinator/promises"),R=e("./combinator/errors"),j=V(e("@most/multicast")),z=V(e("./scheduler/defaultScheduler")),U=V(e("./scheduler/PropagateTask"));function V(e){return e&&e.__esModule?e:{default:e}}n.Stream=a.default,a.default.of=l.of,a.default.empty=l.empty,a.default.from=c.from,n.of=l.of,n.just=l.of,n.empty=l.empty,n.never=l.never,n.from=c.from,n.periodic=h.periodic,a.default.prototype.subscribe=function(e){return(0,f.subscribe)(e,this)},a.default.prototype[p.default]=function(){return this},a.default.prototype.thru=function(e){return(0,d.thru)(e,this)},n.observe=m.observe,n.forEach=m.observe,n.drain=m.drain,a.default.prototype.observe=a.default.prototype.forEach=function(e){return(0,m.observe)(e,this)},a.default.prototype.drain=function(){return(0,m.drain)(this)},n.loop=g.loop,a.default.prototype.loop=function(e,t){return(0,g.loop)(e,t,this)},n.scan=y.scan,n.reduce=y.reduce,a.default.prototype.scan=function(e,t){return(0,y.scan)(e,t,this)},a.default.prototype.reduce=function(e,t){return(0,y.reduce)(e,t,this)},n.concat=v.concat,n.startWith=v.cons,a.default.prototype.concat=function(e){return(0,v.concat)(this,e)},a.default.prototype.startWith=function(e){return(0,v.cons)(e,this)},n.map=x.map,n.constant=x.constant,n.tap=x.tap,n.ap=b.ap,a.default.prototype.map=function(e){return(0,x.map)(e,this)},a.default.prototype.ap=function(e){return(0,b.ap)(this,e)},a.default.prototype.constant=function(e){return(0,x.constant)(e,this)},a.default.prototype.tap=function(e){return(0,x.tap)(e,this)},n.transduce=w.transduce,a.default.prototype.transduce=function(e){return(0,w.transduce)(e,this)},n.flatMap=D.flatMap,n.chain=D.flatMap,n.join=D.join,a.default.prototype.chain=function(e){return(0,D.flatMap)(e,this)},a.default.prototype.flatMap=a.default.prototype.chain,a.default.prototype.join=function(){return(0,D.join)(this)},n.continueWith=E.continueWith,n.flatMapEnd=E.continueWith,a.default.prototype.continueWith=function(e){return(0,E.continueWith)(e,this)},a.default.prototype.flatMapEnd=a.default.prototype.continueWith,n.concatMap=C.concatMap,a.default.prototype.concatMap=function(e){return(0,C.concatMap)(e,this)},n.mergeConcurrently=S.mergeConcurrently,a.default.prototype.mergeConcurrently=function(e){return(0,S.mergeConcurrently)(e,this)},n.merge=A.merge,n.mergeArray=A.mergeArray,a.default.prototype.merge=function(){return(0,A.mergeArray)(u.cons(this,arguments))},n.combine=T.combine,n.combineArray=T.combineArray,a.default.prototype.combine=function(e){return(0,T.combineArray)(e,u.replace(this,0,arguments))},n.sample=k.sample,n.sampleArray=k.sampleArray,n.sampleWith=k.sampleWith,a.default.prototype.sampleWith=function(e){return(0,k.sampleWith)(e,this)},a.default.prototype.sample=function(e){return(0,k.sampleArray)(e,this,u.tail(arguments))},n.zip=_.zip,n.zipArray=_.zipArray,a.default.prototype.zip=function(e){return(0,_.zipArray)(e,u.replace(this,0,arguments))},n.switchLatest=F.switchLatest,n.switch=F.switchLatest,a.default.prototype.switchLatest=function(){return(0,F.switchLatest)(this)},a.default.prototype.switch=a.default.prototype.switchLatest,n.filter=P.filter,n.skipRepeats=P.skipRepeats,n.distinct=P.skipRepeats,n.skipRepeatsWith=P.skipRepeatsWith,n.distinctBy=P.skipRepeatsWith,a.default.prototype.filter=function(e){return(0,P.filter)(e,this)},a.default.prototype.skipRepeats=function(){return(0,P.skipRepeats)(this)},a.default.prototype.skipRepeatsWith=function(e){return(0,P.skipRepeatsWith)(e,this)},n.take=M.take,n.skip=M.skip,n.slice=M.slice,n.takeWhile=M.takeWhile,n.skipWhile=M.skipWhile,n.skipAfter=M.skipAfter,a.default.prototype.take=function(e){return(0,M.take)(e,this)},a.default.prototype.skip=function(e){return(0,M.skip)(e,this)},a.default.prototype.slice=function(e,t){return(0,M.slice)(e,t,this)},a.default.prototype.takeWhile=function(e){return(0,M.takeWhile)(e,this)},a.default.prototype.skipWhile=function(e){return(0,M.skipWhile)(e,this)},a.default.prototype.skipAfter=function(e){return(0,M.skipAfter)(e,this)},n.takeUntil=I.takeUntil,n.until=I.takeUntil,n.skipUntil=I.skipUntil,n.since=I.skipUntil,n.during=I.during,a.default.prototype.until=function(e){return(0,I.takeUntil)(e,this)},a.default.prototype.takeUntil=a.default.prototype.until,a.default.prototype.since=function(e){return(0,I.skipUntil)(e,this)},a.default.prototype.skipUntil=a.default.prototype.since,a.default.prototype.during=function(e){return(0,I.during)(e,this)},n.delay=N.delay,a.default.prototype.delay=function(e){return(0,N.delay)(e,this)},n.timestamp=B.timestamp,a.default.prototype.timestamp=function(){return(0,B.timestamp)(this)},n.throttle=O.throttle,n.debounce=O.debounce,a.default.prototype.throttle=function(e){return(0,O.throttle)(e,this)},a.default.prototype.debounce=function(e){return(0,O.debounce)(e,this)},n.fromPromise=L.fromPromise,n.awaitPromises=L.awaitPromises,n.await=L.awaitPromises,a.default.prototype.awaitPromises=function(){return(0,L.awaitPromises)(this)},a.default.prototype.await=a.default.prototype.awaitPromises,n.recoverWith=R.recoverWith,n.flatMapError=R.flatMapError,n.throwError=R.throwError,a.default.prototype.recoverWith=function(e){return(0,R.flatMapError)(e,this)},a.default.prototype.flatMapError=a.default.prototype.recoverWith,n.multicast=j.default,a.default.prototype.multicast=function(){return(0,j.default)(this)},n.defaultScheduler=z.default,n.PropagateTask=U.default},{"./Stream":137,"./combinator/accumulate":138,"./combinator/applicative":139,"./combinator/build":140,"./combinator/combine":141,"./combinator/concatMap":142,"./combinator/continueWith":143,"./combinator/delay":144,"./combinator/errors":145,"./combinator/filter":146,"./combinator/flatMap":147,"./combinator/limit":148,"./combinator/loop":149,"./combinator/merge":150,"./combinator/mergeConcurrently":151,"./combinator/observe":152,"./combinator/promises":153,"./combinator/sample":154,"./combinator/slice":155,"./combinator/switch":156,"./combinator/thru":157,"./combinator/timeslice":158,"./combinator/timestamp":159,"./combinator/transduce":160,"./combinator/transform":161,"./combinator/zip":162,"./observable/subscribe":175,"./scheduler/PropagateTask":178,"./scheduler/defaultScheduler":182,"./source/core":189,"./source/from":190,"./source/fromEvent":192,"./source/generate":194,"./source/iterate":195,"./source/periodic":196,"./source/unfold":198,"@most/multicast":112,"@most/prelude":113,"symbol-observable":221}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);case 4:return e(t[0],t[1],t[2],t[3]);case 5:return e(t[0],t[1],t[2],t[3],t[4]);default:return e.apply(void 0,t)}}},{}],172:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),n.isIterable=function(e){return"function"==typeof e[r]},n.getIterator=function(e){return e[r]()},n.makeIterable=function(e,t){return t[r]=e,t},r="function"==typeof Set&&"function"==typeof(new Set)["@@iterator"]?"@@iterator":"function"==typeof Symbol?Symbol.iterator:"_es6shim_iterator_"},{}],173:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromObservable=function(e){return new i.default(new a(e))},n.ObservableSource=a,n.SubscriberSink=u;var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),o=e("../source/tryEvent");function a(e){this.observable=e}function u(e,t){this.sink=e,this.scheduler=t}function l(e){return e.unsubscribe()}a.prototype.run=function(e,t){var n=this.observable.subscribe(new u(e,t));if("function"==typeof n)return s.create(n);if(n&&"function"==typeof n.unsubscribe)return s.create(l,n);throw new TypeError("Observable returned invalid subscription "+String(n))},u.prototype.next=function(e){(0,o.tryEvent)(this.scheduler.now(),e,this.sink)},u.prototype.complete=function(e){(0,o.tryEnd)(this.scheduler.now(),e,this.sink)},u.prototype.error=function(e){this.sink.error(this.scheduler.now(),e)}},{"../Stream":137,"../disposable/dispose":165,"../source/tryEvent":197}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=null;if(e){var n=e[i.default];if("function"==typeof n&&(!(t=n.call(e))||"function"!=typeof t.subscribe))throw new TypeError("invalid observable "+t)}return t};var r,i=(r=e("symbol-observable"))&&r.__esModule?r:{default:r}},{"symbol-observable":221}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.subscribe=function(e,t){if(Object(e)!==e)throw new TypeError("subscriber must be an object");var n=i.settable(),o=new a(s.default,e,n);return n.setDisposable(t.source.run(o,r.default)),new u(n)},n.SubscribeObserver=a,n.Subscription=u;var r=o(e("../scheduler/defaultScheduler")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),s=o(e("../fatalError"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){this.fatalError=e,this.subscriber=t,this.disposable=n}function u(e){this.disposable=e}function l(e,t,n){if("function"==typeof t.error)try{t.error(e)}catch(e){n(e)}else n(e)}a.prototype.event=function(e,t){this.disposable.disposed||"function"!=typeof this.subscriber.next||this.subscriber.next(t)},a.prototype.end=function(e,t){if(!this.disposable.disposed){var n=this.subscriber,r=this.fatalError;Promise.resolve(this.disposable.dispose()).then((function(){"function"==typeof n.complete&&n.complete(t)})).catch((function(e){l(e,n,r)}))}},a.prototype.error=function(e,t){var n=this.subscriber,r=this.fatalError;Promise.resolve(this.disposable.dispose()).then((function(){l(t,n,r)}))},u.prototype.unsubscribe=function(){this.disposable.dispose()}},{"../disposable/dispose":165,"../fatalError":166,"../scheduler/defaultScheduler":182}],176:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.withDefaultScheduler=function(e){return o(e,s.default)},n.withScheduler=o;var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./disposable/dispose")),s=(r=e("./scheduler/defaultScheduler"))&&r.__esModule?r:{default:r};function o(e,t){return new Promise((function(n,r){!function(e,t,n,r){var s=i.settable(),o=new a(n,r,s);s.setDisposable(e.run(o,t))}(e,t,n,r)}))}function a(e,t,n){this._end=e,this._error=t,this._disposable=n,this.active=!0}function u(e,t,n,r){Promise.resolve(n.dispose()).then((function(){e(r)}),t)}a.prototype.event=function(e,t){},a.prototype.end=function(e,t){this.active&&(this.active=!1,u(this._end,this._error,this._disposable,t))},a.prototype.error=function(e,t){this.active=!1,u(this._error,this._error,this._disposable,t)}},{"./disposable/dispose":165,"./scheduler/defaultScheduler":182}],177:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=e("../task");function i(){}function s(e){this.f=e,this.active=!0}i.prototype.now=Date.now,i.prototype.setTimer=function(e,t){return t<=0?function(e){var t=new s(e);return(0,r.defer)(t),t}(e):setTimeout(e,t)},i.prototype.clearTimer=function(e){return e instanceof s?e.cancel():clearTimeout(e)},s.prototype.run=function(){return this.active&&this.f()},s.prototype.error=function(e){throw e},s.prototype.cancel=function(){this.active=!1}},{"../task":199}],178:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r,i=(r=e("../fatalError"))&&r.__esModule?r:{default:r};function s(e,t,n){this._run=e,this.value=t,this.sink=n,this.active=!0}function o(e,t,n){n.error(e,t)}function a(e,t,n){n.event(e,t)}function u(e,t,n){n.end(e,t)}s.event=function(e,t){return new s(a,e,t)},s.end=function(e,t){return new s(u,e,t)},s.error=function(e,t){return new s(o,e,t)},s.prototype.dispose=function(){this.active=!1},s.prototype.run=function(e){this.active&&this._run(e,this.value,this.sink)},s.prototype.error=function(e,t){if(!this.active)return(0,i.default)(t);this.sink.error(e,t)}},{"../fatalError":166}],179:[function(e,t,n){"use strict";function r(e,t,n,r){this.time=e,this.period=t,this.task=n,this.scheduler=r,this.active=!0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.run=function(){return this.task.run(this.time)},r.prototype.error=function(e){return this.task.error(this.time,e)},r.prototype.dispose=function(){return this.scheduler.cancel(this),this.task.dispose()}},{}],180:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r,i=(r=e("./ScheduledTask"))&&r.__esModule?r:{default:r},s=e("../task");function o(e,t){this.timer=e,this.timeline=t,this._timer=null,this._nextArrival=1/0;var n=this;this._runReadyTasksBound=function(){n._runReadyTasks(n.now())}}o.prototype.now=function(){return this.timer.now()},o.prototype.asap=function(e){return this.schedule(0,-1,e)},o.prototype.delay=function(e,t){return this.schedule(e,-1,t)},o.prototype.periodic=function(e,t){return this.schedule(0,e,t)},o.prototype.schedule=function(e,t,n){var r=this.now(),s=new i.default(r+Math.max(0,e),t,n,this);return this.timeline.add(s),this._scheduleNextRun(r),s},o.prototype.cancel=function(e){e.active=!1,this.timeline.remove(e)&&this._reschedule()},o.prototype.cancelAll=function(e){this.timeline.removeAll(e),this._reschedule()},o.prototype._reschedule=function(){this.timeline.isEmpty()?this._unschedule():this._scheduleNextRun(this.now())},o.prototype._unschedule=function(){this.timer.clearTimer(this._timer),this._timer=null},o.prototype._scheduleNextRun=function(e){if(!this.timeline.isEmpty()){var t=this.timeline.nextArrival();null===this._timer?this._scheduleNextArrival(t,e):t<this._nextArrival&&(this._unschedule(),this._scheduleNextArrival(t,e))}},o.prototype._scheduleNextArrival=function(e,t){this._nextArrival=e;var n=Math.max(0,e-t);this._timer=this.timer.setTimer(this._runReadyTasksBound,n)},o.prototype._runReadyTasks=function(e){this._timer=null,this.timeline.runTasks(e,s.runTask),this._scheduleNextRun(this.now())}},{"../task":199,"./ScheduledTask":179}],181:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("@most/prelude"));function i(){this.tasks=[]}function s(e,t,n){for(var r=t.events,i=0;i<r.length;++i){var s=r[i];s.active&&(e(s),s.period>=0&&s.active&&(s.time=s.time+s.period,o(s,n)))}return n}function o(e,t){var n=t.length;if(0!==n){var r=u(e.time,t);r>=n?t.push(l(e.time,[e])):e.time===t[r].time?t[r].events.push(e):t.splice(r,0,l(e.time,[e]))}else t.push(l(e.time,[e]))}function a(e,t){t.events=r.removeAll(e,t.events)}function u(e,t){for(var n,r,i=0,s=t.length;i<s;){if(e===(r=t[n=Math.floor((i+s)/2)]).time)return n;e<r.time?s=n:i=n+1}return s}function l(e,t){return{time:e,events:t}}i.prototype.nextArrival=function(){return this.isEmpty()?1/0:this.tasks[0].time},i.prototype.isEmpty=function(){return 0===this.tasks.length},i.prototype.add=function(e){o(e,this.tasks)},i.prototype.remove=function(e){var t=u(e.time,this.tasks);if(t>=0&&t<this.tasks.length){var n=r.findIndex(e,this.tasks[t].events);if(n>=0)return this.tasks[t].events.splice(n,1),!0}return!1},i.prototype.removeAll=function(e){for(var t=0,n=this.tasks.length;t<n;++t)a(e,this.tasks[t])},i.prototype.runTasks=function(e,t){for(var n=this.tasks,r=n.length,i=0;i<r&&n[i].time<=e;)++i;this.tasks=n.slice(i);for(var o=0;o<i;++o)this.tasks=s(t,n[o],this.tasks)}},{"@most/prelude":113}],182:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./Scheduler")),i=o(e("./ClockTimer")),s=o(e("./Timeline"));function o(e){return e&&e.__esModule?e:{default:e}}var a=new r.default(new i.default,new s.default);n.default=a},{"./ClockTimer":177,"./Scheduler":180,"./Timeline":181}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=e("../task");function i(e){this.sink=e,this.events=[],this.active=!0}function s(e,t,n){this.sink=e,this.events=n,this.time=t}function o(e,t,n){this.time=e,this.value=t,this.sink=n}function a(e,t,n){this.time=e,this.value=t,this.sink=n}i.prototype.event=function(e,t){this.active&&(0===this.events.length&&(0,r.defer)(new s(this.sink,e,this.events)),this.events.push({time:e,value:t}))},i.prototype.end=function(e,t){this.active&&this._end(new o(e,t,this.sink))},i.prototype.error=function(e,t){this._end(new a(e,t,this.sink))},i.prototype._end=function(e){this.active=!1,(0,r.defer)(e)},s.prototype.run=function(){for(var e,t=this.events,n=this.sink,r=0,i=t.length;r<i;++r)e=t[r],this.time=e.time,n.event(e.time,e.value);t.length=0},s.prototype.error=function(e){this.sink.error(this.time,e)},o.prototype.run=function(){this.sink.end(this.time,this.value)},o.prototype.error=function(e){this.sink.error(this.time,e)},a.prototype.run=function(){this.sink.error(this.time,this.value)},a.prototype.error=function(e){throw e}},{"../task":199}],184:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r,i=(r=e("./Pipe"))&&r.__esModule?r:{default:r};function s(e,t){this.sink=t,this.index=e,this.active=!0,this.value=void 0}s.prototype.event=function(e,t){this.active&&(this.value=t,this.sink.event(e,this))},s.prototype.end=function(e,t){this.active&&(this.active=!1,this.sink.end(e,{index:this.index,value:t}))},s.prototype.error=i.default.prototype.error},{"./Pipe":185}],185:[function(e,t,n){"use strict";function r(e){this.sink=e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.event=function(e,t){return this.sink.event(e,t)},r.prototype.end=function(e,t){return this.sink.end(e,t)},r.prototype.error=function(e,t){return this.sink.error(e,t)}},{}],186:[function(e,t,n){"use strict";function r(e){this.sink=e,this.active=!0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.prototype.event=function(e,t){this.active&&this.sink.event(e,t)},r.prototype.end=function(e,t){this.active&&(this.disable(),this.sink.end(e,t))},r.prototype.error=function(e,t){this.disable(),this.sink.error(e,t)},r.prototype.disable=function(){return this.active=!1,this.sink}},{}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r,i=(r=e("../sink/DeferredSink"))&&r.__esModule?r:{default:r},s=a(e("../disposable/dispose")),o=a(e("./tryEvent"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e,t){this.event=e,this.source=t}function l(e){var t=e.target;t.source.removeListener(t.event,e.addEvent)}u.prototype.run=function(e,t){var n=new i.default(e);function r(e){var r=arguments,i=arguments.length;if(i>1){for(var s=new Array(i),a=0;a<i;++a)s[a]=r[a];o.tryEvent(t.now(),s,n)}else o.tryEvent(t.now(),e,n)}return this.source.addListener(this.event,r),s.create(l,{target:this,addEvent:r})}},{"../disposable/dispose":165,"../sink/DeferredSink":183,"./tryEvent":197}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r=s(e("../disposable/dispose")),i=s(e("./tryEvent"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){this.event=e,this.source=t,this.capture=n}function a(e){var t=e.target;t.source.removeEventListener(t.event,e.addEvent,t.capture)}o.prototype.run=function(e,t){function n(n){i.tryEvent(t.now(),n,e)}return this.source.addEventListener(this.event,n,this.capture),r.create(a,{target:this,addEvent:n})}},{"../disposable/dispose":165,"./tryEvent":197}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.of=function(e){return new r.default(new a(e))},n.empty=function(){return h},n.never=function(){return f};var r=o(e("../Stream")),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../disposable/dispose")),s=o(e("../scheduler/PropagateTask"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){this.value=e}function u(e,t,n){n.event(e,t),n.end(e,void 0)}function l(){}function c(e){return e.dispose()}a.prototype.run=function(e,t){return t.asap(new s.default(u,this.value,e))},l.prototype.run=function(e,t){var n=s.default.end(void 0,e);return t.asap(n),i.create(c,n)};var h=new r.default(new l);function p(){}p.prototype.run=function(){return i.empty()};var f=new r.default(new p)},{"../Stream":137,"../disposable/dispose":165,"../scheduler/PropagateTask":178}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.from=function(e){if(e instanceof r.default)return e;var t=(0,a.default)(e);if(null!=t)return(0,u.fromObservable)(t);if(Array.isArray(e)||(0,l.isArrayLike)(e))return(0,i.fromArray)(e);if((0,s.isIterable)(e))return(0,o.fromIterable)(e);throw new TypeError("from(x) must be observable, iterable, or array-like: "+e)};var r=c(e("../Stream")),i=e("./fromArray"),s=e("../iterable"),o=e("./fromIterable"),a=c(e("../observable/getObservable")),u=e("../observable/fromObservable"),l=e("@most/prelude");function c(e){return e&&e.__esModule?e:{default:e}}},{"../Stream":137,"../iterable":172,"../observable/fromObservable":173,"../observable/getObservable":174,"./fromArray":191,"./fromIterable":193,"@most/prelude":113}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromArray=function(e){return new r.default(new o(e))};var r=s(e("../Stream")),i=s(e("../scheduler/PropagateTask"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){this.array=e}function a(e,t,n){for(var r=0,i=t.length;r<i&&this.active;++r)n.event(e,t[r]);this.active&&n.end(e)}o.prototype.run=function(e,t){return t.asap(new i.default(a,this.array,e))}},{"../Stream":137,"../scheduler/PropagateTask":178}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromEvent=function(e,t,n){var o;if("function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener)arguments.length<3&&(n=!1),o=new i.default(e,t,n);else{if("function"!=typeof t.addListener||"function"!=typeof t.removeListener)throw new Error("source must support addEventListener/removeEventListener or addListener/removeListener");o=new s.default(e,t)}return new r.default(o)};var r=o(e("../Stream")),i=o(e("./EventTargetSource")),s=o(e("./EventEmitterSource"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../Stream":137,"./EventEmitterSource":187,"./EventTargetSource":188}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fromIterable=function(e){return new r.default(new a(e))};var r=o(e("../Stream")),i=e("../iterable"),s=o(e("../scheduler/PropagateTask"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){this.iterable=e}function u(e,t,n){for(var r=t.next();!r.done&&this.active;)n.event(e,r.value),r=t.next();n.end(e,r.value)}a.prototype.run=function(e,t){return t.asap(new s.default(u,(0,i.getIterator)(this.iterable),e))}},{"../Stream":137,"../iterable":172,"../scheduler/PropagateTask":178}],194:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.generate=function(e){return new i.default(new o(e,s.tail(arguments)))};var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("@most/prelude"));function o(e,t){this.f=e,this.args=t}function a(e,t,n){this.iterator=e,this.sink=t,this.scheduler=n,this.active=!0;var r=this;Promise.resolve(this).then(u).catch((function(e){r.sink.error(r.scheduler.now(),e)}))}function u(e,t){return e.active?l(e,e.iterator.next(t)):t}function l(e,t){return t.done?e.sink.end(e.scheduler.now(),t.value):Promise.resolve(t.value).then((function(t){return function(e,t){return e.sink.event(e.scheduler.now(),t),u(e,t)}(e,t)}),(function(t){return function(e,t){return l(e,e.iterator.throw(t))}(e,t)}))}o.prototype.run=function(e,t){return new a(this.f.apply(void 0,this.args),e,t)},a.prototype.dispose=function(){this.active=!1}},{"../Stream":137,"@most/prelude":113}],195:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.iterate=function(e,t){return new i.default(new s(e,t))};var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r};function s(e,t){this.f=e,this.value=t}function o(e,t,n,r){this.f=e,this.sink=n,this.scheduler=r,this.active=!0;var i=t,s=this;Promise.resolve(this).then((function(e){return a(e,i)})).catch((function(e){s.sink.error(s.scheduler.now(),e)}))}function a(e,t){if(e.sink.event(e.scheduler.now(),t),!e.active)return t;var n=e.f;return Promise.resolve(n(t)).then((function(t){return function(e,t){return e.active?a(e,t):e.value}(e,t)}))}s.prototype.run=function(e,t){return new o(this.f,this.value,e,t)},o.prototype.dispose=function(){this.active=!1}},{"../Stream":137}],196:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.periodic=function(e,t){return new r.default(new o(e,t))};var r=s(e("../Stream")),i=s(e("../scheduler/PropagateTask"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.period=e,this.value=t}o.prototype.run=function(e,t){return t.periodic(this.period,i.default.event(this.value,e))}},{"../Stream":137,"../scheduler/PropagateTask":178}],197:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.tryEvent=function(e,t,n){try{n.event(e,t)}catch(t){n.error(e,t)}},n.tryEnd=function(e,t,n){try{n.end(e,t)}catch(t){n.error(e,t)}}},{}],198:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unfold=function(e,t){return new i.default(new s(e,t))};var r,i=(r=e("../Stream"))&&r.__esModule?r:{default:r};function s(e,t){this.f=e,this.value=t}function o(e,t,n,r){this.f=e,this.sink=n,this.scheduler=r,this.active=!0;var i=this;Promise.resolve(this).then((function(e){return a(e,t)})).catch((function(e){i.sink.error(i.scheduler.now(),e)}))}function a(e,t){var n=e.f;return Promise.resolve(n(t)).then((function(t){return function(e,t){return t.done?(e.sink.end(e.scheduler.now(),t.value),t.value):(e.sink.event(e.scheduler.now(),t.value),e.active?a(e,t.seed):t.value)}(e,t)}))}s.prototype.run=function(e,t){return new o(this.f,this.value,e,t)},o.prototype.dispose=function(){this.active=!1}},{"../Stream":137}],199:[function(e,t,n){"use strict";function r(e){try{return e.run()}catch(t){return e.error(t)}}Object.defineProperty(n,"__esModule",{value:!0}),n.defer=function(e){return Promise.resolve(e).then(r)},n.runTask=r},{}],200:[function(e,t,n){"use strict";t.exports=function e(t){var n,r,i;return r="",i=!0,t.some((function(t,s,o){if(0===s)return n="<"+t,1===o.length||void 0;if(1===s){if((a=t)&&"[object Object]"===Object.prototype.toString.call(a))return Object.keys(t).forEach((function(e){n+=" "+e+'="'+t[e]+'"'})),2===o.length||void(n+=">");n+=">"}var a;switch(typeof t){case"string":case"number":case"boolean":return void(r+=t+"\n")}i=!1,r+=e(t)}))?n+"/>\n":i?n+function(e){var t=e.split("\n"),n=[];return t.forEach((function(e){""!==e.trim()&&n.push(e)})),n.join("\n")}(r)+"</"+t[0]+">\n":n+"\n"+function(e){var t,n=[];return"string"!=typeof e?e:1===(t=e.split("\n")).length?"  "+e:(t.forEach((function(e){""!==e.trim()?n.push("  "+e):n.push(e)})),n.join("\n"))}(r)+"</"+t[0]+">\n"}},{}],201:[function(e,t,n){(function(e){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return e.nextTick((function(){t.apply(null,s)}))}}}:t.exports=e}).call(this,e("_process"))},{_process:202}],202:[function(e,t,n){var r,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],h=!1,p=-1;function f(){h&&l&&(h=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!h){var e=u(f);h=!0;for(var t=c.length;t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||h||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],203:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":204}],204:[function(e,t,n){"use strict";var r=e("process-nextick-args"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=h;var s=e("core-util-is");s.inherits=e("inherits");var o=e("./_stream_readable"),a=e("./_stream_writable");s.inherits(h,o);for(var u=i(a.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=a.prototype[c])}function h(e){if(!(this instanceof h))return new h(e);o.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":206,"./_stream_writable":208,"core-util-is":119,inherits:125,"process-nextick-args":201}],205:[function(e,t,n){"use strict";t.exports=s;var r=e("./_stream_transform"),i=e("core-util-is");function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}i.inherits=e("inherits"),i.inherits(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":207,"core-util-is":119,inherits:125}],206:[function(e,t,n){(function(n,r){"use strict";var i=e("process-nextick-args");t.exports=x;var s,o=e("isarray");x.ReadableState=v,e("events").EventEmitter;var a=function(e,t){return e.listeners(t).length},u=e("./internal/streams/stream"),l=e("safe-buffer").Buffer,c=r.Uint8Array||function(){},h=e("core-util-is");h.inherits=e("inherits");var p=e("util"),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,m=e("./internal/streams/BufferList"),g=e("./internal/streams/destroy");h.inherits(x,u);var y=["error","close","destroy","pause","resume"];function v(t,n){t=t||{};var r=n instanceof(s=s||e("./_stream_duplex"));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function x(t){if(s=s||e("./_stream_duplex"),!(this instanceof x))return new x(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(e,t,n,r,i){var s,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}}(e,o)):(i||(s=function(e,t){var n,r;return r=t,l.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?w(e,o,t,!1):A(e,o)):w(e,o,t,!1))):r||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function w(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),A(e,t)}Object.defineProperty(x.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=g.destroy,x.prototype._undestroy=g.undestroy,x.prototype._destroy=function(e,t){this.push(null),t(e)},x.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},x.prototype.unshift=function(e){return b(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){return d||(d=e("string_decoder/").StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var D=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=D?e=D:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(S,e):S(e))}function S(e){f("emit readable"),e.emit("readable"),F(e)}function A(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(T,e,t))}function T(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function k(e){f("readable nexttick read 0"),e.read(0)}function _(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(o===s.length?i+=s:i+=s.slice(0,e),0==(e-=o)){o===s.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var s=r.data,o=e>s.length?s.length:e;if(s.copy(n,n.length-e,0,o),0==(e-=o)){o===s.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(o));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function M(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?M(this):C(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&M(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&M(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},x.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,t);var u=t&&!1===t.end||e===n.stdout||e===n.stderr?v:l;function l(){f("onend"),e.end()}s.endEmitted?i.nextTick(u):r.once("end",u),e.on("unpipe",(function t(n,i){f("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",c),e.removeListener("error",m),e.removeListener("unpipe",t),r.removeListener("end",l),r.removeListener("end",v),r.removeListener("data",d),h=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,F(e))}}(r);e.on("drain",c);var h=!1,p=!1;function d(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==N(s.pipes,e))&&!h&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),v(),e.removeListener("error",m),0===a(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),v()}function y(){f("onfinish"),e.removeListener("close",g),v()}function v(){f("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?o(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",r),s.flowing||(f("pipe resume"),r.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,n);return this}var o=N(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):i.nextTick(k,this))}return n},x.prototype.addListener=x.prototype.on,x.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(_,e,t))}(this,e)),this},x.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},x.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<y.length;s++)e.on(y[s],this.emit.bind(this,y[s]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),x._fromList=P}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":204,"./internal/streams/BufferList":209,"./internal/streams/destroy":210,"./internal/streams/stream":211,_process:202,"core-util-is":119,events:123,inherits:125,isarray:127,"process-nextick-args":201,"safe-buffer":212,"string_decoder/":219,util:116}],207:[function(e,t,n){"use strict";t.exports=o;var r=e("./_stream_duplex"),i=e("core-util-is");function s(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e("inherits"),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},{"./_stream_duplex":204,"core-util-is":119,inherits:125}],208:[function(e,t,n){(function(n,r,i){"use strict";var s=e("process-nextick-args");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=v;var a,u=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:s.nextTick;v.WritableState=y;var l=e("core-util-is");l.inherits=e("inherits");var c,h={deprecate:e("util-deprecate")},p=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,d=r.Uint8Array||function(){},m=e("./internal/streams/destroy");function g(){}function y(t,n){a=a||e("./_stream_duplex"),t=t||{};var r=n instanceof a;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(s.nextTick(i,r),s.nextTick(C,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),C(e,t))}(e,n,r,t,i);else{var o=D(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),r?u(b,e,n,o,i):b(e,n,o,i)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function v(t){if(a=a||e("./_stream_duplex"),!(c.call(v,this)||this instanceof a))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),p.call(this)}function x(e,t,n,r,i,s,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),C(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,x(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,h=n.callback;if(x(e,t,!1,t.objectMode?1:l.length,l,c,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),C(e,t)}))}function C(e,t){var n=D(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(v,p),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===v&&e&&e._writableState instanceof y}})):c=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(r=e,f.isBuffer(r)||r instanceof d);return a&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),s.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),s.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,s){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,a,r,i,s);return u}(this,i,a,e,t,n)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?s.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":204,"./internal/streams/destroy":210,"./internal/streams/stream":211,_process:202,"core-util-is":119,inherits:125,"process-nextick-args":201,"safe-buffer":212,timers:223,"util-deprecate":224}],209:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=r.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=i,n=o,s.data.copy(t,n),o+=s.data.length,s=s.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":212,util:116}],210:[function(e,t,n){"use strict";var r=e("process-nextick-args");function i(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":201}],211:[function(e,t,n){t.exports=e("events").EventEmitter},{events:123}],212:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(s(r,n),n.Buffer=o),s(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:118}],213:[function(e,t,n){t.exports=e("./readable").PassThrough},{"./readable":214}],214:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":204,"./lib/_stream_passthrough.js":205,"./lib/_stream_readable.js":206,"./lib/_stream_transform.js":207,"./lib/_stream_writable.js":208}],215:[function(e,t,n){t.exports=e("./readable").Transform},{"./readable":214}],216:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":208}],217:[function(e,t,n){(function(t){!function(n){n.parser=function(e,t){return new s(e,t)},n.SAXParser=s,n.SAXStream=a,n.createStream=function(e,t){return new a(e,t)},n.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function s(e,t){if(!(this instanceof s))return new s(e,t);var r=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=n.MAX_BUFFER_LENGTH,r.opt=t||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=E.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(c)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),S(r,"onready")}n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),s.prototype={end:function(){F(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return _(t,"Cannot write after close. Assign an onready handler.");if(null===e)return F(t);"object"==typeof e&&(e=e.toString());for(var r=0,s="";s=j(e,r++),t.c=s,s;)switch(t.trackPosition&&(t.position++,"\n"===s?(t.line++,t.column=0):t.column++),t.state){case E.BEGIN:if(t.state=E.BEGIN_WHITESPACE,"\ufeff"===s)continue;R(t,s);continue;case E.BEGIN_WHITESPACE:R(t,s);continue;case E.TEXT:if(t.sawRoot&&!t.closedRoot){for(var o=r-1;s&&"<"!==s&&"&"!==s;)(s=j(e,r++))&&t.trackPosition&&(t.position++,"\n"===s?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(o,r-1)}"<"!==s||t.sawRoot&&t.closedRoot&&!t.strict?(m(s)||t.sawRoot&&!t.closedRoot||P(t,"Text data outside of root node."),"&"===s?t.state=E.TEXT_ENTITY:t.textNode+=s):(t.state=E.OPEN_WAKA,t.startTagPosition=t.position);continue;case E.SCRIPT:"<"===s?t.state=E.SCRIPT_ENDING:t.script+=s;continue;case E.SCRIPT_ENDING:"/"===s?t.state=E.CLOSE_TAG:(t.script+="<"+s,t.state=E.SCRIPT);continue;case E.OPEN_WAKA:if("!"===s)t.state=E.SGML_DECL,t.sgmlDecl="";else if(m(s));else if(v(h,s))t.state=E.OPEN_TAG,t.tagName=s;else if("/"===s)t.state=E.CLOSE_TAG,t.tagName="";else if("?"===s)t.state=E.PROC_INST,t.procInstName=t.procInstBody="";else{if(P(t,"Unencoded <"),t.startTagPosition+1<t.position){var a=t.position-t.startTagPosition;s=new Array(a).join(" ")+s}t.textNode+="<"+s,t.state=E.TEXT}continue;case E.SGML_DECL:"[CDATA["===(t.sgmlDecl+s).toUpperCase()?(A(t,"onopencdata"),t.state=E.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+s==="--"?(t.state=E.COMMENT,t.comment="",t.sgmlDecl=""):"DOCTYPE"===(t.sgmlDecl+s).toUpperCase()?(t.state=E.DOCTYPE,(t.doctype||t.sawRoot)&&P(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===s?(A(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=E.TEXT):g(s)?(t.state=E.SGML_DECL_QUOTED,t.sgmlDecl+=s):t.sgmlDecl+=s;continue;case E.SGML_DECL_QUOTED:s===t.q&&(t.state=E.SGML_DECL,t.q=""),t.sgmlDecl+=s;continue;case E.DOCTYPE:">"===s?(t.state=E.TEXT,A(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=s,"["===s?t.state=E.DOCTYPE_DTD:g(s)&&(t.state=E.DOCTYPE_QUOTED,t.q=s));continue;case E.DOCTYPE_QUOTED:t.doctype+=s,s===t.q&&(t.q="",t.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:t.doctype+=s,"]"===s?t.state=E.DOCTYPE:g(s)&&(t.state=E.DOCTYPE_DTD_QUOTED,t.q=s);continue;case E.DOCTYPE_DTD_QUOTED:t.doctype+=s,s===t.q&&(t.state=E.DOCTYPE_DTD,t.q="");continue;case E.COMMENT:"-"===s?t.state=E.COMMENT_ENDING:t.comment+=s;continue;case E.COMMENT_ENDING:"-"===s?(t.state=E.COMMENT_ENDED,t.comment=k(t.opt,t.comment),t.comment&&A(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+s,t.state=E.COMMENT);continue;case E.COMMENT_ENDED:">"!==s?(P(t,"Malformed comment"),t.comment+="--"+s,t.state=E.COMMENT):t.state=E.TEXT;continue;case E.CDATA:"]"===s?t.state=E.CDATA_ENDING:t.cdata+=s;continue;case E.CDATA_ENDING:"]"===s?t.state=E.CDATA_ENDING_2:(t.cdata+="]"+s,t.state=E.CDATA);continue;case E.CDATA_ENDING_2:">"===s?(t.cdata&&A(t,"oncdata",t.cdata),A(t,"onclosecdata"),t.cdata="",t.state=E.TEXT):"]"===s?t.cdata+="]":(t.cdata+="]]"+s,t.state=E.CDATA);continue;case E.PROC_INST:"?"===s?t.state=E.PROC_INST_ENDING:m(s)?t.state=E.PROC_INST_BODY:t.procInstName+=s;continue;case E.PROC_INST_BODY:if(!t.procInstBody&&m(s))continue;"?"===s?t.state=E.PROC_INST_ENDING:t.procInstBody+=s;continue;case E.PROC_INST_ENDING:">"===s?(A(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=E.TEXT):(t.procInstBody+="?"+s,t.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:v(p,s)?t.tagName+=s:(M(t),">"===s?B(t):"/"===s?t.state=E.OPEN_TAG_SLASH:(m(s)||P(t,"Invalid character in tag name"),t.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:">"===s?(B(t,!0),O(t)):(P(t,"Forward-slash in opening tag not followed by >"),t.state=E.ATTRIB);continue;case E.ATTRIB:if(m(s))continue;">"===s?B(t):"/"===s?t.state=E.OPEN_TAG_SLASH:v(h,s)?(t.attribName=s,t.attribValue="",t.state=E.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case E.ATTRIB_NAME:"="===s?t.state=E.ATTRIB_VALUE:">"===s?(P(t,"Attribute without value"),t.attribValue=t.attribName,N(t),B(t)):m(s)?t.state=E.ATTRIB_NAME_SAW_WHITE:v(p,s)?t.attribName+=s:P(t,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if("="===s)t.state=E.ATTRIB_VALUE;else{if(m(s))continue;P(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",A(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===s?B(t):v(h,s)?(t.attribName=s,t.state=E.ATTRIB_NAME):(P(t,"Invalid attribute name"),t.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(m(s))continue;g(s)?(t.q=s,t.state=E.ATTRIB_VALUE_QUOTED):(P(t,"Unquoted attribute value"),t.state=E.ATTRIB_VALUE_UNQUOTED,t.attribValue=s);continue;case E.ATTRIB_VALUE_QUOTED:if(s!==t.q){"&"===s?t.state=E.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=s;continue}N(t),t.q="",t.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:m(s)?t.state=E.ATTRIB:">"===s?B(t):"/"===s?t.state=E.OPEN_TAG_SLASH:v(h,s)?(P(t,"No whitespace between attributes"),t.attribName=s,t.attribValue="",t.state=E.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!y(s)){"&"===s?t.state=E.ATTRIB_VALUE_ENTITY_U:t.attribValue+=s;continue}N(t),">"===s?B(t):t.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(t.tagName)">"===s?O(t):v(p,s)?t.tagName+=s:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=E.SCRIPT):(m(s)||P(t,"Invalid tagname in closing tag"),t.state=E.CLOSE_TAG_SAW_WHITE);else{if(m(s))continue;x(h,s)?t.script?(t.script+="</"+s,t.state=E.SCRIPT):P(t,"Invalid tagname in closing tag."):t.tagName=s}continue;case E.CLOSE_TAG_SAW_WHITE:if(m(s))continue;">"===s?O(t):P(t,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var u,l;switch(t.state){case E.TEXT_ENTITY:u=E.TEXT,l="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:u=E.ATTRIB_VALUE_QUOTED,l="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:u=E.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===s?(t[l]+=L(t),t.entity="",t.state=u):v(t.entity.length?d:f,s)?t.entity+=s:(P(t,"Invalid character in entity name"),t[l]+="&"+t.entity+s,t.entity="",t.state=u);continue;default:throw new Error(t,"Unknown state: "+t.state)}return t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,s=0,o=i.length;s<o;s++){var a=e[i[s]].length;if(a>t)switch(i[s]){case"textNode":T(e);break;case"cdata":A(e,"oncdata",e.cdata),e.cdata="";break;case"script":A(e,"onscript",e.script),e.script="";break;default:_(e,"Max buffer length exceeded: "+i[s])}r=Math.max(r,a)}var u=n.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(t),t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;T(e=this),""!==e.cdata&&(A(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(A(e,"onscript",e.script),e.script="")}};try{r=e("stream").Stream}catch(e){r=function(){}}var o=n.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function a(e,t){if(!(this instanceof a))return new a(e,t);r.apply(this),this._parser=new s(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(r.prototype,{constructor:{value:a}}),a.prototype.write=function(n){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(n)){if(!this._decoder){var r=e("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},a.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},a.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",c={xml:u,xmlns:l},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function y(e){return">"===e||m(e)}function v(e,t){return e.test(t)}function x(e,t){return!v(e,t)}var b,w,D,E=0;for(var C in n.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach((function(e){var t=n.ENTITIES[e],r="number"==typeof t?String.fromCharCode(t):t;n.ENTITIES[e]=r})),n.STATE)n.STATE[n.STATE[C]]=C;function S(e,t,n){e[t]&&e[t](n)}function A(e,t,n){e.textNode&&T(e),S(e,t,n)}function T(e){e.textNode=k(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function _(e,t){return T(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function F(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==E.BEGIN&&e.state!==E.BEGIN_WHITESPACE&&e.state!==E.TEXT&&_(e,"Unexpected end"),T(e),e.c="",e.closed=!0,S(e,"onend"),s.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof s))throw new Error("bad call to strictFail");e.strict&&_(e,t)}function M(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,A(e,"onopentagstart",n)}function I(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function N(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=I(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==u)P(e,"xml: prefix must be bound to "+u+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==l)P(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var i=e.tag,s=e.tags[e.tags.length-1]||e;i.ns===s.ns&&(i.ns=Object.create(s.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,A(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var n=e.tag,r=I(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){A(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var s=0,o=e.attribList.length;s<o;s++){var a=e.attribList[s],u=a[0],l=a[1],c=I(u,!0),h=c.prefix,p=c.local,f=""===h?"":n.ns[h]||"",d={name:u,value:l,prefix:h,local:p,uri:f};h&&"xmlns"!==h&&!f&&(P(e,"Unbound namespace prefix: "+JSON.stringify(h)),d.uri=h),e.tag.attributes[u]=d,A(e,"onattribute",d)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),A(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=E.TEXT:e.state=E.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function O(e){if(!e.tagName)return P(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=E.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=E.SCRIPT);A(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)P(e,"Unexpected close tag");if(t<0)return P(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=E.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var s=e.tag=e.tags.pop();e.tagName=e.tag.name,A(e,"onclosetag",e.tagName);var o={};for(var a in s.ns)o[a]=s.ns[a];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&s.ns!==u.ns&&Object.keys(s.ns).forEach((function(t){var n=s.ns[t];A(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=E.TEXT}function L(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||i.toLowerCase()!==n?(P(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function R(e,t){"<"===t?(e.state=E.OPEN_WAKA,e.startTagPosition=e.position):m(t)||(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=E.TEXT)}function j(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}E=n.STATE,String.fromCodePoint||(b=String.fromCharCode,w=Math.floor,D=function(){var e,t,n=16384,r=[],i=-1,s=arguments.length;if(!s)return"";for(var o="";++i<s;){var a=Number(arguments[i]);if(!isFinite(a)||a<0||a>1114111||w(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(i+1===s||r.length>n)&&(o+=b.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:D,configurable:!0,writable:!0}):String.fromCodePoint=D)}(void 0===n?this.sax={}:n)}).call(this,e("buffer").Buffer)},{buffer:118,stream:218,string_decoder:117}],218:[function(e,t,n){t.exports=i;var r=e("events").EventEmitter;function i(){r.call(this)}e("inherits")(i,r),i.Readable=e("readable-stream/readable.js"),i.Writable=e("readable-stream/writable.js"),i.Duplex=e("readable-stream/duplex.js"),i.Transform=e("readable-stream/transform.js"),i.PassThrough=e("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function s(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",u));var o=!1;function a(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",s),n.removeListener("end",a),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},{events:123,inherits:125,"readable-stream/duplex.js":203,"readable-stream/passthrough.js":213,"readable-stream/readable.js":214,"readable-stream/transform.js":215,"readable-stream/writable.js":216}],219:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":220}],220:[function(e,t,n){arguments[4][212][0].apply(n,arguments)},{buffer:118,dup:212}],221:[function(e,t,n){(function(r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,s,o=(i=e("./ponyfill.js"))&&i.__esModule?i:{default:i};s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==t?t:Function("return this")();var a=(0,o.default)(s);n.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":222}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}},{}],223:[function(e,t,n){(function(t,r){var i=e("process/browser.js").nextTick,s=Function.prototype.apply,o=Array.prototype.slice,a={},u=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(s.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(s.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=u++,r=!(arguments.length<2)&&o.call(arguments,1);return a[t]=!0,i((function(){a[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete a[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":202,timers:223}],224:[function(e,t,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],225:[function(e,t,n){var r=arguments[3],i=arguments[4],s=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var n,a=Object.keys(s),u=0,l=a.length;u<l;u++){var c=a[u],h=s[c].exports;if(h===e||h&&h.default===e){n=c;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var p={};for(u=0,l=a.length;u<l;u++)p[c=a[u]]=c;i[n]=["function(require,module,exports){"+e+"(self); }",p]}var f=Math.floor(Math.pow(16,8)*Math.random()).toString(16),d={};d[n]=n,i[f]=["function(require,module,exports){var f = require("+o(n)+");(f.default ? f.default : f)(self);}",d];var m={};!function e(t){for(var n in m[t]=!0,i[t][1]){var r=i[t][1][n];m[r]||e(r)}}(f);var g="("+r+")({"+Object.keys(m).map((function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"})).join(",")+"},{},["+o(f)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,v=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return v;var x=y.createObjectURL(v),b=new Worker(x);return b.objectURL=x,b}},{}],226:[function(e,t,n){function r(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function s(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function o(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function a(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,s=n.domBuilder||new i,a=n.errorHandler,u=n.locator,c=n.xmlns||{},h={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&s.setDocumentLocator(u),r.errorHandler=function(e,t,n){if(!e){if(t instanceof i)return t;e=t}var r={},s=e instanceof Function;function a(t){var i=e[t];!i&&s&&(i=2==e.length?function(n){e(t,n)}:e),r[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+o(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),r}(a,s,u),r.domBuilder=n.domBuilder||s,/\/x?html?$/.test(t)&&(h.nbsp=" ",h.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,h):r.errorHandler.error("invalid doc source"),s.doc},i.prototype={startDocument:function(){this.doc=(new c).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var i=this.doc,o=i.createElementNS(e,n||t),a=r.length;u(this,o),this.currentElement=o,this.locator&&s(this.locator,o);for(var l=0;l<a;l++){e=r.getURI(l);var c=r.getValue(l),h=(n=r.getQName(l),i.createAttributeNS(e,n));this.locator&&s(r.getLocator(l),h),h.value=h.nodeValue=c,o.setAttributeNode(h)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&s(this.locator,n),u(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=a.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&s(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=a.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&s(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(e,t,n);this.locator&&s(this.locator,i),u(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,o(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,o(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,o(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){i.prototype[e]=function(){return null}}));var l=e("./sax").XMLReader,c=n.DOMImplementation=e("./dom").DOMImplementation;n.XMLSerializer=e("./dom").XMLSerializer,n.DOMParser=r},{"./dom":227,"./sax":228}],227:[function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t){var n=e.prototype;if(Object.create){var i=Object.create(t.prototype);n.__proto__=i}if(!(n instanceof t)){function s(){}s.prototype=t.prototype,r(n,s=new s),e.prototype=n=s}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var s={},o=s.ELEMENT_NODE=1,a=s.ATTRIBUTE_NODE=2,u=s.TEXT_NODE=3,l=s.CDATA_SECTION_NODE=4,c=s.ENTITY_REFERENCE_NODE=5,h=s.ENTITY_NODE=6,p=s.PROCESSING_INSTRUCTION_NODE=7,f=s.COMMENT_NODE=8,d=s.DOCUMENT_NODE=9,m=s.DOCUMENT_TYPE_NODE=10,g=s.DOCUMENT_FRAGMENT_NODE=11,y=s.NOTATION_NODE=12,v={},x={},b=(v.INDEX_SIZE_ERR=(x[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(x[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(x[3]="Hierarchy request error",3)),w=(v.WRONG_DOCUMENT_ERR=(x[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(x[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(x[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(x[7]="No modification allowed",7),v.NOT_FOUND_ERR=(x[8]="Not found",8)),D=(v.NOT_SUPPORTED_ERR=(x[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(x[10]="Attribute in use",10));function E(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,x[e]),this.message=x[e],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=e,t&&(this.message=this.message+": "+t),n}function C(){}function S(e,t){this._node=e,this._refresh=t,A(this)}function A(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ie(e,"length",n.length),r(n,e),e._inc=t}}function T(){}function k(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _(e,t,n,r){if(r?t[k(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(r&&O(i,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(i,e,n))}}function F(e,t,n){var r=k(t,n);if(!(r>=0))throw E(w,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var s=e.ownerDocument;s&&(O(s,e,n),n.ownerElement=null)}}function P(e){if(this._features={},e)for(var t in e)this._features=e[t]}function M(){}function I(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function N(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(N(e,t))return!0}while(e=e.nextSibling)}function B(){}function O(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function L(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var i=t.firstChild,s=0;i;)r[s++]=i,i=i.nextSibling;r.length=s}}}function R(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,L(e.ownerDocument,e),t}function j(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===g){var i=t.firstChild;if(null==i)return t;var s=t.lastChild}else i=s=t;var o=n?n.previousSibling:e.lastChild;i.previousSibling=o,s.nextSibling=n,o?o.nextSibling=i:e.firstChild=i,null==n?e.lastChild=s:n.previousSibling=s;do{i.parentNode=e}while(i!==s&&(i=i.nextSibling));return L(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function z(){this._nsMap={}}function U(){}function V(){}function G(){}function $(){}function X(){}function Y(){}function W(){}function J(){}function q(){}function H(){}function K(){}function Z(){}function Q(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,s=r.namespaceURI;if(s&&null==i&&null==(i=r.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return te(this,n,e,t,o),n.join("")}function ee(e,t,n){var r=e.prefix||"",i=e.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var s=n.length;s--;){var o=n[s];if(o.prefix==r)return o.namespace!=i}return!0}function te(e,t,n,r,i){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case o:i||(i=[]),i.length;var s=e.attributes,h=s.length,y=e.firstChild,v=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",v);for(var x=0;x<h;x++)"xmlns"==(b=s.item(x)).prefix?i.push({prefix:b.localName,namespace:b.value}):"xmlns"==b.nodeName&&i.push({prefix:"",namespace:b.value});for(x=0;x<h;x++){var b;if(ee(b=s.item(x),0,i)){var w=b.prefix||"",D=b.namespaceURI,E=w?" xmlns:"+w:" xmlns";t.push(E,'="',D,'"'),i.push({prefix:w,namespace:D})}te(b,t,n,r,i)}if(ee(e,0,i)&&(w=e.prefix||"",D=e.namespaceURI,E=w?" xmlns:"+w:" xmlns",t.push(E,'="',D,'"'),i.push({prefix:w,namespace:D})),y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(v)){if(t.push(">"),n&&/^script$/i.test(v))for(;y;)y.data?t.push(y.data):te(y,t,n,r,i),y=y.nextSibling;else for(;y;)te(y,t,n,r,i),y=y.nextSibling;t.push("</",v,">")}else t.push("/>");return;case d:case g:for(y=e.firstChild;y;)te(y,t,n,r,i),y=y.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,I),'"');case u:return t.push(e.data.replace(/[<&]/g,I));case l:return t.push("<![CDATA[",e.data,"]]>");case f:return t.push("\x3c!--",e.data,"--\x3e");case m:var C=e.publicId,S=e.systemId;if(t.push("<!DOCTYPE ",e.name),C)t.push(' PUBLIC "',C),S&&"."!=S&&t.push('" "',S),t.push('">');else if(S&&"."!=S)t.push(' SYSTEM "',S,'">');else{var A=e.internalSubset;A&&t.push(" [",A,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case c:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function ne(e,t,n){var r;switch(t.nodeType){case o:(r=t.cloneNode(!1)).ownerDocument=e;case g:break;case a:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var i=t.firstChild;i;)r.appendChild(ne(e,i,n)),i=i.nextSibling;return r}function re(e,t,n){var r=new t.constructor;for(var i in t){var s=t[i];"object"!=typeof s&&s!=r[i]&&(r[i]=s)}switch(t.childNodes&&(r.childNodes=new C),r.ownerDocument=e,r.nodeType){case o:var u=t.attributes,l=r.attributes=new T,c=u.length;l._ownerElement=r;for(var h=0;h<c;h++)r.setAttributeNode(re(e,u.item(h),!0));break;case a:n=!0}if(n)for(var p=t.firstChild;p;)r.appendChild(re(e,p,n)),p=p.nextSibling;return r}function ie(e,t,n){e[t]=n}v.INVALID_STATE_ERR=(x[11]="Invalid state",11),v.SYNTAX_ERR=(x[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(x[13]="Invalid modification",13),v.NAMESPACE_ERR=(x[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(x[15]="Invalid access",15),E.prototype=Error.prototype,r(v,E),C.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)te(this[r],n,e,t);return n.join("")}},S.prototype.item=function(e){return A(this),this[e]},i(S,C),T.prototype={length:0,item:C.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new E(D);var n=this.getNamedItem(e.nodeName);return _(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new E(D);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return F(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return F(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},P.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new B;if(r.implementation=this,r.childNodes=new C,r.doctype=n,n&&r.appendChild(n),t){var i=r.createElementNS(e,t);r.appendChild(i)}return r},createDocumentType:function(e,t,n){var r=new Y;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},M.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return j(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return R(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return re(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(s,M),r(s,M.prototype),B.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==o&&(this.documentElement=e),j(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),R(this,e)},importNode:function(e,t){return ne(this,e,t)},getElementById:function(e){var t=null;return N(this.documentElement,(function(n){if(n.nodeType==o&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new C,(t.attributes=new T)._ownerElement=t,t},createDocumentFragment:function(){var e=new H;return e.ownerDocument=this,e.childNodes=new C,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new $;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new X;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new K;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new U;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new q;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new z,r=t.split(":"),i=n.attributes=new T;return n.childNodes=new C,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new U,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},i(B,M),z.prototype={nodeType:o,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,L(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new S(this,(function(t){var n=[];return N(t,(function(r){r===t||r.nodeType!=o||"*"!==e&&r.tagName!=e||n.push(r)})),n}))},getElementsByTagNameNS:function(e,t){return new S(this,(function(n){var r=[];return N(n,(function(i){i===n||i.nodeType!==o||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||r.push(i)})),r}))}},B.prototype.getElementsByTagName=z.prototype.getElementsByTagName,B.prototype.getElementsByTagNameNS=z.prototype.getElementsByTagNameNS,i(z,M),U.prototype.nodeType=a,i(U,M),V.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(x[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},i(V,M),G.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},i(G,V),$.prototype={nodeName:"#comment",nodeType:f},i($,V),X.prototype={nodeName:"#cdata-section",nodeType:l},i(X,V),Y.prototype.nodeType=m,i(Y,M),W.prototype.nodeType=y,i(W,M),J.prototype.nodeType=h,i(J,M),q.prototype.nodeType=c,i(q,M),H.prototype.nodeName="#document-fragment",H.prototype.nodeType=g,i(H,M),K.prototype.nodeType=p,i(K,M),Z.prototype.serializeToString=function(e,t,n){return Q.call(e,t,n)},M.prototype.toString=Q;try{if(Object.defineProperty){function se(e){switch(e.nodeType){case o:case g:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(se(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(S.prototype,"length",{get:function(){return A(this),this.$$length}}),Object.defineProperty(M.prototype,"textContent",{get:function(){return se(this)},set:function(e){switch(this.nodeType){case o:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ie=function(e,t,n){e["$$"+t]=n}}}catch(oe){}n.DOMImplementation=P,n.XMLSerializer=Z},{}],228:[function(e,t,n){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,i=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),s=new RegExp("^"+r.source+i.source+"*(?::"+r.source+i.source+"*)?$");function o(){}function a(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function u(e,t,n,r,i,s){for(var o,a=++t,u=0;;){var l=e.charAt(a);switch(l){case"=":if(1===u)o=e.slice(t,a),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(s.warning('attribute value must after "="'),o=e.slice(t,a)),t=a+1,!((a=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");c=e.slice(t,a).replace(/&#?\w+;/g,i),n.add(o,c,t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');c=e.slice(t,a).replace(/&#?\w+;/g,i),n.add(o,c,t),s.warning('attribute "'+o+'" missed start quot('+l+")!!"),t=a+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,a));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,a)),a;case">":switch(u){case 0:n.setTagName(e.slice(t,a));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(t,a)).slice(-1)&&(n.closed=!0,c=c.slice(0,-1));case 2:2===u&&(c=o),4==u?(s.warning('attribute "'+c+'" missed quot(")!!'),n.add(o,c.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===r[""]&&c.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),n.add(c,c,t));break;case 3:throw new Error("attribute value missed!!")}return a;case"":l=" ";default:if(l<=" ")switch(u){case 0:n.setTagName(e.slice(t,a)),u=6;break;case 1:o=e.slice(t,a),u=2;break;case 4:var c=e.slice(t,a).replace(/&#?\w+;/g,i);s.warning('attribute "'+c+'" missed quot(")!!'),n.add(o,c,t);case 5:u=6}else switch(u){case 2:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&o.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),n.add(o,o,t),t=a,u=1;break;case 5:s.warning('attribute space is required"'+o+'"!!');case 6:u=1,t=a;break;case 3:u=4,t=a;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}a++}}function l(e,t,n){for(var r=e.tagName,i=null,s=e.length;s--;){var o=e[s],a=o.qName,u=o.value;if((f=a.indexOf(":"))>0)var l=o.prefix=a.slice(0,f),c=a.slice(f+1),h="xmlns"===l&&c;else c=a,l=null,h="xmlns"===a&&"";o.localName=c,!1!==h&&(null==i&&(i={},p(n,n={})),n[h]=i[h]=u,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,u))}for(s=e.length;s--;)(l=(o=e[s]).prefix)&&("xml"===l&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(o.uri=n[l||""]));var f;(f=r.indexOf(":"))>0?(l=e.prefix=r.slice(0,f),c=e.localName=r.slice(f+1)):(l=null,c=e.localName=r);var d=e.uri=n[l||""];if(t.startElement(d,c,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=i,!0;if(t.endElement(d,c,r),i)for(l in i)t.endPrefixMapping(l)}function c(e,t,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var s=e.indexOf("</"+n+">",t),o=e.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(n)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,r),i.characters(o,0,o.length),s)}return t+1}function h(e,t,n,r){var i=r[n];return null==i&&((i=e.lastIndexOf("</"+n+">"))<t&&(i=e.lastIndexOf("</"+n)),r[n]=i),i<t}function p(e,t){for(var n in e)t[n]=e[n]}function f(e,t,n,r){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(i=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,i-t-4),i+3):(r.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,i-t-9),n.endCDATA(),i+3}var s=function(e,t){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);n=i.exec(e);)if(r.push(n),n[1])return r}(e,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var a=s[1][0],u=o>3&&/^public$/i.test(s[2][0])&&s[3][0],l=o>4&&s[4][0],c=s[o-1];return n.startDTD(a,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),c.index+c[0].length}return-1}function d(e,t,n){var r=e.indexOf("?>",t);if(r){var i=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function m(e){}function g(e,t){return e.__proto__=t,e}o.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),p(t,t={}),function(e,t,n,r,i){function s(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(i.error("entity not found:"+e),e)}function o(t){if(t>D){var n=e.substring(D,t).replace(/&#?\w+;/g,s);x&&p(D),r.characters(n,0,t-D),D=t}}function p(t,n){for(;t>=y&&(n=v.exec(e));)g=n.index,y=g+n[0].length,x.lineNumber++;x.columnNumber=t-g+1}for(var g=0,y=0,v=/.*(?:\r\n?|\n)|.*$/g,x=r.locator,b=[{currentNSMap:t}],w={},D=0;;){try{var E=e.indexOf("<",D);if(E<0){if(!e.substr(D).match(/^\s*$/)){var C=r.doc,S=C.createTextNode(e.substr(D));C.appendChild(S),r.currentElement=S}return}switch(E>D&&o(E),e.charAt(E+1)){case"/":var A=e.indexOf(">",E+3),T=e.substring(E+2,A),k=b.pop();A<0?(T=e.substring(E+2).replace(/[\s<].*/,""),i.error("end tag name: "+T+" is not complete:"+k.tagName),A=E+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),i.error("end tag name: "+T+" maybe not complete"),A=E+1+T.length);var _=k.localNSMap,F=k.tagName==T;if(F||k.tagName&&k.tagName.toLowerCase()==T.toLowerCase()){if(r.endElement(k.uri,k.localName,T),_)for(var P in _)r.endPrefixMapping(P);F||i.fatalError("end tag name: "+T+" is not match the current start tagName:"+k.tagName)}else b.push(k);A++;break;case"?":x&&p(E),A=d(e,E,r);break;case"!":x&&p(E),A=f(e,E,r,i);break;default:x&&p(E);var M=new m,I=b[b.length-1].currentNSMap,N=(A=u(e,E,M,I,s,i),M.length);if(!M.closed&&h(e,A,M.tagName,w)&&(M.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),x&&N){for(var B=a(x,{}),O=0;O<N;O++){var L=M[O];p(L.offset),L.locator=a(x,{})}r.locator=B,l(M,r,I)&&b.push(M),r.locator=x}else l(M,r,I)&&b.push(M);"http://www.w3.org/1999/xhtml"!==M.uri||M.closed?A++:A=c(e,A,M.tagName,s,r)}}catch(e){i.error("element parse error: "+e),A=-1}A>D?D=A:o(Math.max(E,D)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},m.prototype={setTagName:function(e){if(!s.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!s.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},g({},g.prototype)instanceof g||(g=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),n.XMLReader=o},{}],229:[function(e,t,n){t.exports={name:"@jscad/web",version:"1.10.0",description:"Web UI for OpenJsCAD",repository:"https://github.com/jscad/OpenJSCAD.org",scripts:{"build-web":"browserify src/ui/index.js -o dist/index.js -t [babelify browserify minifyify]","build-min":"browserify src/ui/min.js -o dist/min.js -t [babelify browserify minifyify]","build-opt":"browserify src/ui/opt.js -o dist/opt.js -t [babelify browserify minifyify]","build-umd":"browserify --standalone openjscad src/ui/umd.js -o dist/openjscad.umd.js -t [babelify browserify minifyify]","build-all":"npm run build-web && npm run build-min && npm run build-opt && npm run build-umd","start-dev":"budo src/ui/index.js:dist/index.js --port=8080 --live -- -b -t babelify",preversion:"npm test",version:"npm run build-all && git add -A ",postversion:"git push origin master && git push origin master --tags","release-patch":"git checkout master && git pull origin master && npm version patch","release-minor":"git checkout master && git pull origin master && npm version minor","release-major":"git checkout master && git pull origin master && npm version major",postinstall:"node postInstall.js && node -e \"console.log('\\u001b[35m\\u001b[1mLove OpenJSCAD? You can now donate to our open collective:\\u001b[22m\\u001b[39m\\n > \\u001b[34mhttps://opencollective.com/openjscad/donate\\u001b[0m')\""},contributors:[{name:"Rene K. Mueller",url:"http://renekmueller.com"},{name:"z3dev",url:"http://www.z3d.jp"},{name:"Mark 'kaosat-dev' Moissette",url:"http://kaosat.net"}],license:"MIT",main:"dist/openjscad.umd.js",module:"dist/openjscad.umd.js",dependencies:{"@jscad/core":"^0.4.0","@jscad/csg":"0.7.0","@jscad/examples":"^1.7.2","@jscad/io":"0.4.7","@jscad/openscad-openjscad-translator":"0.0.11",astring:"^1.3.1",brace:"0.10.0",esprima:"^3.1.3",estraverse:"^4.2.0","most-gestures":"^0.3.0",webworkify:"^1.4.0"},devDependencies:{ava:"^0.23.0","babel-cli":"^6.6.5","babel-core":"^6.2.1","babel-preset-es2015":"^6.1.18",babelify:"^7.2.0",browserify:"14.3.0","browserify-shim":"^3.8.12",budo:"10.0.3","copy-dir":"^0.3.0",minifyify:"^7.3.3"},browserify:{transform:["browserify-shim"]},"browserify-shim":{},collective:{type:"opencollective",url:"https://opencollective.com/openjscad",logo:"https://opencollective.com/openjscad/logo.txt"}}},{}],230:[function(e,t,n){"use strict";var r=e("../io/generateOutputFileBlobUrl"),i=e("../io/generateOutputFileFileSystem");t.exports={generateOutputFile:function(e,t,n,s){try{i(e,t,n.bind(s))}catch(i){r(e,t,n.bind(s))}}}},{"../io/generateOutputFileBlobUrl":231,"../io/generateOutputFileFileSystem":232}],231:[function(e,t,n){"use strict";var r=e("./utils"),i=r.isSafari,s=r.getWindowURL;t.exports=function(e,t,n){if(i()){var r=new FileReader;r.onloadend=function(){r.result&&n(r.result,"openjscad."+e,!0,!0)},r.readAsDataURL(t)}else{var o=s().createObjectURL(t);if(!o)throw new Error("createObjectURL() failed");n(o,"openjscad."+e,!0,!1)}}},{"./utils":233}],232:[function(e,t,n){"use strict";var r=e("./utils");t.exports=function(e,t,n){var i=window.requestFileSystem||window.webkitRequestFileSystem;if(!i)throw new Error("Your browser does not support the HTML5 FileSystem API. Please try the Chrome browser instead.");var s="OpenJsCadOutput1_"+parseInt(1e9*Math.random(),10)+"_"+e,o="output."+e;i(TEMPORARY,20971520,(function(e){e.root.getDirectory(s,{create:!0,exclusive:!0},(function(e){e.getFile(o,{create:!0,exclusive:!0},(function(e){e.createWriter((function(r){r.onwriteend=function(t){n(e.toURL(),e.name)},r.onerror=function(e){throw new Error("Write failed: "+e.toString())},r.write(t)}),(function(e){r(e,"createWriter")}))}),(function(e){r(e,"getFile('"+o+"')")}))}),(function(e){r(e,"getDirectory('"+s+"')")}))}),(function(e){r(e,"requestFileSystem")}))}},{"./utils":233}],233:[function(e,t,n){"use strict";t.exports={isSafari:function(){return/Version\/[\d\.]+.*Safari/.test(window.navigator.userAgent)},getWindowURL:function(){if(window.URL)return window.URL;if(window.webkitURL)return window.webkitURL;throw new Error("Your browser doesn't support window.URL")},revokeBlobUrl:function(e){if(window.URL)window.URL.revokeObjectURL(e);else{if(!window.webkitURL)throw new Error("Your browser doesn't support window.URL");window.webkitURL.revokeObjectURL(e)}},FileSystemApiErrorHandler:function(e,t){var n,r={1:"NOT_FOUND_ERR",2:"SECURITY_ERR",3:"ABORT_ERR",4:"NOT_READABLE_ERR",5:"ENCODING_ERR",6:"NO_MODIFICATION_ALLOWED_ERR",7:"INVALID_STATE_ERR",8:"SYNTAX_ERR",9:"INVALID_MODIFICATION_ERR",10:"QUOTA_EXCEEDED_ERR",11:"TYPE_MISMATCH_ERR",12:"PATH_EXISTS_ERR"};throw n=e.code in r?r[e.code]:"Error #"+e.code,new Error("FileSystem API error: "+t+" returned error "+n)}}},{}],234:[function(e,t,n){"use strict";var r=e("@jscad/core/parameters/getParameterDefinitions"),i=e("@jscad/core/parameters/getParameterValuesFromUIControls"),s=e("@jscad/core/code-evaluation/rebuildSolids"),o=s.rebuildSolids,a=s.rebuildSolidsInWorker,u=e("@jscad/core/utils/mergeSolids").mergeSolids,l=e("../io/generateOutputFile").generateOutputFile,c=e("@jscad/core/io/prepareOutput").prepareOutput,h=e("@jscad/core/io/convertToBlob").convertToBlob,p=e("@jscad/core/io/formats"),f=p.formats,d=p.supportedFormatsForObjects,m=e("../io/utils").revokeBlobUrl,g=e("../ui/viewer/jscad-viewer");function y(e,t){for(var n in void 0===t&&(t={}),this.opts={debug:!1,libraries:[],openJsCadPath:"",useAsync:!0,useSync:!0,viewer:{}},this.opts)n in t&&(this.opts[n]=t[n]);this.containerdiv=e,this.viewer=null,this.builder=null,this.zoomControl=null,this.onchange=null,this.ondownload=null,this.currentObjects=[],this.viewedObject=null,this.hasOutputFile=!1,this.hasError=!1,this.paramDefinitions=[],this.paramControls=[],this.script=null,this.formats=f,this.baseurl=document.location.href,this.baseurl=this.baseurl.replace(/#.*$/,""),this.baseurl=this.baseurl.replace(/\?.*$/,""),this.baseurl.lastIndexOf("/")!==this.baseurl.length-1&&(this.baseurl=this.baseurl.substring(0,this.baseurl.lastIndexOf("/")+1)),this.state=0;try{for(var r in t.processor)this[r]||(this[r]=t.processor[r]);this.viewer=new g(t.processor.viewerdiv,this.opts.viewer)}catch(r){if(console.error("viewer error",r),!t.init.onUpdate)throw r;t.init.onUpdate("error",r)}}y.mergeSolids=u,y.prototype={setCurrentObjects:function(e){this.currentObjects=e,this.updateView(),this.onchange&&this.onchange(this)},updateView:function(){var e=this.currentObjects.slice();this.viewedObject=u(e),this.viewer&&this.viewer.setCsg(this.viewedObject)},clearViewer:function(){this.clearOutputFile(),this.viewedObject&&(this.viewer.clear(),this.viewedObject=null,this.onchange&&this.onchange(this)),this.enableItems()},abort:function(){1===this.state&&(this.setStatus("aborted"),this.builder.cancel(),this.state=3,this.enableItems(),this.onchange&&this.onchange(this))},enableItems:function(){var e=this;this.onUpdate({formats:d(this.currentObjects.slice()).filter((function(e){return"stl"!==e})).reduce((function(t,n){return t[n]=e.formatInfo(n),t}),{}),outputFile:this.outputFile})},setJsCad:function(e,t,n){t||(t="openjscad.jscad");var s={};try{s=i(this.paramControls,!0)}catch(e){}this.abort(),this.paramDefinitions=[],this.script=null;var o=!1;try{this.paramDefinitions=r(e),this.paramControls=[],this.createParamControls(s)}catch(e){this.setStatus("error",e),o=!0}o?this.enableItems():(this.script=e,this.filename=t,this.includePathBaseUrl=n,this.rebuildSolids())},rebuildSolids:function(){var e=this;this.abort(),this.clearOutputFile(),this.setStatus("rendering");var t=i(this.paramControls),n=this.script,r=this.includePathBaseUrl?this.includePathBaseUrl+this.filename:this.filename,s={memFs:this.memFs};this.state=1;var u=this;function l(e,t){e?(u.clearViewer(),e.stack&&e.stack,u.setStatus("error",e),u.state=3):(u.setCurrentObjects(t),u.setStatus("ready"),u.state=2),u.enableItems()}this.opts.useAsync?this.builder=a(n,r,t,(function(i,a){i&&u.opts.useSync?e.builder=o(n,r,t,l,s):l(void 0,a)}),s):this.opts.useSync&&(this.builder=o(n,r,t,l,s))},getState:function(){return this.state},clearOutputFile:function(){this.hasOutputFile&&(this.hasOutputFile=!1,this.outputFile=void 0,this.outputFileDirEntry&&(this.outputFileDirEntry.removeRecursively((function(){})),this.outputFileDirEntry=null),this.outputFileBlobUrl&&(m(this.outputFileBlobUrl),this.outputFileBlobUrl=null),this.enableItems())},generateOutputFile:function(e){this.clearOutputFile();var t=this.currentObjectsToBlob(e);this.viewedObject&&(l(e.extension,t,(function(e,t,n,r){this.hasOutputFile=!0,this.outputFile={data:e,downloadAttribute:t,blobMode:n,noData:r},this.enableItems()}),this),this.ondownload&&this.ondownload(this))},currentObjectsToBlob:function(e){var t="application/javascript"===e.mimetype?this.script:this.currentObjects.slice();return h(c(t,{format:e.name}))},formatInfo:function(e){return this.formats[e]},createGroupControl:function(e){var t=document.createElement("title");return t.paramName=e.name,t.paramType=e.type,"caption"in e?(t.text=e.caption,t.className="caption"):t.text=e.name,t},createChoiceControl:function(e,t){if(!("values"in e))throw new Error("Definition of choice parameter ("+e.name+") should include a 'values' parameter");var n=document.createElement("select");n.paramName=e.name,n.paramType=e.type;var r,i=e.values;if("captions"in e){if((r=e.captions).length!=i.length)throw new Error("Definition of choice parameter ("+e.name+") should have the same number of items for 'captions' and 'values'")}else r=i;for(var s=0,o=0;o<i.length;o++){var a=document.createElement("option");a.value=i[o],a.text=r[o],n.add(a),void 0!==t?t===i[o]&&(s=o):"default"in e?e.default===i[o]&&(s=o):"initial"in e&&e.initial===i[o]&&(s=o)}return i.length>0&&(n.selectedIndex=s),n},createControl:function(e,t){var n=[{type:"text",control:"text",required:["index","type","name"],initial:""},{type:"int",control:"number",required:["index","type","name"],initial:0},{type:"float",control:"number",required:["index","type","name"],initial:0},{type:"number",control:"number",required:["index","type","name"],initial:0},{type:"checkbox",control:"checkbox",required:["index","type","name","checked"],initial:""},{type:"radio",control:"radio",required:["index","type","name","checked"],initial:""},{type:"color",control:"color",required:["index","type","name"],initial:"#000000"},{type:"date",control:"date",required:["index","type","name"],initial:""},{type:"email",control:"email",required:["index","type","name"],initial:""},{type:"password",control:"password",required:["index","type","name"],initial:""},{type:"url",control:"url",required:["index","type","name"],initial:""},{type:"slider",control:"range",required:["index","type","name","min","max"],initial:0,label:!0}];if(!("type"in e))throw new Error("Parameter definition ("+e.index+") must include a 'type' parameter");var r,i,s,o,a=document.createElement("input");for(r=0;r<n.length;r++)if((s=n[r]).type===e.type){for(i=0;i<s.required.length;i++){if(!((o=s.required[i])in e))throw new Error("Parameter definition ("+e.index+") must include a '"+o+"' parameter");"index"!==o&&"type"!==o&&("checked"===o?a.checked=e.checked:a.setAttribute(o,e[o]))}break}if(r===n.length)throw new Error("Parameter definition ("+e.index+") is not a valid 'type'");for(var u in a.setAttribute("type",s.control),a.paramName=e.name,a.paramType=e.type,a.value=void 0!==t?t:"initial"in e?e.initial:"default"in e?e.default:s.initial,e)e.hasOwnProperty(u)&&s.required.indexOf(u)<0&&a.setAttribute(u,e[u]);return"label"in s&&(a.label=document.createElement("label"),a.label.innerHTML=a.value),a},createParamControls:function(e){this.parameterstable.innerHTML="",this.paramControls=[];for(var t=0;t<this.paramDefinitions.length;t++){var n=this.paramDefinitions[t];n.index=t+1;var r=null,i=n.type.toLowerCase();switch(i){case"choice":r=this.createChoiceControl(n,e[n.name]);break;case"group":r=this.createGroupControl(n);break;default:r=this.createControl(n,e[n.name])}var s=document.createElement("tr");if("group"===i){var o=document.createElement("th");"className"in r&&(o.className=r.className),o.innerHTML=r.text,s.appendChild(o)}else{var a=this;r.onchange=function(e){var t=e.currentTarget.nextElementSibling;null!==t&&"LABEL"===t.nodeName&&(t.innerHTML=e.currentTarget.value),a.instantUpdate&&a.rebuildSolids()},this.paramControls.push(r);var u=document.createElement("td"),l=n.name+":";"caption"in n&&(l=n.caption,u.className="caption"),u.innerHTML=l,s.appendChild(u),(u=document.createElement("td")).appendChild(r),"label"in r&&u.appendChild(r.label),s.appendChild(u)}this.parameterstable.appendChild(s)}}},t.exports=y},{"../io/generateOutputFile":230,"../io/utils":233,"../ui/viewer/jscad-viewer":239,"@jscad/core/code-evaluation/rebuildSolids":9,"@jscad/core/io/convertToBlob":14,"@jscad/core/io/formats":15,"@jscad/core/io/prepareOutput":16,"@jscad/core/parameters/getParameterDefinitions":17,"@jscad/core/parameters/getParameterValuesFromUIControls":18,"@jscad/core/utils/mergeSolids":20}],235:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(){window.onerror=function(e,t,n){var i="uncaught exception";switch(arguments.length){case 1:i=arguments[0];break;case 2:i=arguments[0]+"\n("+arguments[1]+")";break;case 3:i=arguments[0]+"\nLine: "+arguments[2]+"\n("+arguments[1]+")";break;case 4:case 5:i=arguments[0]+"\nLine: "+arguments[2]+",col: "+arguments[3]+"\n("+arguments[1]+")"}if("object"==("undefined"==typeof document?"undefined":r(document))){var s=document.getElementById("errordiv");null!==s&&(s.firstChild.textContent=i,s.style.display="block")}else console.log(i);return!1}}},{}],236:[function(e,t,n){"use strict";var r=e("./errorDispatcher"),i=e("../../package.json").version,s=e("../jscad/processor-bare");t.exports=function(e,t){var n=null,o="UMD OpenJSCAD.org Version "+i+" with Reentrancy Fixes";console.log(o),r();var a=e.getAttribute("design-url");if(n=new s(e,t),a){var u=new XMLHttpRequest;u.open("GET",a,!0),n.setStatus("Loading "+a),u.onload=function(){var e=this.responseText;(a.match(/\.jscad$/i)||a.match(/\.js$/i))&&(n.setStatus("Processing "+a),n.setJsCad(e,a))},u.send()}return{generateOutputFile:function(e){return n.generateOutputFile(e)},clearOutputFile:function(){return n.clearOutputFile()},resetCamera:function(){return n.viewer.resetCamera()},abort:function(){return n.abort()},setJsCad:function(e,t){n.setJsCad(e,t)},rebuildSolids:function(){n.rebuildSolids()}}}},{"../../package.json":229,"../jscad/processor-bare":234,"./errorDispatcher":235}],237:[function(e,t,n){"use strict";function r(e){return"%"===e[e.length-1]?parseInt(e,10)/100:parseInt(e,10)/255}t.exports={colorBytes:function(e){var t=[e.r,e.g,e.b];return void 0!==e.a&&t.push(e.a),t},colorRGBA:function(e){var t={r:e[0],g:e[1],b:e[2]};return void 0!==e[3]&&(t.a=e[3]),t},cssFnSingleColor:r,parseColor:function(e){var t,n;if(n=e.match(/^#([a-f0-9]{6})$/i))t=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1];else if(n=e.match(/^#([a-f0-9]{3})$/i))t=[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16),1];else if((n=e.match(/^(rgb|hsl|hsv)a?\s*\(([^\)]+)\)$/i))&&("rgb"===n[1]||"rgba"===n[1])){var i=n[2].split(/\s*,\s*/);t=[r(i[0]),r(i[1]),r(i[2]),parseFloat(i[3])]}return t}}},{}],238:[function(e,t,n){"use strict";var r=e("most-gestures"),i=r.baseInteractionsFromEvents,s=r.pointerGestures,o=e("./lightgl"),a=e("./jscad-viewer-helpers").colorBytes;function u(e,t){this.options=t,this.containerEl=e,this.createRenderer(),window.addEventListener("resize",this.handleResize.bind(this))}u.prototype={init:function(){this.gl.makeCurrent(),this.gl.canvas.width=this.containerEl.width,this.gl.canvas.height=this.containerEl.height,this.handleResize()},handleResize:function(){var e=this.canvas;this.resizeCanvas(),this.gl.makeCurrent(),this.gl.viewport(0,0,e.width,e.height),this.gl.matrixMode(this.gl.PROJECTION),this.gl.loadIdentity(),this.gl.perspective(this.options.camera.fov,e.width/e.height,this.options.camera.clip.min,this.options.camera.clip.max),this.gl.matrixMode(this.gl.MODELVIEW),this.onDraw()},createRenderer:function(){var e=o.create(this.options.glOptions);this.gl=e,this.gl.lineWidth(1),this.canvas=this.gl.canvas,this.meshes=[],this.containerEl.appendChild(this.gl.canvas),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.clearColor.apply(this.gl,a(this.options.background.color)),this.gl.enable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.CULL_FACE);var t=this.options.solid.outlineColor;this.blackShader=new o.Shader("      void main() {        gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;      }","      void main() {        gl_FragColor = vec4("+a(t).join(", ")+");      }"),this.lightingShader=new o.Shader("      varying vec3 color;      varying float alpha;      varying vec3 normal;      varying vec3 light;      void main() {        const vec3 lightDir = vec3(1.0, 2.0, 3.0) / 3.741657386773941;        light = lightDir;        color = gl_Color.rgb;        alpha = gl_Color.a;        normal = gl_NormalMatrix * gl_Normal;        gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;      }","      varying vec3 color;      varying float alpha;      varying vec3 normal;      varying vec3 light;      void main() {        vec3 n = normalize(normal);        float diffuse = max(0.0, dot(light, n));        float specular = pow(max(0.0, -reflect(light, n).z), 10.0) * sqrt(diffuse);        gl_FragColor = vec4(mix(color * (0.3 + 0.7 * diffuse), vec3(1.0), specular), alpha);      }");var n=this;this.createControls(),this.resetCamera(),this.gl.ondraw=function(){n.onDraw()},this.state=0,this.meshes=[],this.clear()},createControls:function(){var e=this,t=document.createElement("div");t.className="shift-scene";var n=document.createElement("div");n.classList.add("arrow"),n.classList.add("arrow-left");var r=document.createElement("div");r.classList.add("arrow"),r.classList.add("arrow-right");var o=document.createElement("div");o.classList.add("arrow"),o.classList.add("arrow-top");var a=document.createElement("div");a.classList.add("arrow"),a.classList.add("arrow-bottom"),t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a),this.containerEl.appendChild(t),window.orientation;var u=this.containerEl,l=i(u),c=s(l),h=.4;c.drags.throttle(20).forEach((function(t){var n=t.delta,r=t.originalEvents,i=r[0],s=i.altKey,o=i.shiftKey,a=i.ctrlKey,u=i.metaKey,l=r[0].which;if(s||3===l)e.angleY+=n.x*h,e.angleX+=n.y*h;else if(o||2===l)e.viewpointX-=.005*n.x*e.viewpointZ,e.viewpointY-=.005*n.y*e.viewpointZ;else if(a||u){var c=10*(-n.x+n.y)*1.085;c*=(e.viewpointZ-e.options.camera.clip.min)/(e.options.camera.clip.max-e.options.camera.clip.min),e.viewpointZ+=c,e.viewpointZ=Math.min(Math.max(e.viewpointZ,e.options.camera.clip.min),e.options.camera.clip.max)}else e.angleZ-=n.x*h,e.angleX+=n.y*h;e.onDraw()})),c.zooms.throttle(20).forEach((function(t){t*=(e.viewpointZ-e.options.camera.clip.min)/(e.options.camera.clip.max-e.options.camera.clip.min)*1.085,e.viewpointZ-=t,e.viewpointZ=Math.min(Math.max(e.viewpointZ,e.options.camera.clip.min),e.options.camera.clip.max),e.onDraw()})),this.gl.ondraw=function(){e.onDraw()}},clearShift:function(){return this.touch.shiftTimer&&(clearTimeout(this.touch.shiftTimer),this.touch.shiftTimer=null),this},onPanTilt:function(e){this.touch.cur="dragging";var t=0,n=0;void 0!==this.touch.lastY&&(t=e.deltaY-this.touch.lastY,this.angleX+=.3*t,this.touch.lastY=e.deltaY),void 0!==this.touch.lastX&&(n=e.deltaX-this.touch.lastX,this.angleZ+=.3*n,this.touch.lastX=e.deltaX),(t||n)&&this.onDraw()},onShift:function(e){console.log("onShift"),this.touch.cur="shifting";var t=0;!this.touch.lastY||"up"!=e.direction&&"down"!=e.direction||(this.touch.shiftControl.removeClass("shift-horizontal").addClass("shift-vertical").css("top",e.center.pageY+"px"),t=e.deltaY-this.touch.lastY,this.viewpointY-=.005*t*this.viewpointZ,this.angleX+=t),!this.touch.lastX||"left"!=e.direction&&"right"!=e.direction||(this.touch.shiftControl.removeClass("shift-vertical").addClass("shift-horizontal").css("left",e.center.pageX+"px"),t=e.deltaX-this.touch.lastX,this.viewpointX+=.005*t*this.viewpointZ,this.angleZ+=t),t&&this.onDraw(),this.touch.lastX=e.deltaX,this.touch.lastY=e.deltaY},onDraw:function(e){var t=this.gl;if(t.makeCurrent(),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.loadIdentity(),t.translate(this.viewpointX,this.viewpointY,-this.viewpointZ),t.rotate(this.angleX,1,0,0),t.rotate(this.angleY,0,1,0),t.rotate(this.angleZ,0,0,1),this.options.solid.draw){t.enable(t.BLEND),this.options.solid.overlay||t.enable(t.POLYGON_OFFSET_FILL);for(var n=0;n<this.meshes.length;n++){var r=this.meshes[n];this.lightingShader.draw(r,t.TRIANGLES)}if(this.options.solid.overlay||t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.BLEND),this.options.solid.lines){for(this.options.solid.overlay&&t.disable(t.DEPTH_TEST),t.enable(t.BLEND),n=0;n<this.meshes.length;n++)r=this.meshes[n],this.blackShader.draw(r,t.LINES);t.disable(t.BLEND),this.options.solid.overlay&&t.enable(t.DEPTH_TEST)}}if(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.begin(t.LINES),this.options.plate.draw){var i=this.options.plate.m,s=this.options.plate.M,o=this.options.plate.size/2;t.color.apply(t,a(i.color));for(var u=i.i,l=s.i,c=-o;c<=o;c+=u)c%l&&(t.vertex(-o,c,0),t.vertex(o,c,0),t.vertex(c,-o,0),t.vertex(c,o,0));for(t.color.apply(t,a(s.color)),c=-o;c<=o;c+=l)t.vertex(-o,c,0),t.vertex(o,c,0),t.vertex(c,-o,0),t.vertex(c,o,0)}if(this.options.axis.draw){o=this.options.plate.size/2;var h=this.options.axis.x.neg;t.color(h.r,h.g,h.b,h.a),t.vertex(-o,0,0),t.vertex(0,0,0),h=this.options.axis.x.pos,t.color(h.r,h.g,h.b,h.a),t.vertex(0,0,0),t.vertex(o,0,0),h=this.options.axis.y.neg,t.color(h.r,h.g,h.b,h.a),t.vertex(0,-o,0),t.vertex(0,0,0),h=this.options.axis.y.pos,t.color(h.r,h.g,h.b,h.a),t.vertex(0,0,0),t.vertex(0,o,0),h=this.options.axis.z.neg,t.color(h.r,h.g,h.b,h.a),t.vertex(0,0,-o),t.vertex(0,0,0),h=this.options.axis.z.pos,t.color(h.r,h.g,h.b,h.a),t.vertex(0,0,0),t.vertex(0,0,o)}t.end(),t.disable(t.BLEND)},csgToMeshes:function(e){this.gl.makeCurrent();for(var t=e.canonicalized(),n=new o.Mesh({normals:!0,colors:!0}),r=[n],i={},s=[],u=[],l=[],c=this.options.solid.smooth,h=t.toPolygons(),p=h.length,f=0;f<p;f++){var d=h[f],m=a(this.options.solid.faceColor);d.shared&&d.shared.color?m=d.shared.color:d.color&&(m=d.color),m.length<4&&m.push(1);for(var g=d.vertices.map((function(e){var t=e.getTag(),n=i[t],r=u[n];return c&&t in i&&r[0]===m[0]&&r[1]===m[1]&&r[2]===m[2]?n=i[t]:(n=s.length,i[t]=n,s.push([e.pos.x,e.pos.y,e.pos.z]),u.push(m)),n})),y=2;y<g.length;y++)l.push([g[0],g[y-1],g[y]]);s.length>65e3&&(n.triangles=l,n.vertices=s,n.colors=u,n.computeWireframe(),n.computeNormals(),n.vertices.length&&r.push(n),n=new o.Mesh({normals:!0,colors:!0}),l=[],u=[],s=[])}return n.triangles=l,n.vertices=s,n.colors=u,n.computeWireframe(),n.computeNormals(),n.vertices.length&&r.push(n),r}},t.exports=u},{"./jscad-viewer-helpers":237,"./lightgl":240,"most-gestures":129}],239:[function(e,t,n){"use strict";var r=e("./jscad-viewer-lightgl"),i=e("./jscad-viewer-helpers");function s(e,t){var n;if(this.options=s.defaults(),"camera"in t&&this.setCameraOptions(t.camera),"plate"in t&&this.setPlateOptions(t.plate),"axis"in t&&this.setAxisOptions(t.axis),"solid"in t&&this.setSolidOptions(t.solid),"glOptions"in t&&(this.options.glOptions=t.glOptions),this.options.engine&&s[this.options.engine]&&(n=s[this.options.engine]),n||(n=r),!n)throw new Error('Cannot find drawing engine, please define one via "engine" option');for(var i in s.prototype)i in n.prototype||(n.prototype[i]=s.prototype[i]);var o=new n(e,this.options);return o.init(),o}i.colorRGBA,i.parseColor,s.defaults=function(){return{camera:{fov:45,angle:{x:-60,y:0,z:-45},position:{x:0,y:0,z:100},clip:{min:.5,max:1e3}},plate:{draw:!0,size:200,m:{i:1,color:{r:.8,g:.8,b:.8,a:.5}},M:{i:10,color:{r:.5,g:.5,b:.5,a:.5}}},axis:{draw:!1,x:{neg:{r:1,g:.5,b:.5,a:.5},pos:{r:1,g:0,b:0,a:.8}},y:{neg:{r:.5,g:1,b:.5,a:.5},pos:{r:0,g:1,b:0,a:.8}},z:{neg:{r:.5,g:.5,b:1,a:.5},pos:{r:0,g:0,b:1,a:.8}}},solid:{draw:!0,lines:!1,faces:!0,overlay:!1,smooth:!1,faceColor:{r:1,g:.4,b:1,a:1},outlineColor:{r:0,g:0,b:0,a:.1}},background:{color:{r:.93,g:.93,b:.93,a:1}}}},s.prototype={parseSizeParams:function(){var e=["%","vh","vw","vmax","vmin"],t=this.containerEl.style,n=t.width.match(/^(\d+(?:\.\d+)?)(.*)$/)[2],r="string"==typeof t.height?t.height.match(/^(\d+(?:\.\d+)?)(.*)$/)[2]:"";(t.width.match(/^calc\(/)||t.height.match(/^calc\(/)||-1!=e.indexOf(n)||-1!=e.indexOf(r))&&window.addEventListener("resize",this.handleResize.bind(this))},resizeCanvas:function(){var e=this.canvas,t=window.devicePixelRatio||1;e.width=this.containerEl.clientWidth*t,e.height=this.containerEl.clientHeight*t},setCsg:function(e){this.meshes=this.csgToMeshes(e),this.state=2,this.onDraw()},clear:function(){this.meshes=[],this.state=1,this.onDraw()},resetCamera:function(){this.angleX=this.options.camera.angle.x,this.angleY=this.options.camera.angle.y,this.angleZ=this.options.camera.angle.z,this.viewpointX=this.options.camera.position.x,this.viewpointY=this.options.camera.position.y,this.viewpointZ=this.options.camera.position.z,this.onDraw()},supported:function(){return!!this.gl},setCameraOptions:function(e){for(var t in e=e||{},this.options.camera)t in e&&(this.options.camera[t]=e[t])},setPlateOptions:function(e){for(var t in e=e||{},this.options.plate)t in e&&(this.options.plate[t]=e[t])},setAxisOptions:function(e){for(var t in e=e||{},this.options.axis)t in e&&(this.options.axis[t]=e[t])},setSolidOptions:function(e){for(var t in e=e||{},this.options.solid)t in e&&(this.options.solid[t]=e[t])}},t.exports=s},{"./jscad-viewer-helpers":237,"./jscad-viewer-lightgl":238}],240:[function(e,t,n){"use strict";var r=function(){function e(e,t,n){n=n||{},this.id=h.createTexture(),this.width=e,this.height=t,this.format=n.format||h.RGBA,this.type=n.type||h.UNSIGNED_BYTE,h.bindTexture(h.TEXTURE_2D,this.id),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!0),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n.filter||n.magFilter||h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,n.filter||n.minFilter||h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,n.wrap||n.wrapS||h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,n.wrap||n.wrapT||h.CLAMP_TO_EDGE),h.texImage2D(h.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}var t,n,r;function i(){this.unique=[],this.indices=[],this.map={}}function s(e,t){this.buffer=null,this.target=e,this.type=t,this.data=[]}function o(e){e=e||{},this.vertexBuffers={},this.indexBuffers={},this.addVertexBuffer("vertices","gl_Vertex"),e.coords&&this.addVertexBuffer("coords","gl_TexCoord"),e.normals&&this.addVertexBuffer("normals","gl_Normal"),e.colors&&this.addVertexBuffer("colors","gl_Color"),"triangles"in e&&!e.triangles||this.addIndexBuffer("triangles"),e.lines&&this.addIndexBuffer("lines")}e.prototype={bind:function(e){h.activeTexture(h.TEXTURE0+(e||0)),h.bindTexture(h.TEXTURE_2D,this.id)},unbind:function(e){h.activeTexture(h.TEXTURE0+(e||0)),h.bindTexture(h.TEXTURE_2D,null)},drawTo:function(e,r){r=r||{};var i=h.getParameter(h.VIEWPORT);h.viewport(0,0,this.width,this.height),t=t||h.createFramebuffer(),h.bindFramebuffer(h.FRAMEBUFFER,t),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this.id,0),!1!==r.depth&&(n=n||h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,n),this.width==n.width&&this.height==n.height||(n.width=this.width,n.height=this.height,h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,this.width,this.height)),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,n)),e(),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindRenderbuffer(h.RENDERBUFFER,null),h.viewport(i[0],i[1],i[2],i[3])},swapWith:function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t}},e.fromImage=function(t,n){n=n||{};var r=new e(t.width,t.height,n);try{h.texImage2D(h.TEXTURE_2D,0,r.format,r.format,r.type,t)}catch(e){throw"file:"==window.location.protocol?'image not loaded for security reasons (serve this page over "http://" instead)':"image not loaded for security reasons (image must originate from the same domain as this page or use Cross-Origin Resource Sharing)"}return n.minFilter&&n.minFilter!=h.NEAREST&&n.minFilter!=h.LINEAR&&h.generateMipmap(h.TEXTURE_2D),r},e.fromURL=function(t,n){r=r||function(){var e=document.createElement("canvas").getContext("2d");e.canvas.width=e.canvas.height=128;for(var t=0;t<e.canvas.height;t+=16)for(var n=0;n<e.canvas.width;n+=16)e.fillStyle=16&(n^t)?"#FFF":"#DDD",e.fillRect(n,t,16,16);return e.canvas}();var i=e.fromImage(r,n),s=new Image,o=h;return s.onload=function(){o.makeCurrent(),e.fromImage(s,n).swapWith(i)},s.src=t,i},i.prototype={add:function(e){var t=JSON.stringify(e);return t in this.map||(this.map[t]=this.unique.length,this.unique.push(e)),this.map[t]}},s.prototype={compile:function(e){for(var t=[],n=0;n<this.data.length;n+=1e4)t=Array.prototype.concat.apply(t,this.data.slice(n,n+1e4));var r=this.data.length?t.length/this.data.length:0;if(r!=Math.round(r))throw"buffer elements not of consistent size, average size is "+r;this.buffer=this.buffer||h.createBuffer(),this.buffer.length=t.length,this.buffer.spacing=r,h.bindBuffer(this.target,this.buffer),h.bufferData(this.target,new this.type(t),e||h.STATIC_DRAW)}},o.prototype={addVertexBuffer:function(e,t){(this.vertexBuffers[t]=new s(h.ARRAY_BUFFER,Float32Array)).name=e,this[e]=[]},addIndexBuffer:function(e){this.indexBuffers[e]=new s(h.ELEMENT_ARRAY_BUFFER,Uint16Array),this[e]=[]},compile:function(){for(var e in this.vertexBuffers)(n=this.vertexBuffers[e]).data=this[n.name],n.compile();for(var t in this.indexBuffers){var n;(n=this.indexBuffers[t]).data=this[t],n.compile()}},transform:function(e){if(this.vertices=this.vertices.map((function(t){return e.transformPoint(l.fromArray(t)).toArray()})),this.normals){var t=e.inverse().transpose();this.normals=this.normals.map((function(e){return t.transformVector(l.fromArray(e)).unit().toArray()}))}return this.compile(),this},computeNormals:function(){this.normals||this.addVertexBuffer("normals","gl_Normal");for(var e=0;e<this.vertices.length;e++)this.normals[e]=new l;for(e=0;e<this.triangles.length;e++){var t=this.triangles[e],n=l.fromArray(this.vertices[t[0]]),r=l.fromArray(this.vertices[t[1]]),i=l.fromArray(this.vertices[t[2]]),s=r.subtract(n).cross(i.subtract(n)).unit();this.normals[t[0]]=this.normals[t[0]].add(s),this.normals[t[1]]=this.normals[t[1]].add(s),this.normals[t[2]]=this.normals[t[2]].add(s)}for(e=0;e<this.vertices.length;e++)this.normals[e]=this.normals[e].unit().toArray();return this.compile(),this},computeWireframe:function(){for(var e=new i,t=0;t<this.triangles.length;t++)for(var n=this.triangles[t],r=0;r<n.length;r++){var s=n[r],o=n[(r+1)%n.length];e.add([Math.min(s,o),Math.max(s,o)])}return this.lines||this.addIndexBuffer("lines"),this.lines=e.unique,this.compile(),this},getAABB:function(){var e={min:new l(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)};e.max=e.min.negative();for(var t=0;t<this.vertices.length;t++){var n=l.fromArray(this.vertices[t]);e.min=l.min(e.min,n),e.max=l.max(e.max,n)}return e},getBoundingSphere:function(){for(var e=this.getAABB(),t={center:e.min.add(e.max).divide(2),radius:0},n=0;n<this.vertices.length;n++)t.radius=Math.max(t.radius,l.fromArray(this.vertices[n]).subtract(t.center).length());return t}},o.plane=function(e){for(var t=new o(e=e||{}),n=e.detailX||e.detail||1,r=e.detailY||e.detail||1,i=0;i<=r;i++)for(var s=i/r,a=0;a<=n;a++){var u=a/n;if(t.vertices.push([2*u-1,2*s-1,0]),t.coords&&t.coords.push([u,s]),t.normals&&t.normals.push([0,0,1]),a<n&&i<r){var l=a+i*(n+1);t.triangles.push([l,l+1,l+n+1]),t.triangles.push([l+n+1,l+1,l+n+2])}}return t.compile(),t};var a=[[0,4,2,6,-1,0,0],[1,3,5,7,1,0,0],[0,1,4,5,0,-1,0],[2,6,3,7,0,1,0],[0,2,1,3,0,0,-1],[4,5,6,7,0,0,1]];function u(e){return new l(2*(1&e)-1,(2&e)-1,(4&e)/2-1)}function l(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function c(e,t,n){for(var r;null!==(r=e.exec(t));)n(r)}o.cube=function(e){for(var t=new o(e),n=0;n<a.length;n++){for(var r=a[n],i=4*n,s=0;s<4;s++){var l=r[s];t.vertices.push(u(l).toArray()),t.coords&&t.coords.push([1&s,(2&s)/2]),t.normals&&t.normals.push(r.slice(4,7))}t.triangles.push([i,i+1,i+2]),t.triangles.push([i+2,i+1,i+3])}return t.compile(),t},o.sphere=function(e){function t(e,t,n){return p?[e,n,t]:[e,t,n]}function n(e){return e+(e-e*e)/2}for(var r=new o(e=e||{}),s=new i,a=e.detail||6,c=0;c<8;c++)for(var h=u(c),p=h.x*h.y*h.z>0,f=[],d=0;d<=a;d++){for(var m=0;d+m<=a;m++){var g=m/a,y=(a-d-m)/a,v={vertex:new l(n(x=d/a),n(g),n(y)).unit().multiply(h).toArray()};r.coords&&(v.coord=h.y>0?[1-x,y]:[y,1-x]),f.push(s.add(v))}if(d>0)for(m=0;d+m<=a;m++){var x=(d-1)*(a+1)+(d-1-(d-1)*(d-1))/2+m;g=d*(a+1)+(d-d*d)/2+m,r.triangles.push(t(f[x],f[x+1],f[g])),d+m<a&&r.triangles.push(t(f[g],f[x+1],f[g+1]))}}return r.vertices=s.unique.map((function(e){return e.vertex})),r.coords&&(r.coords=s.unique.map((function(e){return e.coord}))),r.normals&&(r.normals=r.vertices),r.compile(),r},o.load=function(e,t){"coords"in(t=t||{})||(t.coords=!!e.coords),"normals"in t||(t.normals=!!e.normals),"colors"in t||(t.colors=!!e.colors),"triangles"in t||(t.triangles=!!e.triangles),"lines"in t||(t.lines=!!e.lines);var n=new o(t);return n.vertices=e.vertices,n.coords&&(n.coords=e.coords),n.normals&&(n.normals=e.normals),n.colors&&(n.colors=e.colors),n.triangles&&(n.triangles=e.triangles),n.lines&&(n.lines=e.lines),n.compile(),n},l.prototype={negative:function(){return new l(-this.x,-this.y,-this.z)},add:function(e){return e instanceof l?new l(this.x+e.x,this.y+e.y,this.z+e.z):new l(this.x+e,this.y+e,this.z+e)},subtract:function(e){return e instanceof l?new l(this.x-e.x,this.y-e.y,this.z-e.z):new l(this.x-e,this.y-e,this.z-e)},multiply:function(e){return e instanceof l?new l(this.x*e.x,this.y*e.y,this.z*e.z):new l(this.x*e,this.y*e,this.z*e)},divide:function(e){return e instanceof l?new l(this.x/e.x,this.y/e.y,this.z/e.z):new l(this.x/e,this.y/e,this.z/e)},equals:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},cross:function(e){return new l(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},toArray:function(e){return[this.x,this.y,this.z].slice(0,e||3)},clone:function(){return new l(this.x,this.y,this.z)},init:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},l.negative=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t},l.add=function(e,t,n){return t instanceof l?(n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z):(n.x=e.x+t,n.y=e.y+t,n.z=e.z+t),n},l.subtract=function(e,t,n){return t instanceof l?(n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z):(n.x=e.x-t,n.y=e.y-t,n.z=e.z-t),n},l.multiply=function(e,t,n){return t instanceof l?(n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z):(n.x=e.x*t,n.y=e.y*t,n.z=e.z*t),n},l.divide=function(e,t,n){return t instanceof l?(n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z):(n.x=e.x/t,n.y=e.y/t,n.z=e.z/t),n},l.cross=function(e,t,n){return n.x=e.y*t.z-e.z*t.y,n.y=e.z*t.x-e.x*t.z,n.z=e.x*t.y-e.y*t.x,n},l.unit=function(e,t){var n=e.length();return t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,t},l.fromAngles=function(e,t){return new l(Math.cos(e)*Math.cos(t),Math.sin(t),Math.sin(e)*Math.cos(t))},l.randomDirection=function(){return l.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},l.min=function(e,t){return new l(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.min(e.z,t.z))},l.max=function(e,t){return new l(Math.max(e.x,t.x),Math.max(e.y,t.y),Math.max(e.z,t.z))},l.lerp=function(e,t,n){return t.subtract(e).multiply(n).add(e)},l.fromArray=function(e){return new l(e[0],e[1],e[2])};var h,p="LIGHTGL";function f(e,t){function n(e){var t=document.getElementById(e);return t?t.text:e}var r=(e=n(e))+(t=n(t)),i={};function s(e,t){var n={},r=/^((\s*\/\/.*\n|\s*#extension.*\n)+)\^*$/.exec(t);return t=r?r[1]+e+t.substr(r[1].length):e+t,c(/\bgl_\w+\b/g,e,(function(e){e in n||(t=t.replace(new RegExp("\\b"+e+"\\b","g"),p+e),n[e]=!0)})),t}function o(e,t){var n=h.createShader(e);if(h.shaderSource(n,t),h.compileShader(n),!h.getShaderParameter(n,h.COMPILE_STATUS))throw"compile error: "+h.getShaderInfoLog(n);return n}if(c(/\b(gl_[^;]*)\b;/g,"    uniform mat3 gl_NormalMatrix;    uniform mat4 gl_ModelViewMatrix;    uniform mat4 gl_ProjectionMatrix;    uniform mat4 gl_ModelViewProjectionMatrix;    uniform mat4 gl_ModelViewMatrixInverse;    uniform mat4 gl_ProjectionMatrixInverse;    uniform mat4 gl_ModelViewProjectionMatrixInverse;  ",(function(e){var t=e[1];if(-1!=r.indexOf(t)){var n=t.replace(/[a-z_]/g,"");i[n]=p+t}})),-1!=r.indexOf("ftransform")&&(i.MVPM="LIGHTGLgl_ModelViewProjectionMatrix"),this.usedMatrices=i,e=s("    uniform mat3 gl_NormalMatrix;    uniform mat4 gl_ModelViewMatrix;    uniform mat4 gl_ProjectionMatrix;    uniform mat4 gl_ModelViewProjectionMatrix;    uniform mat4 gl_ModelViewMatrixInverse;    uniform mat4 gl_ProjectionMatrixInverse;    uniform mat4 gl_ModelViewProjectionMatrixInverse;      attribute vec4 gl_Vertex;    attribute vec4 gl_TexCoord;    attribute vec3 gl_Normal;    attribute vec4 gl_Color;    vec4 ftransform() {      return gl_ModelViewProjectionMatrix * gl_Vertex;    }  ",e),t=s("    precision highp float;      uniform mat3 gl_NormalMatrix;    uniform mat4 gl_ModelViewMatrix;    uniform mat4 gl_ProjectionMatrix;    uniform mat4 gl_ModelViewProjectionMatrix;    uniform mat4 gl_ModelViewMatrixInverse;    uniform mat4 gl_ProjectionMatrixInverse;    uniform mat4 gl_ModelViewProjectionMatrixInverse;  ",t),this.program=h.createProgram(),h.attachShader(this.program,o(h.VERTEX_SHADER,e)),h.attachShader(this.program,o(h.FRAGMENT_SHADER,t)),h.linkProgram(this.program),!h.getProgramParameter(this.program,h.LINK_STATUS))throw"link error: "+h.getProgramInfoLog(this.program);this.attributes={},this.uniformLocations={};var a={};c(/uniform\s+sampler(1D|2D|3D|Cube)\s+(\w+)\s*;/g,e+t,(function(e){a[e[2]]=1})),this.isSampler=a}function d(e){var t=Object.prototype.toString.call(e);return"[object Number]"==t||"[object Boolean]"==t}f.prototype={uniforms:function(e){for(var t in h.useProgram(this.program),e){var n=this.uniformLocations[t]||h.getUniformLocation(this.program,t);if(n){this.uniformLocations[t]=n;var r=e[t];if(r instanceof l?r=[r.x,r.y,r.z]:r instanceof b&&(r=r.m),i=r,void 0,"[object Array]"==(s=Object.prototype.toString.call(i))||"[object Float32Array]"==s)switch(r.length){case 1:h.uniform1fv(n,new Float32Array(r));break;case 2:h.uniform2fv(n,new Float32Array(r));break;case 3:h.uniform3fv(n,new Float32Array(r));break;case 4:h.uniform4fv(n,new Float32Array(r));break;case 9:h.uniformMatrix3fv(n,!1,new Float32Array([r[0],r[3],r[6],r[1],r[4],r[7],r[2],r[5],r[8]]));break;case 16:h.uniformMatrix4fv(n,!1,new Float32Array([r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14],r[3],r[7],r[11],r[15]]));break;default:throw"don't know how to load uniform \""+t+'" of length '+r.length}else{if(!d(r))throw'attempted to set uniform "'+t+'" to invalid value '+r;(this.isSampler[t]?h.uniform1i:h.uniform1f).call(h,n,r)}}}var i,s;return this},draw:function(e,t){this.drawBuffers(e.vertexBuffers,e.indexBuffers[t==h.LINES?"lines":"triangles"],arguments.length<2?h.TRIANGLES:t)},drawBuffers:function(e,t,n){var r=this.usedMatrices,i=h.modelviewMatrix,s=h.projectionMatrix,o=r.MVMI||r.NM?i.inverse():null,a=r.PMI?s.inverse():null,u=r.MVPM||r.MVPMI?s.multiply(i):null,l={};if(r.MVM&&(l[r.MVM]=i),r.MVMI&&(l[r.MVMI]=o),r.PM&&(l[r.PM]=s),r.PMI&&(l[r.PMI]=a),r.MVPM&&(l[r.MVPM]=u),r.MVPMI&&(l[r.MVPMI]=u.inverse()),r.NM){var c=o.m;l[r.NM]=[c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]]}this.uniforms(l);var p=0;for(var f in e){var d=e[f],m=this.attributes[f]||h.getAttribLocation(this.program,f.replace(/^(gl_.*)$/,"LIGHTGL$1"));-1!=m&&d.buffer&&(this.attributes[f]=m,h.bindBuffer(h.ARRAY_BUFFER,d.buffer),h.enableVertexAttribArray(m),h.vertexAttribPointer(m,d.buffer.spacing,h.FLOAT,!1,0,0),p=d.buffer.length/d.buffer.spacing)}for(var f in this.attributes)f in e||h.disableVertexAttribArray(this.attributes[f]);return!p||t&&!t.buffer||(t?(h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,t.buffer),h.drawElements(n,t.buffer.length,h.UNSIGNED_SHORT,0)):h.drawArrays(n,0,p)),this}},f.fromURL=function(e,t){var n=function(e){var t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),200!==t.status)throw"could not load "+e;return t.responseText};return new f(n(e),n(t))},f.from=function(e,t){try{return new f(e,t)}catch(n){return f.fromURL(e,t)}};var m={create:function(e){var t,n,r=(e=e||{}).canvas;r||((r=document.createElement("canvas")).width=e.width||800,r.height=e.height||600),"alpha"in e||(e.alpha=!1);try{h=r.getContext("webgl",e)}catch(e){}try{h=h||r.getContext("experimental-webgl",e)}catch(e){}if(!h)throw"WebGL not supported";return function(){h.MODELVIEW=1|v,h.PROJECTION=2|v;var e=new b,t=new b;h.modelviewMatrix=new b,h.projectionMatrix=new b;var n,r,i=[],s=[];h.matrixMode=function(e){switch(e){case h.MODELVIEW:n="modelviewMatrix",r=i;break;case h.PROJECTION:n="projectionMatrix",r=s;break;default:throw"invalid matrix mode "+e}},h.loadIdentity=function(){b.identity(h[n])},h.loadMatrix=function(e){for(var t=e.m,r=h[n].m,i=0;i<16;i++)r[i]=t[i]},h.multMatrix=function(e){h.loadMatrix(b.multiply(h[n],e,t))},h.perspective=function(t,n,r,i){h.multMatrix(b.perspective(t,n,r,i,e))},h.frustum=function(t,n,r,i,s,o){h.multMatrix(b.frustum(t,n,r,i,s,o,e))},h.ortho=function(t,n,r,i,s,o){h.multMatrix(b.ortho(t,n,r,i,s,o,e))},h.scale=function(t,n,r){h.multMatrix(b.scale(t,n,r,e))},h.translate=function(t,n,r){h.multMatrix(b.translate(t,n,r,e))},h.rotate=function(t,n,r,i){h.multMatrix(b.rotate(t,n,r,i,e))},h.lookAt=function(t,n,r,i,s,o,a,u,l){h.multMatrix(b.lookAt(t,n,r,i,s,o,a,u,l,e))},h.pushMatrix=function(){r.push(Array.prototype.slice.call(h[n].m))},h.popMatrix=function(){var e=r.pop();h[n].m=x?new Float32Array(e):e},h.project=function(e,t,n,r,i,s){r=r||h.modelviewMatrix,i=i||h.projectionMatrix,s=s||h.getParameter(h.VIEWPORT);var o=i.transformPoint(r.transformPoint(new l(e,t,n)));return new l(s[0]+s[2]*(.5*o.x+.5),s[1]+s[3]*(.5*o.y+.5),.5*o.z+.5)},h.unProject=function(n,r,i,s,o,a){s=s||h.modelviewMatrix,o=o||h.projectionMatrix;var u=new l((n-(a=a||h.getParameter(h.VIEWPORT))[0])/a[2]*2-1,(r-a[1])/a[3]*2-1,2*i-1);return b.inverse(b.multiply(o,s,e),t).transformPoint(u)},h.matrixMode(h.MODELVIEW)}(),t={mesh:new o({coords:!0,colors:!0,triangles:!1}),mode:-1,coord:[0,0,0,0],color:[1,1,1,1],pointSize:1,shader:new f("      uniform float pointSize;      varying vec4 color;      varying vec4 coord;      void main() {        color = gl_Color;        coord = gl_TexCoord;        gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;        gl_PointSize = pointSize;      }    ","      uniform sampler2D texture;      uniform float pointSize;      uniform bool useTexture;      varying vec4 color;      varying vec4 coord;      void main() {        gl_FragColor = color;        if (useTexture) gl_FragColor *= texture2D(texture, coord.xy);      }    ")},h.pointSize=function(e){t.shader.uniforms({pointSize:e})},h.begin=function(e){if(-1!=t.mode)throw"mismatched gl.begin() and gl.end() calls";t.mode=e,t.mesh.colors=[],t.mesh.coords=[],t.mesh.vertices=[]},h.color=function(e,n,r,i){t.color=1==arguments.length?e.toArray().concat(1):[e,n,r,i||1]},h.texCoord=function(e,n){t.coord=1==arguments.length?e.toArray(2):[e,n]},h.vertex=function(e,n,r){t.mesh.colors.push(t.color),t.mesh.coords.push(t.coord),t.mesh.vertices.push(1==arguments.length?e.toArray():[e,n,r])},h.end=function(){if(-1==t.mode)throw"mismatched gl.begin() and gl.end() calls";t.mesh.compile(),t.shader.uniforms({useTexture:!!h.getParameter(h.TEXTURE_BINDING_2D)}).draw(t.mesh,t.mode),t.mode=-1},n=h,h.makeCurrent=function(){h=n},h.animate=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},t=(new Date).getTime(),n=h;!function r(){h=n;var i=(new Date).getTime();h.onupdate&&h.onupdate((i-t)/1e3),h.ondraw&&h.ondraw(),e(r),t=i}()},h.fullscreen=function(e){var t=(e=e||{}).paddingTop||0,n=e.paddingLeft||0,r=e.paddingRight||0,i=e.paddingBottom||0;if(!document.body)throw"document.body doesn't exist yet (call gl.fullscreen() from window.onload() or from inside the <body> tag)";function s(){h.canvas.width=window.innerWidth-n-r,h.canvas.height=window.innerHeight-t-i,h.viewport(0,0,h.canvas.width,h.canvas.height),!e.camera&&"camera"in e||(h.matrixMode(h.PROJECTION),h.loadIdentity(),h.perspective(e.fov||45,h.canvas.width/h.canvas.height,e.near||.1,e.far||1e3),h.matrixMode(h.MODELVIEW)),h.onresize&&h.onresize(),h.ondraw&&h.ondraw()}document.body.appendChild(h.canvas),document.body.style.overflow="hidden",h.canvas.style.position="absolute",h.canvas.style.left=n+"px",h.canvas.style.top=t+"px",y(window,"resize",s),s()},h},keys:{},Matrix:b,Indexer:i,Buffer:s,Mesh:o,HitTest:w,Raytracer:D,Shader:f,Texture:e,Vector:l};function g(e){return{8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",27:"ESCAPE",32:"SPACE",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN"}[e]||(e>=65&&e<=90?String.fromCharCode(e):null)}function y(e,t,n){e.addEventListener(t,n)}y(document,"keydown",(function(e){if(!e.altKey&&!e.ctrlKey&&!e.metaKey){var t=g(e.keyCode);t&&(m.keys[t]=!0),m.keys[e.keyCode]=!0}})),y(document,"keyup",(function(e){if(!e.altKey&&!e.ctrlKey&&!e.metaKey){var t=g(e.keyCode);t&&(m.keys[t]=!1),m.keys[e.keyCode]=!1}}));var v=305397760,x="undefined"!=typeof Float32Array;function b(){var e=Array.prototype.concat.apply([],arguments);e.length||(e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.m=x?new Float32Array(e):e}function w(e,t,n){this.t=arguments.length?e:Number.MAX_VALUE,this.hit=t,this.normal=n}function D(){var e=h.getParameter(h.VIEWPORT),t=h.modelviewMatrix.m,n=new l(t[0],t[4],t[8]),r=new l(t[1],t[5],t[9]),i=new l(t[2],t[6],t[10]),s=new l(t[3],t[7],t[11]);this.eye=new l(-s.dot(n),-s.dot(r),-s.dot(i));var o=e[0],a=o+e[2],u=e[1],c=u+e[3];this.ray00=h.unProject(o,u,1).subtract(this.eye),this.ray10=h.unProject(a,u,1).subtract(this.eye),this.ray01=h.unProject(o,c,1).subtract(this.eye),this.ray11=h.unProject(a,c,1).subtract(this.eye),this.viewport=e}return b.prototype={inverse:function(){return b.inverse(this,new b)},transpose:function(){return b.transpose(this,new b)},multiply:function(e){return b.multiply(this,e,new b)},transformPoint:function(e){var t=this.m;return new l(t[0]*e.x+t[1]*e.y+t[2]*e.z+t[3],t[4]*e.x+t[5]*e.y+t[6]*e.z+t[7],t[8]*e.x+t[9]*e.y+t[10]*e.z+t[11]).divide(t[12]*e.x+t[13]*e.y+t[14]*e.z+t[15])},transformVector:function(e){var t=this.m;return new l(t[0]*e.x+t[1]*e.y+t[2]*e.z,t[4]*e.x+t[5]*e.y+t[6]*e.z,t[8]*e.x+t[9]*e.y+t[10]*e.z)}},b.inverse=function(e,t){t=t||new b;var n=e.m,r=t.m;r[0]=n[5]*n[10]*n[15]-n[5]*n[14]*n[11]-n[6]*n[9]*n[15]+n[6]*n[13]*n[11]+n[7]*n[9]*n[14]-n[7]*n[13]*n[10],r[1]=-n[1]*n[10]*n[15]+n[1]*n[14]*n[11]+n[2]*n[9]*n[15]-n[2]*n[13]*n[11]-n[3]*n[9]*n[14]+n[3]*n[13]*n[10],r[2]=n[1]*n[6]*n[15]-n[1]*n[14]*n[7]-n[2]*n[5]*n[15]+n[2]*n[13]*n[7]+n[3]*n[5]*n[14]-n[3]*n[13]*n[6],r[3]=-n[1]*n[6]*n[11]+n[1]*n[10]*n[7]+n[2]*n[5]*n[11]-n[2]*n[9]*n[7]-n[3]*n[5]*n[10]+n[3]*n[9]*n[6],r[4]=-n[4]*n[10]*n[15]+n[4]*n[14]*n[11]+n[6]*n[8]*n[15]-n[6]*n[12]*n[11]-n[7]*n[8]*n[14]+n[7]*n[12]*n[10],r[5]=n[0]*n[10]*n[15]-n[0]*n[14]*n[11]-n[2]*n[8]*n[15]+n[2]*n[12]*n[11]+n[3]*n[8]*n[14]-n[3]*n[12]*n[10],r[6]=-n[0]*n[6]*n[15]+n[0]*n[14]*n[7]+n[2]*n[4]*n[15]-n[2]*n[12]*n[7]-n[3]*n[4]*n[14]+n[3]*n[12]*n[6],r[7]=n[0]*n[6]*n[11]-n[0]*n[10]*n[7]-n[2]*n[4]*n[11]+n[2]*n[8]*n[7]+n[3]*n[4]*n[10]-n[3]*n[8]*n[6],r[8]=n[4]*n[9]*n[15]-n[4]*n[13]*n[11]-n[5]*n[8]*n[15]+n[5]*n[12]*n[11]+n[7]*n[8]*n[13]-n[7]*n[12]*n[9],r[9]=-n[0]*n[9]*n[15]+n[0]*n[13]*n[11]+n[1]*n[8]*n[15]-n[1]*n[12]*n[11]-n[3]*n[8]*n[13]+n[3]*n[12]*n[9],r[10]=n[0]*n[5]*n[15]-n[0]*n[13]*n[7]-n[1]*n[4]*n[15]+n[1]*n[12]*n[7]+n[3]*n[4]*n[13]-n[3]*n[12]*n[5],r[11]=-n[0]*n[5]*n[11]+n[0]*n[9]*n[7]+n[1]*n[4]*n[11]-n[1]*n[8]*n[7]-n[3]*n[4]*n[9]+n[3]*n[8]*n[5],r[12]=-n[4]*n[9]*n[14]+n[4]*n[13]*n[10]+n[5]*n[8]*n[14]-n[5]*n[12]*n[10]-n[6]*n[8]*n[13]+n[6]*n[12]*n[9],r[13]=n[0]*n[9]*n[14]-n[0]*n[13]*n[10]-n[1]*n[8]*n[14]+n[1]*n[12]*n[10]+n[2]*n[8]*n[13]-n[2]*n[12]*n[9],r[14]=-n[0]*n[5]*n[14]+n[0]*n[13]*n[6]+n[1]*n[4]*n[14]-n[1]*n[12]*n[6]-n[2]*n[4]*n[13]+n[2]*n[12]*n[5],r[15]=n[0]*n[5]*n[10]-n[0]*n[9]*n[6]-n[1]*n[4]*n[10]+n[1]*n[8]*n[6]+n[2]*n[4]*n[9]-n[2]*n[8]*n[5];for(var i=n[0]*r[0]+n[1]*r[4]+n[2]*r[8]+n[3]*r[12],s=0;s<16;s++)r[s]/=i;return t},b.transpose=function(e,t){t=t||new b;var n=e.m,r=t.m;return r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15],t},b.multiply=function(e,t,n){n=n||new b;var r=e.m,i=t.m,s=n.m;return s[0]=r[0]*i[0]+r[1]*i[4]+r[2]*i[8]+r[3]*i[12],s[1]=r[0]*i[1]+r[1]*i[5]+r[2]*i[9]+r[3]*i[13],s[2]=r[0]*i[2]+r[1]*i[6]+r[2]*i[10]+r[3]*i[14],s[3]=r[0]*i[3]+r[1]*i[7]+r[2]*i[11]+r[3]*i[15],s[4]=r[4]*i[0]+r[5]*i[4]+r[6]*i[8]+r[7]*i[12],s[5]=r[4]*i[1]+r[5]*i[5]+r[6]*i[9]+r[7]*i[13],s[6]=r[4]*i[2]+r[5]*i[6]+r[6]*i[10]+r[7]*i[14],s[7]=r[4]*i[3]+r[5]*i[7]+r[6]*i[11]+r[7]*i[15],s[8]=r[8]*i[0]+r[9]*i[4]+r[10]*i[8]+r[11]*i[12],s[9]=r[8]*i[1]+r[9]*i[5]+r[10]*i[9]+r[11]*i[13],s[10]=r[8]*i[2]+r[9]*i[6]+r[10]*i[10]+r[11]*i[14],s[11]=r[8]*i[3]+r[9]*i[7]+r[10]*i[11]+r[11]*i[15],s[12]=r[12]*i[0]+r[13]*i[4]+r[14]*i[8]+r[15]*i[12],s[13]=r[12]*i[1]+r[13]*i[5]+r[14]*i[9]+r[15]*i[13],s[14]=r[12]*i[2]+r[13]*i[6]+r[14]*i[10]+r[15]*i[14],s[15]=r[12]*i[3]+r[13]*i[7]+r[14]*i[11]+r[15]*i[15],n},b.identity=function(e){var t=(e=e||new b).m;return t[0]=t[5]=t[10]=t[15]=1,t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=t[14]=0,e},b.perspective=function(e,t,n,r,i){var s=Math.tan(e*Math.PI/360)*n,o=s*t;return b.frustum(-o,o,-s,s,n,r,i)},b.frustum=function(e,t,n,r,i,s,o){var a=(o=o||new b).m;return a[0]=2*i/(t-e),a[1]=0,a[2]=(t+e)/(t-e),a[3]=0,a[4]=0,a[5]=2*i/(r-n),a[6]=(r+n)/(r-n),a[7]=0,a[8]=0,a[9]=0,a[10]=-(s+i)/(s-i),a[11]=-2*s*i/(s-i),a[12]=0,a[13]=0,a[14]=-1,a[15]=0,o},b.ortho=function(e,t,n,r,i,s,o){var a=(o=o||new b).m;return a[0]=2/(t-e),a[1]=0,a[2]=0,a[3]=-(t+e)/(t-e),a[4]=0,a[5]=2/(r-n),a[6]=0,a[7]=-(r+n)/(r-n),a[8]=0,a[9]=0,a[10]=-2/(s-i),a[11]=-(s+i)/(s-i),a[12]=0,a[13]=0,a[14]=0,a[15]=1,o},b.scale=function(e,t,n,r){var i=(r=r||new b).m;return i[0]=e,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,r},b.translate=function(e,t,n,r){var i=(r=r||new b).m;return i[0]=1,i[1]=0,i[2]=0,i[3]=e,i[4]=0,i[5]=1,i[6]=0,i[7]=t,i[8]=0,i[9]=0,i[10]=1,i[11]=n,i[12]=0,i[13]=0,i[14]=0,i[15]=1,r},b.rotate=function(e,t,n,r,i){if(!e||!t&&!n&&!r)return b.identity(i);var s=(i=i||new b).m,o=Math.sqrt(t*t+n*n+r*r);e*=Math.PI/180,t/=o,n/=o,r/=o;var a=Math.cos(e),u=Math.sin(e),l=1-a;return s[0]=t*t*l+a,s[1]=t*n*l-r*u,s[2]=t*r*l+n*u,s[3]=0,s[4]=n*t*l+r*u,s[5]=n*n*l+a,s[6]=n*r*l-t*u,s[7]=0,s[8]=r*t*l-n*u,s[9]=r*n*l+t*u,s[10]=r*r*l+a,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,i},b.lookAt=function(e,t,n,r,i,s,o,a,u,c){var h=(c=c||new b).m,p=new l(e,t,n),f=new l(r,i,s),d=new l(o,a,u),m=p.subtract(f).unit(),g=d.cross(m).unit(),y=m.cross(g).unit();return h[0]=g.x,h[1]=g.y,h[2]=g.z,h[3]=-g.dot(p),h[4]=y.x,h[5]=y.y,h[6]=y.z,h[7]=-y.dot(p),h[8]=m.x,h[9]=m.y,h[10]=m.z,h[11]=-m.dot(p),h[12]=0,h[13]=0,h[14]=0,h[15]=1,c},w.prototype={mergeWith:function(e){e.t>0&&e.t<this.t&&(this.t=e.t,this.hit=e.hit,this.normal=e.normal)}},D.prototype={getRayForPixel:function(e,t){e=(e-this.viewport[0])/this.viewport[2],t=1-(t-this.viewport[1])/this.viewport[3];var n=l.lerp(this.ray00,this.ray10,e),r=l.lerp(this.ray01,this.ray11,e);return l.lerp(n,r,t).unit()}},D.hitTestBox=function(e,t,n,r){var i=n.subtract(e).divide(t),s=r.subtract(e).divide(t),o=l.min(i,s),a=l.max(i,s),u=o.max(),c=a.min();if(u>0&&u<c){var h=1e-6,p=e.add(t.multiply(u));return n=n.add(h),r=r.subtract(h),new w(u,p,new l((p.x>r.x)-(p.x<n.x),(p.y>r.y)-(p.y<n.y),(p.z>r.z)-(p.z<n.z)))}return null},D.hitTestSphere=function(e,t,n,r){var i=e.subtract(n),s=t.dot(t),o=2*t.dot(i),a=o*o-4*s*(i.dot(i)-r*r);if(a>0){var u=(-o-Math.sqrt(a))/(2*s),l=e.add(t.multiply(u));return new w(u,l,l.subtract(n).divide(r))}return null},D.hitTestTriangle=function(e,t,n,r,i){var s=r.subtract(n),o=i.subtract(n),a=s.cross(o).unit(),u=a.dot(n.subtract(e))/a.dot(t);if(u>0){var l=e.add(t.multiply(u)),c=l.subtract(n),h=o.dot(o),p=o.dot(s),f=o.dot(c),d=s.dot(s),m=s.dot(c),g=h*d-p*p,y=(d*f-p*m)/g,v=(h*m-p*f)/g;if(y>=0&&v>=0&&y+v<=1)return new w(u,l,a)}return null},m}();t.exports=r},{}]},{},[236])(236)}));